/* ui.vala.c generated by valac 0.42.6, the Vala compiler
 * generated from ui.vala, do not modify */



#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>
#include <glib/gi18n-lib.h>
#include <float.h>
#include <math.h>
#include <pango/pango.h>
#include <gdk/gdk.h>
#include <stdio.h>
#include <glib/gstdio.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <json-glib/json-glib.h>
#include <gio/gio.h>
#include <locale.h>


#define TYPE_APP_WIN (app_win_get_type ())
#define APP_WIN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_APP_WIN, AppWin))
#define APP_WIN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_APP_WIN, AppWinClass))
#define IS_APP_WIN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_APP_WIN))
#define IS_APP_WIN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_APP_WIN))
#define APP_WIN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_APP_WIN, AppWinClass))

typedef struct _AppWin AppWin;
typedef struct _AppWinClass AppWinClass;

#define TYPE_MY_GRID (my_grid_get_type ())
#define MY_GRID(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MY_GRID, MyGrid))
#define MY_GRID_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MY_GRID, MyGridClass))
#define IS_MY_GRID(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MY_GRID))
#define IS_MY_GRID_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MY_GRID))
#define MY_GRID_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MY_GRID, MyGridClass))

typedef struct _MyGrid MyGrid;
typedef struct _MyGridClass MyGridClass;

#define TYPE_LOGIN_DIALOG (login_dialog_get_type ())
#define LOGIN_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_LOGIN_DIALOG, LoginDialog))
#define LOGIN_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_LOGIN_DIALOG, LoginDialogClass))
#define IS_LOGIN_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_LOGIN_DIALOG))
#define IS_LOGIN_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_LOGIN_DIALOG))
#define LOGIN_DIALOG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_LOGIN_DIALOG, LoginDialogClass))

typedef struct _LoginDialog LoginDialog;
typedef struct _LoginDialogClass LoginDialogClass;

#define TYPE_ADD_USER_DIALOG (add_user_dialog_get_type ())
#define ADD_USER_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_ADD_USER_DIALOG, AddUserDialog))
#define ADD_USER_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_ADD_USER_DIALOG, AddUserDialogClass))
#define IS_ADD_USER_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_ADD_USER_DIALOG))
#define IS_ADD_USER_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_ADD_USER_DIALOG))
#define ADD_USER_DIALOG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_ADD_USER_DIALOG, AddUserDialogClass))

typedef struct _AddUserDialog AddUserDialog;
typedef struct _AddUserDialogClass AddUserDialogClass;

#define TYPE_MULTI_SEND_UI (multi_send_ui_get_type ())
#define MULTI_SEND_UI(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MULTI_SEND_UI, MultiSendUi))
#define MULTI_SEND_UI_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MULTI_SEND_UI, MultiSendUiClass))
#define IS_MULTI_SEND_UI(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MULTI_SEND_UI))
#define IS_MULTI_SEND_UI_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MULTI_SEND_UI))
#define MULTI_SEND_UI_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MULTI_SEND_UI, MultiSendUiClass))

typedef struct _MultiSendUi MultiSendUi;
typedef struct _MultiSendUiClass MultiSendUiClass;

#define TYPE_CHAT_CLIENT (chat_client_get_type ())
#define CHAT_CLIENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_CHAT_CLIENT, ChatClient))
#define CHAT_CLIENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_CHAT_CLIENT, ChatClientClass))
#define IS_CHAT_CLIENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_CHAT_CLIENT))
#define IS_CHAT_CLIENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_CHAT_CLIENT))
#define CHAT_CLIENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_CHAT_CLIENT, ChatClientClass))

typedef struct _ChatClient ChatClient;
typedef struct _ChatClientClass ChatClientClass;

#define TYPE_USER_MSG (user_msg_get_type ())
typedef struct _UserMsg UserMsg;
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _MyGridPrivate MyGridPrivate;
enum  {
	MY_GRID_0_PROPERTY,
	MY_GRID_NUM_PROPERTIES
};
static GParamSpec* my_grid_properties[MY_GRID_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
typedef struct _Block1Data Block1Data;

#define TYPE_STRANGERS_DIALG (strangers_dialg_get_type ())
#define STRANGERS_DIALG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_STRANGERS_DIALG, StrangersDialg))
#define STRANGERS_DIALG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_STRANGERS_DIALG, StrangersDialgClass))
#define IS_STRANGERS_DIALG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_STRANGERS_DIALG))
#define IS_STRANGERS_DIALG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_STRANGERS_DIALG))
#define STRANGERS_DIALG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_STRANGERS_DIALG, StrangersDialgClass))

typedef struct _StrangersDialg StrangersDialg;
typedef struct _StrangersDialgClass StrangersDialgClass;

#define TYPE_SEARCH_DIALG (search_dialg_get_type ())
#define SEARCH_DIALG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_SEARCH_DIALG, SearchDialg))
#define SEARCH_DIALG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_SEARCH_DIALG, SearchDialgClass))
#define IS_SEARCH_DIALG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_SEARCH_DIALG))
#define IS_SEARCH_DIALG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_SEARCH_DIALG))
#define SEARCH_DIALG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_SEARCH_DIALG, SearchDialgClass))

typedef struct _SearchDialg SearchDialg;
typedef struct _SearchDialgClass SearchDialgClass;
typedef struct _Block2Data Block2Data;
#define _user_msg_free0(var) ((var == NULL) ? NULL : (var = (user_msg_free (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _Block3Data Block3Data;
typedef struct _Block4Data Block4Data;

#define TYPE_MY_FRIEND_MENU (my_friend_menu_get_type ())
#define MY_FRIEND_MENU(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MY_FRIEND_MENU, MyFriendMenu))
#define MY_FRIEND_MENU_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MY_FRIEND_MENU, MyFriendMenuClass))
#define IS_MY_FRIEND_MENU(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MY_FRIEND_MENU))
#define IS_MY_FRIEND_MENU_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MY_FRIEND_MENU))
#define MY_FRIEND_MENU_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MY_FRIEND_MENU, MyFriendMenuClass))

typedef struct _MyFriendMenu MyFriendMenu;
typedef struct _MyFriendMenuClass MyFriendMenuClass;
typedef struct _Block5Data Block5Data;
#define __vala_JsonNode_free0(var) ((var == NULL) ? NULL : (var = (_vala_JsonNode_free (var), NULL)))
#define _json_object_unref0(var) ((var == NULL) ? NULL : (var = (json_object_unref (var), NULL)))
typedef struct _AppWinPrivate AppWinPrivate;
enum  {
	APP_WIN_0_PROPERTY,
	APP_WIN_NUM_PROPERTIES
};
static GParamSpec* app_win_properties[APP_WIN_NUM_PROPERTIES];
typedef struct _Block6Data Block6Data;
typedef struct _LoginDialogPrivate LoginDialogPrivate;
enum  {
	LOGIN_DIALOG_0_PROPERTY,
	LOGIN_DIALOG_NUM_PROPERTIES
};
static GParamSpec* login_dialog_properties[LOGIN_DIALOG_NUM_PROPERTIES];

#define TYPE_USER_DATA (user_data_get_type ())
typedef struct _UserData UserData;
#define _user_data_free0(var) ((var == NULL) ? NULL : (var = (user_data_free (var), NULL)))

struct _UserMsg {
	gint64 id;
	gint sex;
	gchar* name;
	gchar* desc;
	gint age;
	gchar* msg_offline;
	gchar* timestamp_offline;
};

struct _MyGrid {
	GObject parent_instance;
	MyGridPrivate * priv;
	GtkEntry* port1;
	GtkGrid* mygrid;
	GeeHashMap* frds1;
	GtkCssProvider* provider1;
	GtkCssProvider* mark1;
	GtkCssProvider* name_css;
	gint mark_num;
	GtkCssProvider* button1;
	GtkCssProvider* link_css1;
	GtkButton* strangers_btn;
	GtkButton* user_btn;
	GtkButton* msend_btn;
	gchar* man_icon;
	gchar* woman_icon;
	gint64 uid;
	gint16 usex;
	gchar* uname;
	gchar* udesc;
	gint16 uage;
	gchar* host;
};

struct _MyGridClass {
	GObjectClass parent_class;
};

struct _MyGridPrivate {
	GtkListBox* friends;
	GtkListBox* msgs;
	GtkEntry* entry1;
	GtkLabel* droplabel;
	gint64 to;
	gboolean running;
	GeeHashMap* frd_boxes;
	GtkCssProvider* cssp;
	GtkScrolledWindow* msg_win;
	GeeHashMap* boxes;
	gchar* pressed;
};

struct _Block1Data {
	int _ref_count_;
	MyGrid* self;
	GtkButton* port_btn;
};

struct _Block2Data {
	int _ref_count_;
	MyGrid* self;
	GtkMessageDialog* dlg_user;
};

struct _Block3Data {
	int _ref_count_;
	MyGrid* self;
	GtkDialog* dlg_pwd;
	GtkEntry* pwd1;
	GtkEntry* pwd2;
	GtkEntry* pwd3;
};

struct _Block4Data {
	int _ref_count_;
	MyGrid* self;
	gint64 h_id;
	UserMsg user1;
};

struct _Block5Data {
	int _ref_count_;
	MyGrid* self;
	gchar* dir1;
	gchar* pathname;
};

struct _AppWin {
	GtkApplicationWindow parent_instance;
	AppWinPrivate * priv;
	gint counter;
};

struct _AppWinClass {
	GtkApplicationWindowClass parent_class;
};

struct _AppWinPrivate {
	GtkStatusIcon* tray1;
	GdkPixbuf* icon1;
	GdkPixbuf* icon2;
	GtkVBox* box1;
};

struct _Block6Data {
	int _ref_count_;
	AppWin* self;
	GtkMessageDialog* dlg_about;
};

struct _LoginDialog {
	GObject parent_instance;
	LoginDialogPrivate * priv;
	GtkEntry* name;
	GtkEntry* passwd;
	GtkDialog* dlg1;
};

struct _LoginDialogClass {
	GObjectClass parent_class;
};

struct _UserData {
	gint64 Id;
	gchar* Name;
	gint Sex;
	gint Age;
	gchar* Desc;
};


extern AppWin* app;
AppWin* app = NULL;
extern MyGrid* grid1;
MyGrid* grid1 = NULL;
extern LoginDialog* login1;
LoginDialog* login1 = NULL;
extern AddUserDialog* adduser1;
AddUserDialog* adduser1 = NULL;
extern MultiSendUi* msend_ui;
MultiSendUi* msend_ui = NULL;
extern ChatClient* client;
ChatClient* client = NULL;
extern gint RELEASE;
gint RELEASE = 37;
extern gint LATESTVER;
gint LATESTVER = 0;
static gint MyGrid_private_offset;
static gpointer my_grid_parent_class = NULL;
extern gchar* prog_path;
extern guint16 proxy_port;
extern StrangersDialg* strangers1;
extern SearchDialg* search1;
extern guint16 server_port;
extern MyFriendMenu* popup1;
extern GtkApplication* application1;
GtkApplication* application1 = NULL;
static gint AppWin_private_offset;
static gpointer app_win_parent_class = NULL;
static gpointer login_dialog_parent_class = NULL;
gchar* prog_path = NULL;
guint16 server_port = (guint16) 7890;
guint16 proxy_port = 0U;

GType app_win_get_type (void) G_GNUC_CONST;
GType my_grid_get_type (void) G_GNUC_CONST;
GType login_dialog_get_type (void) G_GNUC_CONST;
GType add_user_dialog_get_type (void) G_GNUC_CONST;
GType multi_send_ui_get_type (void) G_GNUC_CONST;
GType chat_client_get_type (void) G_GNUC_CONST;
GType user_msg_get_type (void) G_GNUC_CONST;
UserMsg* user_msg_dup (const UserMsg* self);
void user_msg_free (UserMsg* self);
void user_msg_copy (const UserMsg* self,
                    UserMsg* dest);
void user_msg_destroy (UserMsg* self);
MyGrid* my_grid_new (void);
MyGrid* my_grid_construct (GType object_type);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static gint __lambda7_ (MyGrid* self,
                 GtkListBoxRow* row1,
                 GtkListBoxRow* row2);
static gint ___lambda7__gtk_list_box_sort_func (GtkListBoxRow* row1,
                                         GtkListBoxRow* row2,
                                         gpointer self);
static void __lambda8_ (MyGrid* self,
                 GdkDragContext* context,
                 gint x,
                 gint y,
                 GtkSelectionData* data,
                 guint info,
                 guint time);
void my_grid_send_uri1 (MyGrid* self,
                        gchar** uris,
                        int uris_length1);
static void ___lambda8__gtk_widget_drag_data_received (GtkWidget* _sender,
                                                GdkDragContext* context,
                                                gint x,
                                                gint y,
                                                GtkSelectionData* selection_data,
                                                guint info,
                                                guint time_,
                                                gpointer self);
static gboolean __lambda32_ (MyGrid* self,
                      GdkEventKey* e);
static void ___lambda33_ (MyGrid* self,
                   GtkClipboard* b,
                   gchar** uris,
                   int uris_length1);
static void ____lambda33__gtk_clipboard_uri_received_func (GtkClipboard* clipboard,
                                                    gchar** uris,
                                                    gpointer self);
static gboolean ___lambda32__gtk_widget_key_press_event (GtkWidget* _sender,
                                                  GdkEventKey* event,
                                                  gpointer self);
static void __lambda34_ (MyGrid* self);
StrangersDialg* strangers_dialg_new (void);
StrangersDialg* strangers_dialg_construct (GType object_type);
GType strangers_dialg_get_type (void) G_GNUC_CONST;
gint chat_client_get_proxy (ChatClient* self);
gchar* chat_client_get_host (ChatClient* self);
void app_win_update_tooltip (AppWin* self);
static void ___lambda34__gtk_widget_show (GtkWidget* _sender,
                                   gpointer self);
static void __lambda35_ (MyGrid* self);
SearchDialg* search_dialg_new (void);
SearchDialg* search_dialg_construct (GType object_type);
GType search_dialg_get_type (void) G_GNUC_CONST;
void search_dialg_show (SearchDialg* self);
static void ___lambda35__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda36_ (Block1Data* _data1_);
gint chat_client_set_proxy (ChatClient* self,
                            gint port);
static void ___lambda36__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda37_ (MyGrid* self);
void strangers_dialg_show (StrangersDialg* self);
static void ___lambda37__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda38_ (MyGrid* self);
MultiSendUi* multi_send_ui_new (void);
MultiSendUi* multi_send_ui_construct (GType object_type);
void multi_send_ui_show (MultiSendUi* self);
static void ___lambda38__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda52_ (MyGrid* self);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static void __lambda53_ (Block2Data* _data2_,
                  gint rid);
static void ___lambda53__gtk_dialog_response (GtkDialog* _sender,
                                       gint response_id,
                                       gpointer self);
static void ___lambda52__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda54_ (MyGrid* self);
void my_grid_send_msg (MyGrid* self);
static void ___lambda54__gtk_entry_activate (GtkEntry* _sender,
                                      gpointer self);
static void __lambda56_ (MyGrid* self);
static void ___lambda56__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda57_ (MyGrid* self,
                  GtkListBoxRow* r);
void app_win_clear_notify (AppWin* self);
void my_grid_scroll_msgbox (MyGrid* self);
static void ___lambda57__gtk_list_box_row_selected (GtkListBox* _sender,
                                             GtkListBoxRow* row,
                                             gpointer self);
static void my_grid_set_css_once (MyGrid* self);
void my_grid_add_text (MyGrid* self,
                       const gchar* text,
                       gboolean center,
                       gboolean markup);
void chat_client_send_file (ChatClient* self,
                            gint64 to,
                            const gchar* pathname);
void my_grid_add_left_name_icon (MyGrid* self,
                                 const gchar* name,
                                 gint16 sex);
void chat_client_ChatTo (ChatClient* self,
                         gint64 to,
                         const gchar* msg);
static gboolean __lambda55_ (MyGrid* self);
static gboolean ___lambda55__gsource_func (gpointer self);
static void my_grid_set_css_to (MyGrid* self,
                         GtkWidget* w,
                         GtkCssProvider* p);
void my_grid_show_sended_msg_to (MyGrid* self,
                                 gint64 to,
                                 const gchar* msg);
void my_grid_add_left_name_icon_to (MyGrid* self,
                                    gint64 to,
                                    const gchar* name,
                                    gint16 sex);
void my_grid_add_text_to (MyGrid* self,
                          gint64 to,
                          const gchar* text,
                          gboolean center,
                          gboolean markup);
void my_grid_update_pwd (MyGrid* self);
static Block3Data* block3_data_ref (Block3Data* _data3_);
static void block3_data_unref (void * _userdata_);
static void __lambda58_ (Block3Data* _data3_,
                  gint rid);
gint chat_client_update_pwd (ChatClient* self,
                             const gchar* name,
                             const gchar* pwd1,
                             const gchar* pwd2);
static void ___lambda58__gtk_dialog_response (GtkDialog* _sender,
                                       gint response_id,
                                       gpointer self);
void my_grid_add_listbox_id (MyGrid* self,
                             gint64 uid);
void my_grid_add_right_name_icon (MyGrid* self,
                                  const gchar* name,
                                  gint16 sex);
void my_grid_msg_mark (MyGrid* self,
                       const gchar* uid);
void my_grid_release_resource (MyGrid* self);
void my_grid_add_friend (MyGrid* self,
                         UserMsg* user1,
                         gboolean tell);
static Block4Data* block4_data_ref (Block4Data* _data4_);
static void block4_data_unref (void * _userdata_);
void chat_client_tell (ChatClient* self,
                       gint64 to);
static void __lambda17_ (Block4Data* _data4_);
void chat_client_set_http_id (ChatClient* self,
                              gint64 uid);
void chat_client_open_path (ChatClient* self,
                            const gchar* path1);
static void ___lambda17__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda18_ (Block4Data* _data4_);
void chat_client_set_tcp_id (ChatClient* self,
                             gint64 uid);
static void ___lambda18__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static gboolean __lambda19_ (MyGrid* self,
                      GdkEventButton* e);
GType my_friend_menu_get_type (void) G_GNUC_CONST;
void my_friend_menu_set_id (MyFriendMenu* self,
                            const gchar* id);
static gboolean ___lambda19__gtk_widget_button_release_event (GtkWidget* _sender,
                                                       GdkEventButton* event,
                                                       gpointer self);
void my_grid_remove_friend (MyGrid* self,
                            const gchar* fid);
void chat_client_remove_friend (ChatClient* self,
                                gint64 fid);
void my_grid_add_image (MyGrid* self,
                        const gchar* pathname);
static void my_grid_add_operate_buttons (MyGrid* self,
                                  const gchar* pathname);
static Block5Data* block5_data_ref (Block5Data* _data5_);
static void block5_data_unref (void * _userdata_);
static void __lambda22_ (Block5Data* _data5_);
static void ___lambda22__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda23_ (Block5Data* _data5_);
static void ___lambda23__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda24_ (Block5Data* _data5_);
static void ___lambda24__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
void my_grid_rpc_callback (MyGrid* self,
                           gint8 typ,
                           gint64 from,
                           const gchar* msg);
static gboolean ____lambda10_ (MyGrid* self);
static gboolean _____lambda10__gsource_func (gpointer self);
void version_notify (void);
void chat_client_offline_msg_with_id (ChatClient* self,
                                      gint64 uid,
                                      const gchar* msg);
void msg_notify (const gchar* uname);
static JsonNode* _vala_JsonNode_copy (JsonNode* self);
static void _vala_JsonNode_free (JsonNode* self);
void my_grid_user_online (MyGrid* self,
                          gint64 uid1);
static gboolean __lambda25_ (MyGrid* self);
static gboolean ___lambda25__gsource_func (gpointer self);
void my_grid_user_offline (MyGrid* self,
                           gint64 uid1);
void app_win_tray_notify (AppWin* self);
static void my_grid_finalize (GObject * obj);
AppWin* app_win_new (void);
AppWin* app_win_construct (GType object_type);
static void __lambda4_ (AppWin* self);
static void ___lambda4__gtk_status_icon_activate (GtkStatusIcon* _sender,
                                           gpointer self);
static void __lambda5_ (AppWin* self,
                 GtkWidget* w);
static void ___lambda5__gtk_container_set_focus_child (GtkContainer* _sender,
                                                GtkWidget* child,
                                                gpointer self);
static void __lambda6_ (AppWin* self);
static void ___lambda6__gtk_widget_show (GtkWidget* _sender,
                                  gpointer self);
static gboolean __lambda59_ (AppWin* self,
                      GdkEventAny* e);
static gboolean ___lambda59__gtk_widget_delete_event (GtkWidget* _sender,
                                               GdkEventAny* event,
                                               gpointer self);
void app_win_setup_menubar (AppWin* self);
void app_win_append (AppWin* self,
                     GtkWidget* w);
static void app_win_add_actions (AppWin* self);
static void __lambda60_ (AppWin* self);
static void ___lambda60__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda61_ (AppWin* self);
static Block6Data* block6_data_ref (Block6Data* _data6_);
static void block6_data_unref (void * _userdata_);
static void __lambda62_ (Block6Data* _data6_,
                  gint rid);
static void ___lambda62__gtk_dialog_response (GtkDialog* _sender,
                                       gint response_id,
                                       gpointer self);
static void ___lambda61__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda63_ (AppWin* self);
static void ___lambda63__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda64_ (AppWin* self);
static void ___lambda64__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda65_ (AppWin* self);
static void ___lambda65__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda66_ (AppWin* self);
static void ___lambda66__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda67_ (AppWin* self);
static void ___lambda67__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda68_ (AppWin* self);
void chat_client_delete_me (ChatClient* self,
                            const gchar* name,
                            const gchar* pwd);
static void ___lambda68__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda69_ (AppWin* self);
void chat_client_update_desc (ChatClient* self,
                              const gchar* desc);
static void ___lambda69__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda70_ (AppWin* self);
static void ___lambda70__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda71_ (AppWin* self);
static void ___lambda71__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda72_ (AppWin* self);
static void ___lambda72__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void __lambda73_ (AppWin* self);
static void ___lambda73__g_simple_action_activate (GSimpleAction* _sender,
                                            GVariant* parameter,
                                            gpointer self);
static void app_win_finalize (GObject * obj);
LoginDialog* login_dialog_new (void);
LoginDialog* login_dialog_construct (GType object_type);
void login_dialog_load_name (LoginDialog* self);
static void __lambda74_ (LoginDialog* self);
void login_dialog_login (LoginDialog* self);
static void ___lambda74__gtk_entry_activate (GtkEntry* _sender,
                                      gpointer self);
static void __lambda76_ (LoginDialog* self,
                  gint rid);
AddUserDialog* add_user_dialog_new (void);
AddUserDialog* add_user_dialog_construct (GType object_type);
void add_user_dialog_show (AddUserDialog* self);
static void ___lambda76__gtk_dialog_response (GtkDialog* _sender,
                                       gint response_id,
                                       gpointer self);
GType user_data_get_type (void) G_GNUC_CONST;
UserData* user_data_dup (const UserData* self);
void user_data_free (UserData* self);
void user_data_copy (const UserData* self,
                     UserData* dest);
void user_data_destroy (UserData* self);
UserData* chat_client_login (ChatClient* self,
                             const gchar* name,
                             const gchar* pwd);
static gboolean __lambda75_ (LoginDialog* self);
void chat_client_get_friends_async (ChatClient* self);
static gboolean ___lambda75__gsource_func (gpointer self);
void save_name (const gchar* name1);
gint login_dialog_run (LoginDialog* self);
void login_dialog_hide (LoginDialog* self);
static void login_dialog_finalize (GObject * obj);
gchar* get_cfg_dir (const gchar* name);
void set_my_locale (const gchar* path1);
gint _vala_main (gchar** args,
                 int args_length1);
ChatClient* chat_client_new (void);
ChatClient* chat_client_construct (GType object_type);
MyFriendMenu* my_friend_menu_new (void);
MyFriendMenu* my_friend_menu_construct (GType object_type);
static gboolean __lambda80_ (void);
void chat_client_ping (ChatClient* self);
static gboolean ___lambda80__gsource_func (gpointer self);
void chat_client_quit (ChatClient* self);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


void
user_msg_copy (const UserMsg* self,
               UserMsg* dest)
{
	gint64 _tmp0_;
	gint _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	const gchar* _tmp4_;
	gchar* _tmp5_;
	gint _tmp6_;
	const gchar* _tmp7_;
	gchar* _tmp8_;
	const gchar* _tmp9_;
	gchar* _tmp10_;
	_tmp0_ = (*self).id;
	(*dest).id = _tmp0_;
	_tmp1_ = (*self).sex;
	(*dest).sex = _tmp1_;
	_tmp2_ = (*self).name;
	_tmp3_ = g_strdup (_tmp2_);
	_g_free0 ((*dest).name);
	(*dest).name = _tmp3_;
	_tmp4_ = (*self).desc;
	_tmp5_ = g_strdup (_tmp4_);
	_g_free0 ((*dest).desc);
	(*dest).desc = _tmp5_;
	_tmp6_ = (*self).age;
	(*dest).age = _tmp6_;
	_tmp7_ = (*self).msg_offline;
	_tmp8_ = g_strdup (_tmp7_);
	_g_free0 ((*dest).msg_offline);
	(*dest).msg_offline = _tmp8_;
	_tmp9_ = (*self).timestamp_offline;
	_tmp10_ = g_strdup (_tmp9_);
	_g_free0 ((*dest).timestamp_offline);
	(*dest).timestamp_offline = _tmp10_;
}


void
user_msg_destroy (UserMsg* self)
{
	_g_free0 ((*self).name);
	_g_free0 ((*self).desc);
	_g_free0 ((*self).msg_offline);
	_g_free0 ((*self).timestamp_offline);
}


UserMsg*
user_msg_dup (const UserMsg* self)
{
	UserMsg* dup;
	dup = g_new0 (UserMsg, 1);
	user_msg_copy (self, dup);
	return dup;
}


void
user_msg_free (UserMsg* self)
{
	user_msg_destroy (self);
	g_free (self);
}


GType
user_msg_get_type (void)
{
	static volatile gsize user_msg_type_id__volatile = 0;
	if (g_once_init_enter (&user_msg_type_id__volatile)) {
		GType user_msg_type_id;
		user_msg_type_id = g_boxed_type_register_static ("UserMsg", (GBoxedCopyFunc) user_msg_dup, (GBoxedFreeFunc) user_msg_free);
		g_once_init_leave (&user_msg_type_id__volatile, user_msg_type_id);
	}
	return user_msg_type_id__volatile;
}


static inline gpointer
my_grid_get_instance_private (MyGrid* self)
{
	return G_STRUCT_MEMBER_P (self, MyGrid_private_offset);
}


static Block1Data*
block1_data_ref (Block1Data* _data1_)
{
	g_atomic_int_inc (&_data1_->_ref_count_);
	return _data1_;
}


static void
block1_data_unref (void * _userdata_)
{
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
		MyGrid* self;
		self = _data1_->self;
		_g_object_unref0 (_data1_->port_btn);
		_g_object_unref0 (self);
		g_slice_free (Block1Data, _data1_);
	}
}


static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}


static gint
__lambda7_ (MyGrid* self,
            GtkListBoxRow* row1,
            GtkListBoxRow* row2)
{
	gint result = 0;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	GtkStyleContext* rsc1 = NULL;
	GeeHashMap* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	gpointer _tmp5_;
	GtkStyleContext* _tmp6_;
	GtkStyleContext* _tmp7_;
	GtkStyleContext* rsc2 = NULL;
	GeeHashMap* _tmp8_;
	const gchar* _tmp9_;
	const gchar* _tmp10_;
	gpointer _tmp11_;
	GtkStyleContext* _tmp12_;
	GtkStyleContext* _tmp13_;
	GtkStyleContext* _tmp14_;
	g_return_val_if_fail (row1 != NULL, 0);
	g_return_val_if_fail (row2 != NULL, 0);
	_tmp0_ = gtk_widget_get_name ((GtkWidget*) row1);
	_tmp1_ = _tmp0_;
	if (g_strcmp0 (_tmp1_, "0") == 0) {
		result = -1;
		return result;
	}
	_tmp2_ = self->priv->frd_boxes;
	_tmp3_ = gtk_widget_get_name ((GtkWidget*) row1);
	_tmp4_ = _tmp3_;
	_tmp5_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp2_, _tmp4_);
	_tmp6_ = gtk_widget_get_style_context ((GtkWidget*) ((GtkGrid*) _tmp5_));
	_tmp7_ = _g_object_ref0 (_tmp6_);
	rsc1 = _tmp7_;
	_tmp8_ = self->priv->frd_boxes;
	_tmp9_ = gtk_widget_get_name ((GtkWidget*) row2);
	_tmp10_ = _tmp9_;
	_tmp11_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp8_, _tmp10_);
	_tmp12_ = gtk_widget_get_style_context ((GtkWidget*) ((GtkGrid*) _tmp11_));
	_tmp13_ = _g_object_ref0 (_tmp12_);
	rsc2 = _tmp13_;
	_tmp14_ = rsc1;
	if (gtk_style_context_has_class (_tmp14_, "off")) {
		GtkStyleContext* _tmp15_;
		_tmp15_ = rsc2;
		if (gtk_style_context_has_class (_tmp15_, "off")) {
			const gchar* _tmp16_;
			const gchar* _tmp17_;
			const gchar* _tmp18_;
			const gchar* _tmp19_;
			_tmp16_ = gtk_widget_get_name ((GtkWidget*) row1);
			_tmp17_ = _tmp16_;
			_tmp18_ = gtk_widget_get_name ((GtkWidget*) row2);
			_tmp19_ = _tmp18_;
			if (g_ascii_strtoll (_tmp17_, NULL, 0) > g_ascii_strtoll (_tmp19_, NULL, 0)) {
				result = 1;
				_g_object_unref0 (rsc2);
				_g_object_unref0 (rsc1);
				return result;
			} else {
				result = -1;
				_g_object_unref0 (rsc2);
				_g_object_unref0 (rsc1);
				return result;
			}
		} else {
			result = 1;
			_g_object_unref0 (rsc2);
			_g_object_unref0 (rsc1);
			return result;
		}
	} else {
		GtkStyleContext* _tmp20_;
		_tmp20_ = rsc2;
		if (gtk_style_context_has_class (_tmp20_, "off")) {
			result = -1;
			_g_object_unref0 (rsc2);
			_g_object_unref0 (rsc1);
			return result;
		} else {
			const gchar* _tmp21_;
			const gchar* _tmp22_;
			const gchar* _tmp23_;
			const gchar* _tmp24_;
			_tmp21_ = gtk_widget_get_name ((GtkWidget*) row1);
			_tmp22_ = _tmp21_;
			_tmp23_ = gtk_widget_get_name ((GtkWidget*) row2);
			_tmp24_ = _tmp23_;
			if (g_ascii_strtoll (_tmp22_, NULL, 0) > g_ascii_strtoll (_tmp24_, NULL, 0)) {
				result = 1;
				_g_object_unref0 (rsc2);
				_g_object_unref0 (rsc1);
				return result;
			} else {
				result = -1;
				_g_object_unref0 (rsc2);
				_g_object_unref0 (rsc1);
				return result;
			}
		}
	}
	_g_object_unref0 (rsc2);
	_g_object_unref0 (rsc1);
}


static gint
___lambda7__gtk_list_box_sort_func (GtkListBoxRow* row1,
                                    GtkListBoxRow* row2,
                                    gpointer self)
{
	gint result;
	result = __lambda7_ ((MyGrid*) self, row1, row2);
	return result;
}


static void
__lambda8_ (MyGrid* self,
            GdkDragContext* context,
            gint x,
            gint y,
            GtkSelectionData* data,
            guint info,
            guint time)
{
	gchar** uris = NULL;
	gchar** _tmp0_;
	gchar** _tmp1_;
	gint uris_length1;
	gint _uris_size_;
	g_return_if_fail (context != NULL);
	g_return_if_fail (data != NULL);
	_tmp1_ = _tmp0_ = gtk_selection_data_get_uris (data);
	uris = _tmp1_;
	uris_length1 = _vala_array_length (_tmp0_);
	_uris_size_ = uris_length1;
	my_grid_send_uri1 (self, uris, uris_length1);
	uris = (_vala_array_free (uris, uris_length1, (GDestroyNotify) g_free), NULL);
}


static void
___lambda8__gtk_widget_drag_data_received (GtkWidget* _sender,
                                           GdkDragContext* context,
                                           gint x,
                                           gint y,
                                           GtkSelectionData* selection_data,
                                           guint info,
                                           guint time_,
                                           gpointer self)
{
	__lambda8_ ((MyGrid*) self, context, x, y, selection_data, info, time_);
}


static void
___lambda33_ (MyGrid* self,
              GtkClipboard* b,
              gchar** uris,
              int uris_length1)
{
	g_return_if_fail (b != NULL);
	my_grid_send_uri1 (self, uris, uris_length1);
}


static void
____lambda33__gtk_clipboard_uri_received_func (GtkClipboard* clipboard,
                                               gchar** uris,
                                               gpointer self)
{
	___lambda33_ ((MyGrid*) self, clipboard, uris, _vala_array_length (uris));
	g_object_unref (self);
}


static gboolean
__lambda32_ (MyGrid* self,
             GdkEventKey* e)
{
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	guint _tmp1_;
	g_return_val_if_fail (e != NULL, FALSE);
	_tmp1_ = e->keyval;
	if (_tmp1_ == GDK_KEY_v) {
		GdkModifierType _tmp2_;
		_tmp2_ = e->state;
		_tmp0_ = _tmp2_ == GDK_CONTROL_MASK;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		GtkClipboard* clipboard1 = NULL;
		GdkAtom _tmp3_;
		GtkClipboard* _tmp4_;
		GtkClipboard* _tmp5_;
		GtkClipboard* _tmp6_;
		_tmp3_ = GDK_NONE;
		_tmp4_ = gtk_clipboard_get (_tmp3_);
		_tmp5_ = _g_object_ref0 (_tmp4_);
		clipboard1 = _tmp5_;
		_tmp6_ = clipboard1;
		gtk_clipboard_request_uris (_tmp6_, ____lambda33__gtk_clipboard_uri_received_func, g_object_ref (self));
		_g_object_unref0 (clipboard1);
	}
	result = TRUE;
	return result;
}


static gboolean
___lambda32__gtk_widget_key_press_event (GtkWidget* _sender,
                                         GdkEventKey* event,
                                         gpointer self)
{
	gboolean result;
	result = __lambda32_ ((MyGrid*) self, event);
	return result;
}


static const gchar*
string_to_string (const gchar* self)
{
	const gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	result = self;
	return result;
}


static void
__lambda34_ (MyGrid* self)
{
	FILE* _tmp0_;
	StrangersDialg* _tmp1_;
	guint16 port2 = 0U;
	ChatClient* _tmp2_;
	guint16 _tmp3_;
	ChatClient* _tmp9_;
	gchar* _tmp10_;
	AppWin* _tmp11_;
	gint _tmp12_;
	gchar* _tmp13_;
	gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	gchar* _tmp17_;
	gchar* _tmp18_;
	gchar* _tmp19_;
	gchar* _tmp20_;
	const gchar* _tmp21_;
	const gchar* _tmp22_;
	const gchar* _tmp23_;
	const gchar* _tmp24_;
	gchar* _tmp25_;
	gchar* _tmp26_;
	gchar* _tmp27_;
	gchar* _tmp28_;
	AppWin* _tmp29_;
	_tmp0_ = stdout;
	fprintf (_tmp0_, "grid show\n");
	_tmp1_ = strangers_dialg_new ();
	_g_object_unref0 (strangers1);
	strangers1 = _tmp1_;
	_tmp2_ = client;
	port2 = (guint16) chat_client_get_proxy (_tmp2_);
	_tmp3_ = port2;
	if (((gint) _tmp3_) > 0) {
		guint16 _tmp4_;
		GtkEntry* _tmp5_;
		guint16 _tmp6_;
		gchar* _tmp7_;
		gchar* _tmp8_;
		_tmp4_ = port2;
		proxy_port = _tmp4_;
		_tmp5_ = self->port1;
		_tmp6_ = proxy_port;
		_tmp7_ = g_strdup_printf ("%hu", _tmp6_);
		_tmp8_ = _tmp7_;
		gtk_entry_set_text (_tmp5_, _tmp8_);
		_g_free0 (_tmp8_);
	} else {
		gtk_main_quit ();
	}
	_tmp9_ = client;
	_tmp10_ = chat_client_get_host (_tmp9_);
	_g_free0 (self->host);
	self->host = _tmp10_;
	_tmp11_ = app;
	_tmp12_ = self->mark_num;
	_tmp13_ = g_strdup_printf ("%i", _tmp12_);
	_tmp14_ = _tmp13_;
	_tmp15_ = g_strconcat ("(", _tmp14_, ")", NULL);
	_tmp16_ = _tmp15_;
	_tmp17_ = g_strconcat (_ ("Everyone Publish!"), _tmp16_, NULL);
	_tmp18_ = _tmp17_;
	_tmp19_ = g_strconcat (_tmp18_, " - ", NULL);
	_tmp20_ = _tmp19_;
	_tmp21_ = self->uname;
	_tmp22_ = string_to_string (_tmp21_);
	_tmp23_ = self->host;
	_tmp24_ = string_to_string (_tmp23_);
	_tmp25_ = g_strconcat (_tmp22_, "@", _tmp24_, NULL);
	_tmp26_ = _tmp25_;
	_tmp27_ = g_strconcat (_tmp20_, _tmp26_, NULL);
	_tmp28_ = _tmp27_;
	gtk_window_set_title ((GtkWindow*) _tmp11_, _tmp28_);
	_g_free0 (_tmp28_);
	_g_free0 (_tmp26_);
	_g_free0 (_tmp20_);
	_g_free0 (_tmp18_);
	_g_free0 (_tmp16_);
	_g_free0 (_tmp14_);
	_tmp29_ = app;
	app_win_update_tooltip (_tmp29_);
}


static void
___lambda34__gtk_widget_show (GtkWidget* _sender,
                              gpointer self)
{
	__lambda34_ ((MyGrid*) self);
}


static void
__lambda35_ (MyGrid* self)
{
	SearchDialg* _tmp0_;
	SearchDialg* _tmp1_;
	_tmp0_ = search_dialg_new ();
	_g_object_unref0 (search1);
	search1 = _tmp0_;
	_tmp1_ = search1;
	search_dialg_show (_tmp1_);
	return;
}


static void
___lambda35__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda35_ ((MyGrid*) self);
}


static void
__lambda36_ (Block1Data* _data1_)
{
	MyGrid* self;
	GtkEntry* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	self = _data1_->self;
	_tmp0_ = self->port1;
	g_object_get (_tmp0_, "editable", &_tmp1_, NULL);
	_tmp2_ = _tmp1_;
	if (_tmp2_ == FALSE) {
		GtkEntry* _tmp3_;
		_tmp3_ = self->port1;
		g_object_set (_tmp3_, "editable", TRUE, NULL);
		gtk_button_set_label (_data1_->port_btn, _ ("Save"));
	} else {
		GtkEntry* _tmp4_;
		gint ret_port = 0;
		ChatClient* _tmp5_;
		GtkEntry* _tmp6_;
		const gchar* _tmp7_;
		const gchar* _tmp8_;
		GtkEntry* _tmp9_;
		gint _tmp10_;
		gchar* _tmp11_;
		gchar* _tmp12_;
		_tmp4_ = self->port1;
		g_object_set (_tmp4_, "editable", FALSE, NULL);
		gtk_button_set_label (_data1_->port_btn, _ ("Modify"));
		_tmp5_ = client;
		_tmp6_ = self->port1;
		_tmp7_ = gtk_entry_get_text (_tmp6_);
		_tmp8_ = _tmp7_;
		ret_port = chat_client_set_proxy (_tmp5_, (gint) g_ascii_strtoll (_tmp8_, NULL, 0));
		_tmp9_ = self->port1;
		_tmp10_ = ret_port;
		_tmp11_ = g_strdup_printf ("%i", _tmp10_);
		_tmp12_ = _tmp11_;
		gtk_entry_set_text (_tmp9_, _tmp12_);
		_g_free0 (_tmp12_);
	}
}


static void
___lambda36__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda36_ (self);
}


static void
__lambda37_ (MyGrid* self)
{
	StrangersDialg* _tmp0_;
	_tmp0_ = strangers1;
	strangers_dialg_show (_tmp0_);
}


static void
___lambda37__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda37_ ((MyGrid*) self);
}


static void
__lambda38_ (MyGrid* self)
{
	MultiSendUi* _tmp0_;
	MultiSendUi* _tmp1_;
	_tmp0_ = multi_send_ui_new ();
	_g_object_unref0 (msend_ui);
	msend_ui = _tmp0_;
	_tmp1_ = msend_ui;
	multi_send_ui_show (_tmp1_);
}


static void
___lambda38__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda38_ ((MyGrid*) self);
}


static Block2Data*
block2_data_ref (Block2Data* _data2_)
{
	g_atomic_int_inc (&_data2_->_ref_count_);
	return _data2_;
}


static void
block2_data_unref (void * _userdata_)
{
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
		MyGrid* self;
		self = _data2_->self;
		_g_object_unref0 (_data2_->dlg_user);
		_g_object_unref0 (self);
		g_slice_free (Block2Data, _data2_);
	}
}


static void
__lambda53_ (Block2Data* _data2_,
             gint rid)
{
	MyGrid* self;
	GtkMessageDialog* _tmp0_;
	self = _data2_->self;
	_tmp0_ = _data2_->dlg_user;
	gtk_widget_destroy ((GtkWidget*) _tmp0_);
}


static void
___lambda53__gtk_dialog_response (GtkDialog* _sender,
                                  gint response_id,
                                  gpointer self)
{
	__lambda53_ (self, response_id);
}


static void
__lambda52_ (MyGrid* self)
{
	Block2Data* _data2_;
	AppWin* _tmp0_;
	GtkMessageDialog* _tmp1_;
	GtkMessageDialog* _tmp2_;
	const gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	gchar* sex = NULL;
	gchar* _tmp6_;
	gint16 _tmp7_;
	gchar* blog_dir = NULL;
	const gchar* _tmp9_;
	gchar* _tmp10_;
	GtkMessageDialog* _tmp11_;
	gint64 _tmp12_;
	gchar* _tmp13_;
	gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	gchar* _tmp17_;
	gchar* _tmp18_;
	gint16 _tmp19_;
	gchar* _tmp20_;
	gchar* _tmp21_;
	gchar* _tmp22_;
	gchar* _tmp23_;
	gchar* _tmp24_;
	gchar* _tmp25_;
	gchar* _tmp26_;
	gchar* _tmp27_;
	const gchar* _tmp28_;
	const gchar* _tmp29_;
	gchar* _tmp30_;
	gchar* _tmp31_;
	gchar* _tmp32_;
	gchar* _tmp33_;
	gchar* _tmp34_;
	gchar* _tmp35_;
	const gchar* _tmp36_;
	const gchar* _tmp37_;
	gchar* _tmp38_;
	gchar* _tmp39_;
	gchar* _tmp40_;
	gchar* _tmp41_;
	gchar* _tmp42_;
	gchar* _tmp43_;
	gchar* _tmp44_;
	gchar* _tmp45_;
	GtkMessageDialog* _tmp46_;
	GtkMessageDialog* _tmp47_;
	_data2_ = g_slice_new0 (Block2Data);
	_data2_->_ref_count_ = 1;
	_data2_->self = g_object_ref (self);
	_tmp0_ = app;
	_tmp1_ = (GtkMessageDialog*) gtk_message_dialog_new ((GtkWindow*) _tmp0_, GTK_DIALOG_MODAL, GTK_MESSAGE_INFO, GTK_BUTTONS_OK, NULL);
	g_object_ref_sink (_tmp1_);
	_data2_->dlg_user = _tmp1_;
	_tmp2_ = _data2_->dlg_user;
	_tmp3_ = self->uname;
	_tmp4_ = g_strconcat (_tmp3_, _ (" Details"), NULL);
	_tmp5_ = _tmp4_;
	g_object_set (_tmp2_, "text", _tmp5_, NULL);
	_g_free0 (_tmp5_);
	_tmp6_ = g_strdup (_ ("Man"));
	sex = _tmp6_;
	_tmp7_ = self->usex;
	if (((gint) _tmp7_) == 2) {
		gchar* _tmp8_;
		_tmp8_ = g_strdup (_ ("Woman"));
		_g_free0 (sex);
		sex = _tmp8_;
	}
	_tmp9_ = g_get_home_dir ();
	_tmp10_ = g_build_path (G_DIR_SEPARATOR_S, _tmp9_, "ChatShare", NULL);
	blog_dir = _tmp10_;
	_tmp11_ = _data2_->dlg_user;
	_tmp12_ = self->uid;
	_tmp13_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp12_);
	_tmp14_ = _tmp13_;
	_tmp15_ = g_strconcat ("ID:", _tmp14_, "\n", NULL);
	_tmp16_ = _tmp15_;
	_tmp17_ = g_strconcat (_tmp16_, _ ("Age:"), NULL);
	_tmp18_ = _tmp17_;
	_tmp19_ = self->uage;
	_tmp20_ = g_strdup_printf ("%" G_GINT16_FORMAT, _tmp19_);
	_tmp21_ = _tmp20_;
	_tmp22_ = g_strconcat (_tmp21_, "\n", NULL);
	_tmp23_ = _tmp22_;
	_tmp24_ = g_strconcat (_tmp18_, _tmp23_, NULL);
	_tmp25_ = _tmp24_;
	_tmp26_ = g_strconcat (_tmp25_, _ ("Sex:"), NULL);
	_tmp27_ = _tmp26_;
	_tmp28_ = sex;
	_tmp29_ = string_to_string (_tmp28_);
	_tmp30_ = g_strconcat (_tmp29_, "\n", NULL);
	_tmp31_ = _tmp30_;
	_tmp32_ = g_strconcat (_tmp27_, _tmp31_, NULL);
	_tmp33_ = _tmp32_;
	_tmp34_ = g_strconcat (_tmp33_, _ ("Description:"), NULL);
	_tmp35_ = _tmp34_;
	_tmp36_ = self->udesc;
	_tmp37_ = string_to_string (_tmp36_);
	_tmp38_ = g_strconcat (_tmp37_, "\n", NULL);
	_tmp39_ = _tmp38_;
	_tmp40_ = g_strconcat (_tmp35_, _tmp39_, NULL);
	_tmp41_ = _tmp40_;
	_tmp42_ = g_strconcat (_tmp41_, _ ("Blog Directory:"), NULL);
	_tmp43_ = _tmp42_;
	_tmp44_ = g_strconcat (_tmp43_, blog_dir, NULL);
	_tmp45_ = _tmp44_;
	g_object_set (_tmp11_, "secondary-text", _tmp45_, NULL);
	_g_free0 (_tmp45_);
	_g_free0 (_tmp43_);
	_g_free0 (_tmp41_);
	_g_free0 (_tmp39_);
	_g_free0 (_tmp35_);
	_g_free0 (_tmp33_);
	_g_free0 (_tmp31_);
	_g_free0 (_tmp27_);
	_g_free0 (_tmp25_);
	_g_free0 (_tmp23_);
	_g_free0 (_tmp21_);
	_g_free0 (_tmp18_);
	_g_free0 (_tmp16_);
	_g_free0 (_tmp14_);
	_tmp46_ = _data2_->dlg_user;
	gtk_widget_show ((GtkWidget*) _tmp46_);
	_tmp47_ = _data2_->dlg_user;
	g_signal_connect_data ((GtkDialog*) _tmp47_, "response", (GCallback) ___lambda53__gtk_dialog_response, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
	_g_free0 (blog_dir);
	_g_free0 (sex);
	block2_data_unref (_data2_);
	_data2_ = NULL;
}


static void
___lambda52__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda52_ ((MyGrid*) self);
}


static void
__lambda54_ (MyGrid* self)
{
	my_grid_send_msg (self);
}


static void
___lambda54__gtk_entry_activate (GtkEntry* _sender,
                                 gpointer self)
{
	__lambda54_ ((MyGrid*) self);
}


static void
__lambda56_ (MyGrid* self)
{
	my_grid_send_msg (self);
}


static void
___lambda56__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda56_ ((MyGrid*) self);
}


static void
__lambda57_ (MyGrid* self,
             GtkListBoxRow* r)
{
	gint64 id = 0LL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gint64 _tmp2_;
	gint64 _tmp3_;
	UserMsg* u = NULL;
	GeeHashMap* _tmp4_;
	gint64 _tmp5_;
	gchar* _tmp6_;
	gchar* _tmp7_;
	gpointer _tmp8_;
	UserMsg* _tmp9_;
	GtkListBox* _tmp10_;
	GeeHashMap* _tmp13_;
	gint64 _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	gpointer _tmp17_;
	GtkScrolledWindow* _tmp18_;
	GtkListBox* _tmp19_;
	GtkGrid* grid = NULL;
	GeeHashMap* _tmp20_;
	gint64 _tmp21_;
	gchar* _tmp22_;
	gchar* _tmp23_;
	gpointer _tmp24_;
	GtkGrid* _tmp25_;
	GtkGrid* _tmp26_;
	GtkStyleContext* sc3 = NULL;
	GtkGrid* _tmp27_;
	GtkStyleContext* _tmp28_;
	GtkStyleContext* _tmp29_;
	GtkStyleContext* _tmp30_;
	GtkCssProvider* _tmp31_;
	GtkStyleContext* _tmp32_;
	_tmp0_ = gtk_widget_get_name ((GtkWidget*) r);
	_tmp1_ = _tmp0_;
	id = g_ascii_strtoll (_tmp1_, NULL, 0);
	_tmp2_ = id;
	if (_tmp2_ == ((gint64) 0)) {
		return;
	}
	_tmp3_ = id;
	self->priv->to = _tmp3_;
	_tmp4_ = self->frds1;
	_tmp5_ = id;
	_tmp6_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp5_);
	_tmp7_ = _tmp6_;
	_tmp8_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp4_, _tmp7_);
	_tmp9_ = (UserMsg*) _tmp8_;
	_g_free0 (_tmp7_);
	u = _tmp9_;
	_tmp10_ = self->priv->msgs;
	if (_tmp10_ != NULL) {
		GtkScrolledWindow* _tmp11_;
		GtkListBox* _tmp12_;
		_tmp11_ = self->priv->msg_win;
		_tmp12_ = self->priv->msgs;
		gtk_container_remove ((GtkContainer*) _tmp11_, (GtkWidget*) _tmp12_);
	}
	_tmp13_ = self->priv->boxes;
	_tmp14_ = id;
	_tmp15_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp14_);
	_tmp16_ = _tmp15_;
	_tmp17_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp13_, _tmp16_);
	_g_object_unref0 (self->priv->msgs);
	self->priv->msgs = (GtkListBox*) _tmp17_;
	_g_free0 (_tmp16_);
	_tmp18_ = self->priv->msg_win;
	_tmp19_ = self->priv->msgs;
	gtk_container_add ((GtkContainer*) _tmp18_, (GtkWidget*) _tmp19_);
	_tmp20_ = self->priv->frd_boxes;
	_tmp21_ = id;
	_tmp22_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp21_);
	_tmp23_ = _tmp22_;
	_tmp24_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp20_, _tmp23_);
	_tmp25_ = _g_object_ref0 ((GtkGrid*) _tmp24_);
	_tmp26_ = _tmp25_;
	_g_free0 (_tmp23_);
	grid = _tmp26_;
	_tmp27_ = grid;
	_tmp28_ = gtk_widget_get_style_context ((GtkWidget*) _tmp27_);
	_tmp29_ = _g_object_ref0 (_tmp28_);
	sc3 = _tmp29_;
	_tmp30_ = sc3;
	_tmp31_ = self->mark1;
	gtk_style_context_remove_provider (_tmp30_, (GtkStyleProvider*) _tmp31_);
	_tmp32_ = sc3;
	if (gtk_style_context_has_class (_tmp32_, "mark")) {
		GtkStyleContext* _tmp33_;
		gint _tmp34_;
		gint _tmp35_;
		AppWin* _tmp37_;
		gint _tmp38_;
		gchar* _tmp39_;
		gchar* _tmp40_;
		gchar* _tmp41_;
		gchar* _tmp42_;
		gchar* _tmp43_;
		gchar* _tmp44_;
		gchar* _tmp45_;
		gchar* _tmp46_;
		const gchar* _tmp47_;
		const gchar* _tmp48_;
		const gchar* _tmp49_;
		const gchar* _tmp50_;
		gchar* _tmp51_;
		gchar* _tmp52_;
		gchar* _tmp53_;
		gchar* _tmp54_;
		AppWin* _tmp55_;
		_tmp33_ = sc3;
		gtk_style_context_remove_class (_tmp33_, "mark");
		_tmp34_ = self->mark_num;
		self->mark_num = _tmp34_ - 1;
		_tmp35_ = self->mark_num;
		if (_tmp35_ == 0) {
			AppWin* _tmp36_;
			_tmp36_ = app;
			app_win_clear_notify (_tmp36_);
		}
		_tmp37_ = app;
		_tmp38_ = self->mark_num;
		_tmp39_ = g_strdup_printf ("%i", _tmp38_);
		_tmp40_ = _tmp39_;
		_tmp41_ = g_strconcat ("(", _tmp40_, ")", NULL);
		_tmp42_ = _tmp41_;
		_tmp43_ = g_strconcat (_ ("Everyone Publish!"), _tmp42_, NULL);
		_tmp44_ = _tmp43_;
		_tmp45_ = g_strconcat (_tmp44_, " - ", NULL);
		_tmp46_ = _tmp45_;
		_tmp47_ = self->uname;
		_tmp48_ = string_to_string (_tmp47_);
		_tmp49_ = self->host;
		_tmp50_ = string_to_string (_tmp49_);
		_tmp51_ = g_strconcat (_tmp48_, "@", _tmp50_, NULL);
		_tmp52_ = _tmp51_;
		_tmp53_ = g_strconcat (_tmp46_, _tmp52_, NULL);
		_tmp54_ = _tmp53_;
		gtk_window_set_title ((GtkWindow*) _tmp37_, _tmp54_);
		_g_free0 (_tmp54_);
		_g_free0 (_tmp52_);
		_g_free0 (_tmp46_);
		_g_free0 (_tmp44_);
		_g_free0 (_tmp42_);
		_g_free0 (_tmp40_);
		_tmp55_ = app;
		gtk_widget_show_all ((GtkWidget*) _tmp55_);
	} else {
		GtkScrolledWindow* _tmp56_;
		_tmp56_ = self->priv->msg_win;
		gtk_widget_show_all ((GtkWidget*) _tmp56_);
	}
	my_grid_scroll_msgbox (self);
	_g_object_unref0 (sc3);
	_g_object_unref0 (grid);
	_user_msg_free0 (u);
}


static void
___lambda57__gtk_list_box_row_selected (GtkListBox* _sender,
                                        GtkListBoxRow* row,
                                        gpointer self)
{
	__lambda57_ ((MyGrid*) self, row);
}


MyGrid*
my_grid_construct (GType object_type)
{
	MyGrid * self = NULL;
	Block1Data* _data1_;
	GeeHashMap* _tmp0_;
	GeeHashMap* _tmp1_;
	GtkGrid* _tmp2_;
	GtkGrid* _tmp3_;
	GtkScrolledWindow* scrollWin1 = NULL;
	GtkScrolledWindow* _tmp4_;
	GtkGrid* _tmp5_;
	GtkListBox* _tmp6_;
	GtkListBox* _tmp7_;
	GtkLabel* t1 = NULL;
	GtkLabel* _tmp8_;
	GtkListBox* _tmp9_;
	GtkListBoxRow* r0 = NULL;
	GtkContainer* _tmp10_;
	GtkContainer* _tmp11_;
	GtkListBoxRow* _tmp12_;
	GtkListBox* _tmp13_;
	GtkListBox* _tmp14_;
	GtkGrid* bottom_grid = NULL;
	GtkGrid* _tmp15_;
	GtkGrid* _tmp16_;
	GtkButton* search_btn = NULL;
	GtkButton* _tmp17_;
	GtkButton* _tmp18_;
	GtkButton* _tmp19_;
	GtkButton* _tmp20_;
	GtkButton* _tmp21_;
	GtkButton* _tmp22_;
	GtkButton* _tmp23_;
	GtkButton* _tmp24_;
	GtkGrid* _tmp25_;
	GtkButton* _tmp26_;
	GtkButton* _tmp27_;
	GtkLabel* b4 = NULL;
	gchar* _tmp28_;
	gchar* _tmp29_;
	GtkLabel* _tmp30_;
	GtkLabel* _tmp31_;
	GtkGrid* _tmp32_;
	GtkEntry* _tmp33_;
	GtkEntry* _tmp34_;
	guint16 _tmp35_;
	gchar* _tmp36_;
	gchar* _tmp37_;
	GtkEntry* _tmp38_;
	GtkEntry* _tmp39_;
	GtkEntry* _tmp40_;
	GtkEntry* _tmp41_;
	GtkEntry* _tmp42_;
	GtkEntry* _tmp43_;
	GtkGrid* _tmp44_;
	GtkEntry* _tmp45_;
	GtkButton* _tmp46_;
	GtkGrid* _tmp47_;
	GtkScrolledWindow* _tmp48_;
	GtkScrolledWindow* _tmp49_;
	GtkScrolledWindow* _tmp50_;
	GtkGrid* _tmp51_;
	GtkScrolledWindow* _tmp52_;
	GtkEventBox* dropbox = NULL;
	GtkEventBox* _tmp53_;
	GtkGrid* _tmp54_;
	GtkLabel* _tmp55_;
	GtkLabel* _tmp56_;
	GtkLabel* _tmp57_;
	GtkLabel* _tmp58_;
	GtkLabel* _tmp59_;
	GtkGrid* grid1 = NULL;
	GtkGrid* _tmp60_;
	GtkGrid* _tmp61_;
	GtkEntry* _tmp62_;
	GtkEntry* _tmp63_;
	GtkEntry* _tmp64_;
	GtkButton* send_btn = NULL;
	GtkButton* _tmp65_;
	GtkGrid* _tmp66_;
	GtkButton* _tmp67_;
	GtkButton* _tmp68_;
	GtkButton* _tmp69_;
	GtkEntry* _tmp70_;
	GtkListBox* _tmp71_;
	_data1_ = g_slice_new0 (Block1Data);
	_data1_->_ref_count_ = 1;
	self = (MyGrid*) g_object_new (object_type, NULL);
	_data1_->self = g_object_ref (self);
	_tmp0_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, TYPE_USER_MSG, (GBoxedCopyFunc) user_msg_dup, (GDestroyNotify) user_msg_free, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
	_g_object_unref0 (self->frds1);
	self->frds1 = _tmp0_;
	_tmp1_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, gtk_grid_get_type (), NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->frd_boxes);
	self->priv->frd_boxes = _tmp1_;
	_tmp2_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp2_);
	_g_object_unref0 (self->mygrid);
	self->mygrid = _tmp2_;
	_tmp3_ = self->mygrid;
	gtk_grid_set_column_spacing (_tmp3_, (guint) 5);
	_tmp4_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_ref_sink (_tmp4_);
	scrollWin1 = _tmp4_;
	g_object_set ((GtkWidget*) scrollWin1, "width-request", 240, NULL);
	g_object_set ((GtkWidget*) scrollWin1, "expand", TRUE, NULL);
	_tmp5_ = self->mygrid;
	gtk_grid_attach (_tmp5_, (GtkWidget*) scrollWin1, 0, 0, 2, 3);
	_tmp6_ = (GtkListBox*) gtk_list_box_new ();
	g_object_ref_sink (_tmp6_);
	_g_object_unref0 (self->priv->friends);
	self->priv->friends = _tmp6_;
	_tmp7_ = self->priv->friends;
	gtk_container_add ((GtkContainer*) scrollWin1, (GtkWidget*) _tmp7_);
	_tmp8_ = (GtkLabel*) gtk_label_new (_ ("My Friends"));
	g_object_ref_sink (_tmp8_);
	t1 = _tmp8_;
	_tmp9_ = self->priv->friends;
	gtk_container_add ((GtkContainer*) _tmp9_, (GtkWidget*) t1);
	_tmp10_ = gtk_widget_get_parent ((GtkWidget*) t1);
	_tmp11_ = _tmp10_;
	_tmp12_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp11_, gtk_list_box_row_get_type ()) ? ((GtkListBoxRow*) _tmp11_) : NULL);
	r0 = _tmp12_;
	gtk_list_box_row_set_selectable (r0, FALSE);
	gtk_widget_set_name ((GtkWidget*) r0, "0");
	_tmp13_ = self->priv->friends;
	gtk_container_set_border_width ((GtkContainer*) _tmp13_, (guint) 3);
	_tmp14_ = self->priv->friends;
	gtk_list_box_set_sort_func (_tmp14_, ___lambda7__gtk_list_box_sort_func, g_object_ref (self), g_object_unref);
	_tmp15_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp15_);
	bottom_grid = _tmp15_;
	gtk_widget_set_size_request ((GtkWidget*) bottom_grid, 240, 20);
	_tmp16_ = self->mygrid;
	gtk_grid_attach (_tmp16_, (GtkWidget*) bottom_grid, 0, 3, 2, 1);
	_tmp17_ = (GtkButton*) gtk_button_new_with_label (_ ("Find Persons"));
	g_object_ref_sink (_tmp17_);
	search_btn = _tmp17_;
	gtk_grid_attach (bottom_grid, (GtkWidget*) search_btn, 0, 0, 1, 1);
	gtk_widget_set_size_request ((GtkWidget*) search_btn, 80, 16);
	_tmp18_ = (GtkButton*) gtk_button_new_with_label (_ ("Strangers"));
	g_object_ref_sink (_tmp18_);
	_g_object_unref0 (self->strangers_btn);
	self->strangers_btn = _tmp18_;
	_tmp19_ = self->strangers_btn;
	gtk_grid_attach (bottom_grid, (GtkWidget*) _tmp19_, 1, 0, 1, 1);
	_tmp20_ = self->strangers_btn;
	gtk_widget_set_size_request ((GtkWidget*) _tmp20_, 80, 16);
	_tmp21_ = (GtkButton*) gtk_button_new_with_label (_ ("MultiSend"));
	g_object_ref_sink (_tmp21_);
	_g_object_unref0 (self->msend_btn);
	self->msend_btn = _tmp21_;
	_tmp22_ = self->msend_btn;
	gtk_grid_attach (bottom_grid, (GtkWidget*) _tmp22_, 2, 0, 1, 1);
	_tmp23_ = self->msend_btn;
	gtk_widget_set_size_request ((GtkWidget*) _tmp23_, 80, 16);
	_tmp24_ = (GtkButton*) gtk_button_new_with_label (_ ("Current User"));
	g_object_ref_sink (_tmp24_);
	_g_object_unref0 (self->user_btn);
	self->user_btn = _tmp24_;
	_tmp25_ = self->mygrid;
	_tmp26_ = self->user_btn;
	gtk_grid_attach (_tmp25_, (GtkWidget*) _tmp26_, 2, 0, 2, 1);
	_tmp27_ = self->user_btn;
	gtk_widget_set_hexpand ((GtkWidget*) _tmp27_, TRUE);
	_tmp28_ = g_strconcat (_ ("Proxy Port"), ":", NULL);
	_tmp29_ = _tmp28_;
	_tmp30_ = (GtkLabel*) gtk_label_new (_tmp29_);
	g_object_ref_sink (_tmp30_);
	_tmp31_ = _tmp30_;
	_g_free0 (_tmp29_);
	b4 = _tmp31_;
	gtk_label_set_xalign (b4, (gfloat) 1.0);
	_tmp32_ = self->mygrid;
	gtk_grid_attach (_tmp32_, (GtkWidget*) b4, 4, 0, 1, 1);
	_tmp33_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp33_);
	_g_object_unref0 (self->port1);
	self->port1 = _tmp33_;
	_tmp34_ = self->port1;
	_tmp35_ = proxy_port;
	_tmp36_ = g_strdup_printf ("%hu", _tmp35_);
	_tmp37_ = _tmp36_;
	gtk_entry_set_text (_tmp34_, _tmp37_);
	_g_free0 (_tmp37_);
	_tmp38_ = self->port1;
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp38_, _ ("Click `Modify` button to edit.\nSet 0 to restore default value."));
	_tmp39_ = self->port1;
	gtk_entry_set_max_length (_tmp39_, 5);
	_tmp40_ = self->port1;
	gtk_entry_set_width_chars (_tmp40_, 5);
	_tmp41_ = self->port1;
	gtk_widget_set_size_request ((GtkWidget*) _tmp41_, 40, 16);
	_tmp42_ = self->port1;
	g_object_set (_tmp42_, "xalign", (gfloat) 0.5, NULL);
	_tmp43_ = self->port1;
	g_object_set (_tmp43_, "editable", FALSE, NULL);
	_tmp44_ = self->mygrid;
	_tmp45_ = self->port1;
	gtk_grid_attach (_tmp44_, (GtkWidget*) _tmp45_, 5, 0, 1, 1);
	_tmp46_ = (GtkButton*) gtk_button_new_with_label (_ ("Modify"));
	g_object_ref_sink (_tmp46_);
	_data1_->port_btn = _tmp46_;
	_tmp47_ = self->mygrid;
	gtk_grid_attach (_tmp47_, (GtkWidget*) _data1_->port_btn, 6, 0, 1, 1);
	_tmp48_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_ref_sink (_tmp48_);
	_g_object_unref0 (self->priv->msg_win);
	self->priv->msg_win = _tmp48_;
	_tmp49_ = self->priv->msg_win;
	g_object_set ((GtkWidget*) _tmp49_, "height-request", 450, NULL);
	_tmp50_ = self->priv->msg_win;
	g_object_set ((GtkWidget*) _tmp50_, "expand", TRUE, NULL);
	_tmp51_ = self->mygrid;
	_tmp52_ = self->priv->msg_win;
	gtk_grid_attach (_tmp51_, (GtkWidget*) _tmp52_, 2, 1, 5, 1);
	_tmp53_ = (GtkEventBox*) gtk_event_box_new ();
	g_object_ref_sink (_tmp53_);
	dropbox = _tmp53_;
	gtk_widget_set_size_request ((GtkWidget*) dropbox, 240, 40);
	_tmp54_ = self->mygrid;
	gtk_grid_attach (_tmp54_, (GtkWidget*) dropbox, 2, 2, 5, 1);
	_tmp55_ = (GtkLabel*) gtk_label_new (_ ("Send File/Image Here: Drag a file Or Press Ctrl-V to paste a file"));
	g_object_ref_sink (_tmp55_);
	_g_object_unref0 (self->priv->droplabel);
	self->priv->droplabel = _tmp55_;
	_tmp56_ = self->priv->droplabel;
	g_object_set (_tmp56_, "wrap", TRUE, NULL);
	_tmp57_ = self->priv->droplabel;
	g_object_set (_tmp57_, "wrap-mode", PANGO_WRAP_CHAR, NULL);
	_tmp58_ = self->priv->droplabel;
	gtk_label_set_selectable (_tmp58_, TRUE);
	_tmp59_ = self->priv->droplabel;
	gtk_container_add ((GtkContainer*) dropbox, (GtkWidget*) _tmp59_);
	gtk_drag_dest_set ((GtkWidget*) dropbox, GTK_DEST_DEFAULT_ALL, NULL, 0, GDK_ACTION_COPY);
	gtk_drag_dest_add_uri_targets ((GtkWidget*) dropbox);
	g_signal_connect_object ((GtkWidget*) dropbox, "drag-data-received", (GCallback) ___lambda8__gtk_widget_drag_data_received, self, 0);
	g_signal_connect_object ((GtkWidget*) dropbox, "key-press-event", (GCallback) ___lambda32__gtk_widget_key_press_event, self, 0);
	_tmp60_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp60_);
	grid1 = _tmp60_;
	_tmp61_ = self->mygrid;
	gtk_grid_attach (_tmp61_, (GtkWidget*) grid1, 2, 3, 5, 1);
	_tmp62_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp62_);
	_g_object_unref0 (self->priv->entry1);
	self->priv->entry1 = _tmp62_;
	_tmp63_ = self->priv->entry1;
	gtk_grid_attach (grid1, (GtkWidget*) _tmp63_, 0, 0, 1, 1);
	_tmp64_ = self->priv->entry1;
	gtk_widget_set_hexpand ((GtkWidget*) _tmp64_, TRUE);
	_tmp65_ = (GtkButton*) gtk_button_new_with_label (_ ("Send"));
	g_object_ref_sink (_tmp65_);
	send_btn = _tmp65_;
	gtk_grid_attach (grid1, (GtkWidget*) send_btn, 1, 0, 1, 1);
	_tmp66_ = self->mygrid;
	g_signal_connect_object ((GtkWidget*) _tmp66_, "show", (GCallback) ___lambda34__gtk_widget_show, self, 0);
	g_signal_connect_object (search_btn, "clicked", (GCallback) ___lambda35__gtk_button_clicked, self, 0);
	g_signal_connect_data (_data1_->port_btn, "clicked", (GCallback) ___lambda36__gtk_button_clicked, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
	_tmp67_ = self->strangers_btn;
	g_signal_connect_object (_tmp67_, "clicked", (GCallback) ___lambda37__gtk_button_clicked, self, 0);
	_tmp68_ = self->msend_btn;
	g_signal_connect_object (_tmp68_, "clicked", (GCallback) ___lambda38__gtk_button_clicked, self, 0);
	_tmp69_ = self->user_btn;
	g_signal_connect_object (_tmp69_, "clicked", (GCallback) ___lambda52__gtk_button_clicked, self, 0);
	_tmp70_ = self->priv->entry1;
	g_signal_connect_object (_tmp70_, "activate", (GCallback) ___lambda54__gtk_entry_activate, self, 0);
	g_signal_connect_object (send_btn, "clicked", (GCallback) ___lambda56__gtk_button_clicked, self, 0);
	_tmp71_ = self->priv->friends;
	g_signal_connect_object (_tmp71_, "row-selected", (GCallback) ___lambda57__gtk_list_box_row_selected, self, 0);
	my_grid_set_css_once (self);
	_g_object_unref0 (send_btn);
	_g_object_unref0 (grid1);
	_g_object_unref0 (dropbox);
	_g_object_unref0 (b4);
	_g_object_unref0 (search_btn);
	_g_object_unref0 (bottom_grid);
	_g_object_unref0 (r0);
	_g_object_unref0 (t1);
	_g_object_unref0 (scrollWin1);
	block1_data_unref (_data1_);
	_data1_ = NULL;
	return self;
}


MyGrid*
my_grid_new (void)
{
	return my_grid_construct (TYPE_MY_GRID);
}


void
my_grid_send_uri1 (MyGrid* self,
                   gchar** uris,
                   int uris_length1)
{
	gchar* fname = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	ChatClient* _tmp9_;
	gint64 _tmp10_;
	const gchar* _tmp11_;
	gchar* text1 = NULL;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	const gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	const gchar* _tmp17_;
	gchar* _tmp18_;
	gchar* _tmp19_;
	const gchar* _tmp20_;
	gint16 _tmp21_;
	const gchar* _tmp22_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	if (uris_length1 != 1) {
		my_grid_add_text (self, _ ("too many files"), FALSE, FALSE);
		return;
	}
	_tmp0_ = uris[0];
	_tmp1_ = g_filename_from_uri (_tmp0_, NULL, &_inner_error0_);
	fname = _tmp1_;
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp2_ = fname;
	if (g_file_test (_tmp2_, G_FILE_TEST_IS_REGULAR) == FALSE) {
		const gchar* _tmp3_;
		const gchar* _tmp4_;
		gchar* _tmp5_;
		gchar* _tmp6_;
		gchar* _tmp7_;
		gchar* _tmp8_;
		_tmp3_ = fname;
		_tmp4_ = string_to_string (_tmp3_);
		_tmp5_ = g_strconcat (" : ", _tmp4_, NULL);
		_tmp6_ = _tmp5_;
		_tmp7_ = g_strconcat (_ ("this is not a file"), _tmp6_, NULL);
		_tmp8_ = _tmp7_;
		my_grid_add_text (self, _tmp8_, FALSE, FALSE);
		_g_free0 (_tmp8_);
		_g_free0 (_tmp6_);
		_g_free0 (fname);
		return;
	}
	_tmp9_ = client;
	_tmp10_ = self->priv->to;
	_tmp11_ = fname;
	chat_client_send_file (_tmp9_, _tmp10_, _tmp11_);
	_tmp12_ = uris[0];
	_tmp13_ = string_to_string (_tmp12_);
	_tmp14_ = fname;
	_tmp15_ = g_path_get_basename (_tmp14_);
	_tmp16_ = _tmp15_;
	_tmp17_ = string_to_string (_tmp16_);
	_tmp18_ = g_strconcat ("<a href='", _tmp13_, "'>", _tmp17_, "</a>", NULL);
	_tmp19_ = _tmp18_;
	_g_free0 (_tmp16_);
	text1 = _tmp19_;
	_tmp20_ = self->uname;
	_tmp21_ = self->usex;
	my_grid_add_left_name_icon (self, _tmp20_, _tmp21_);
	_tmp22_ = text1;
	my_grid_add_text (self, _tmp22_, TRUE, TRUE);
	_g_free0 (text1);
	_g_free0 (fname);
}


void
my_grid_send_msg (MyGrid* self)
{
	gint64 _tmp0_;
	ChatClient* _tmp1_;
	gint64 _tmp2_;
	GtkEntry* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	gint16 _tmp7_;
	GtkEntry* _tmp8_;
	const gchar* _tmp9_;
	const gchar* _tmp10_;
	GtkEntry* _tmp11_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->to;
	if (_tmp0_ == ((gint64) 0)) {
		return;
	}
	_tmp1_ = client;
	_tmp2_ = self->priv->to;
	_tmp3_ = self->priv->entry1;
	_tmp4_ = gtk_entry_get_text (_tmp3_);
	_tmp5_ = _tmp4_;
	chat_client_ChatTo (_tmp1_, _tmp2_, _tmp5_);
	_tmp6_ = self->uname;
	_tmp7_ = self->usex;
	my_grid_add_left_name_icon (self, _tmp6_, _tmp7_);
	_tmp8_ = self->priv->entry1;
	_tmp9_ = gtk_entry_get_text (_tmp8_);
	_tmp10_ = _tmp9_;
	my_grid_add_text (self, _tmp10_, FALSE, FALSE);
	_tmp11_ = self->priv->entry1;
	gtk_entry_set_text (_tmp11_, "");
	my_grid_scroll_msgbox (self);
}


static gboolean
__lambda55_ (MyGrid* self)
{
	gboolean result = FALSE;
	GtkAdjustment* adj1 = NULL;
	GtkListBox* _tmp0_;
	GtkAdjustment* _tmp1_;
	GtkAdjustment* _tmp2_;
	gdouble _tmp3_;
	gdouble _tmp4_;
	_tmp0_ = self->priv->msgs;
	_tmp1_ = gtk_list_box_get_adjustment (_tmp0_);
	_tmp2_ = _g_object_ref0 (_tmp1_);
	adj1 = _tmp2_;
	_tmp3_ = gtk_adjustment_get_upper (adj1);
	_tmp4_ = _tmp3_;
	gtk_adjustment_set_value (adj1, _tmp4_);
	result = FALSE;
	_g_object_unref0 (adj1);
	return result;
}


static gboolean
___lambda55__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda55_ ((MyGrid*) self);
	return result;
}


void
my_grid_scroll_msgbox (MyGrid* self)
{
	g_return_if_fail (self != NULL);
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda55__gsource_func, g_object_ref (self), g_object_unref);
}


static void
my_grid_set_css_to (MyGrid* self,
                    GtkWidget* w,
                    GtkCssProvider* p)
{
	GtkStyleContext* sc = NULL;
	GtkStyleContext* _tmp0_;
	GtkStyleContext* _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (w != NULL);
	g_return_if_fail (p != NULL);
	_tmp0_ = gtk_widget_get_style_context (w);
	_tmp1_ = _g_object_ref0 (_tmp0_);
	sc = _tmp1_;
	gtk_style_context_add_provider (sc, (GtkStyleProvider*) p, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	_g_object_unref0 (sc);
}


static void
my_grid_set_css_once (MyGrid* self)
{
	GtkCssProvider* _tmp0_;
	GtkStyleContext* sc = NULL;
	GtkGrid* _tmp1_;
	GtkStyleContext* _tmp2_;
	GtkStyleContext* _tmp3_;
	GtkStyleContext* _tmp4_;
	GtkCssProvider* _tmp5_;
	GtkLabel* _tmp6_;
	GtkStyleContext* _tmp7_;
	GtkStyleContext* _tmp8_;
	GtkStyleContext* _tmp9_;
	GtkCssProvider* _tmp10_;
	GtkListBox* _tmp11_;
	GtkStyleContext* _tmp12_;
	GtkStyleContext* _tmp13_;
	GtkStyleContext* _tmp14_;
	GtkCssProvider* _tmp15_;
	GtkCssProvider* _tmp16_;
	GtkCssProvider* _tmp17_;
	GtkCssProvider* _tmp18_;
	GtkCssProvider* _tmp19_;
	GtkCssProvider* _tmp20_;
	GtkCssProvider* _tmp21_;
	GtkCssProvider* _tmp22_;
	GtkCssProvider* _tmp23_;
	GtkCssProvider* _tmp27_;
	GtkCssProvider* _tmp28_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = gtk_css_provider_new ();
	_g_object_unref0 (self->priv->cssp);
	self->priv->cssp = _tmp0_;
	_tmp1_ = self->mygrid;
	_tmp2_ = gtk_widget_get_style_context ((GtkWidget*) _tmp1_);
	_tmp3_ = _g_object_ref0 (_tmp2_);
	sc = _tmp3_;
	_tmp4_ = sc;
	_tmp5_ = self->priv->cssp;
	gtk_style_context_add_provider (_tmp4_, (GtkStyleProvider*) _tmp5_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	_tmp6_ = self->priv->droplabel;
	_tmp7_ = gtk_widget_get_style_context ((GtkWidget*) _tmp6_);
	_tmp8_ = _g_object_ref0 (_tmp7_);
	_g_object_unref0 (sc);
	sc = _tmp8_;
	_tmp9_ = sc;
	_tmp10_ = self->priv->cssp;
	gtk_style_context_add_provider (_tmp9_, (GtkStyleProvider*) _tmp10_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	_tmp11_ = self->priv->friends;
	_tmp12_ = gtk_widget_get_style_context ((GtkWidget*) _tmp11_);
	_tmp13_ = _g_object_ref0 (_tmp12_);
	_g_object_unref0 (sc);
	sc = _tmp13_;
	_tmp14_ = sc;
	_tmp15_ = self->priv->cssp;
	gtk_style_context_add_provider (_tmp14_, (GtkStyleProvider*) _tmp15_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	_tmp16_ = self->priv->cssp;
	gtk_css_provider_load_from_data (_tmp16_, "grid{\n" \
"\tpadding:5px 5px 5px 5px;\n" \
"}\n" \
"list{\n" \
"\tbackground-color:#FFFFFF;\n" \
"\tcolor:#000000;\n" \
"\tborder-width:1px;\n" \
"\tborder-style:solid;\n" \
"\tborder-color:black;\n" \
"\tpadding-left:10px;\n" \
"\tpadding-right:10px;\n" \
"}\n" \
"label{\n" \
"\tborder-width:1px;\n" \
"\tborder-style:solid;\n" \
"\tborder-color:black;\n" \
"}\n", (gssize) -1, &_inner_error0_);
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_object_unref0 (sc);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp17_ = gtk_css_provider_new ();
	_g_object_unref0 (self->provider1);
	self->provider1 = _tmp17_;
	_tmp18_ = self->provider1;
	gtk_css_provider_load_from_data (_tmp18_, "grid{color:#FF0000;}\n", (gssize) -1, &_inner_error0_);
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_object_unref0 (sc);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp19_ = gtk_css_provider_new ();
	_g_object_unref0 (self->mark1);
	self->mark1 = _tmp19_;
	_tmp20_ = self->mark1;
	gtk_css_provider_load_from_data (_tmp20_, "grid{background:#F59433;}\n", (gssize) -1, &_inner_error0_);
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_object_unref0 (sc);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp21_ = gtk_css_provider_new ();
	_g_object_unref0 (self->button1);
	self->button1 = _tmp21_;
	_tmp22_ = self->button1;
	gtk_css_provider_load_from_data (_tmp22_, "button{color:#FF0000;}\n", (gssize) -1, &_inner_error0_);
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_object_unref0 (sc);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp23_ = gtk_css_provider_new ();
	_g_object_unref0 (self->link_css1);
	self->link_css1 = _tmp23_;
	{
		GtkCssProvider* _tmp24_;
		_tmp24_ = self->link_css1;
		gtk_css_provider_load_from_data (_tmp24_, "label{background:#D5FC82;border-width:1px; border-style:solid; border-" \
"color:green;}\n" \
"label>link{color:#0000FF;}\n" \
"label>selection{background: #A8141B; color: white;}\n", (gssize) -1, &_inner_error0_);
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			goto __catch0_g_error;
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		GError* _tmp25_;
		const gchar* _tmp26_;
		e = _inner_error0_;
		_inner_error0_ = NULL;
		_tmp25_ = e;
		_tmp26_ = _tmp25_->message;
		g_print ("CSS Error: %s\n", _tmp26_);
		_g_error_free0 (e);
	}
	__finally0:
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_object_unref0 (sc);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp27_ = gtk_css_provider_new ();
	_g_object_unref0 (self->name_css);
	self->name_css = _tmp27_;
	_tmp28_ = self->name_css;
	gtk_css_provider_load_from_data (_tmp28_, "grid{margin-top:5px;margin-bottom:5px;background-image: linear-gradien" \
"t(to top right, #FCAF3E, #FCE94F);border-width:1px; border-style:solid" \
"; border-color:#F57900;}\n", (gssize) -1, &_inner_error0_);
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_object_unref0 (sc);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_g_object_unref0 (sc);
}


void
my_grid_show_sended_msg_to (MyGrid* self,
                            gint64 to,
                            const gchar* msg)
{
	const gchar* _tmp0_;
	gint16 _tmp1_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (msg != NULL);
	_tmp0_ = self->uname;
	_tmp1_ = self->usex;
	my_grid_add_left_name_icon_to (self, to, _tmp0_, _tmp1_);
	my_grid_add_text_to (self, to, msg, FALSE, FALSE);
}


static Block3Data*
block3_data_ref (Block3Data* _data3_)
{
	g_atomic_int_inc (&_data3_->_ref_count_);
	return _data3_;
}


static void
block3_data_unref (void * _userdata_)
{
	Block3Data* _data3_;
	_data3_ = (Block3Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data3_->_ref_count_)) {
		MyGrid* self;
		self = _data3_->self;
		_g_object_unref0 (_data3_->pwd3);
		_g_object_unref0 (_data3_->pwd2);
		_g_object_unref0 (_data3_->pwd1);
		_g_object_unref0 (_data3_->dlg_pwd);
		_g_object_unref0 (self);
		g_slice_free (Block3Data, _data3_);
	}
}


static void
__lambda58_ (Block3Data* _data3_,
             gint rid)
{
	MyGrid* self;
	self = _data3_->self;
	if (rid == 3) {
		gtk_widget_destroy ((GtkWidget*) _data3_->dlg_pwd);
	} else {
		if (rid == 2) {
			const gchar* _tmp0_;
			const gchar* _tmp1_;
			const gchar* _tmp2_;
			const gchar* _tmp3_;
			ChatClient* _tmp4_;
			const gchar* _tmp5_;
			const gchar* _tmp6_;
			const gchar* _tmp7_;
			const gchar* _tmp8_;
			const gchar* _tmp9_;
			_tmp0_ = gtk_entry_get_text (_data3_->pwd2);
			_tmp1_ = _tmp0_;
			_tmp2_ = gtk_entry_get_text (_data3_->pwd3);
			_tmp3_ = _tmp2_;
			if (g_strcmp0 (_tmp1_, _tmp3_) != 0) {
				gtk_window_set_title ((GtkWindow*) _data3_->dlg_pwd, _ ("Confirm Fail!"));
				return;
			}
			_tmp4_ = client;
			_tmp5_ = self->uname;
			_tmp6_ = gtk_entry_get_text (_data3_->pwd1);
			_tmp7_ = _tmp6_;
			_tmp8_ = gtk_entry_get_text (_data3_->pwd2);
			_tmp9_ = _tmp8_;
			chat_client_update_pwd (_tmp4_, _tmp5_, _tmp7_, _tmp9_);
			gtk_widget_destroy ((GtkWidget*) _data3_->dlg_pwd);
		}
	}
}


static void
___lambda58__gtk_dialog_response (GtkDialog* _sender,
                                  gint response_id,
                                  gpointer self)
{
	__lambda58_ (self, response_id);
}


void
my_grid_update_pwd (MyGrid* self)
{
	Block3Data* _data3_;
	AppWin* _tmp0_;
	GtkDialog* _tmp1_;
	GtkGrid* grid = NULL;
	GtkGrid* _tmp2_;
	GtkLabel* _tmp3_;
	GtkLabel* _tmp4_;
	GtkLabel* _tmp5_;
	GtkLabel* _tmp6_;
	GtkEntry* _tmp7_;
	GtkLabel* _tmp8_;
	GtkLabel* _tmp9_;
	GtkEntry* _tmp10_;
	GtkLabel* _tmp11_;
	GtkLabel* _tmp12_;
	GtkEntry* _tmp13_;
	GtkBox* content = NULL;
	GtkBox* _tmp14_;
	GtkBox* _tmp15_;
	g_return_if_fail (self != NULL);
	_data3_ = g_slice_new0 (Block3Data);
	_data3_->_ref_count_ = 1;
	_data3_->self = g_object_ref (self);
	_tmp0_ = app;
	_tmp1_ = (GtkDialog*) gtk_dialog_new_with_buttons (_ ("Update Password"), (GtkWindow*) _tmp0_, GTK_DIALOG_MODAL, NULL);
	g_object_ref_sink (_tmp1_);
	_data3_->dlg_pwd = _tmp1_;
	_tmp2_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp2_);
	grid = _tmp2_;
	_tmp3_ = (GtkLabel*) gtk_label_new (_ ("Input your new password"));
	g_object_ref_sink (_tmp3_);
	_tmp4_ = _tmp3_;
	gtk_grid_attach (grid, (GtkWidget*) _tmp4_, 0, 0, 2, 1);
	_g_object_unref0 (_tmp4_);
	_tmp5_ = (GtkLabel*) gtk_label_new (_ ("Old Password:"));
	g_object_ref_sink (_tmp5_);
	_tmp6_ = _tmp5_;
	gtk_grid_attach (grid, (GtkWidget*) _tmp6_, 0, 1, 1, 1);
	_g_object_unref0 (_tmp6_);
	_tmp7_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp7_);
	_data3_->pwd1 = _tmp7_;
	gtk_entry_set_visibility (_data3_->pwd1, FALSE);
	gtk_grid_attach (grid, (GtkWidget*) _data3_->pwd1, 1, 1, 1, 1);
	_tmp8_ = (GtkLabel*) gtk_label_new (_ ("New Password:"));
	g_object_ref_sink (_tmp8_);
	_tmp9_ = _tmp8_;
	gtk_grid_attach (grid, (GtkWidget*) _tmp9_, 0, 2, 1, 1);
	_g_object_unref0 (_tmp9_);
	_tmp10_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp10_);
	_data3_->pwd2 = _tmp10_;
	gtk_entry_set_visibility (_data3_->pwd2, FALSE);
	gtk_grid_attach (grid, (GtkWidget*) _data3_->pwd2, 1, 2, 1, 1);
	_tmp11_ = (GtkLabel*) gtk_label_new (_ ("Confirm Password:"));
	g_object_ref_sink (_tmp11_);
	_tmp12_ = _tmp11_;
	gtk_grid_attach (grid, (GtkWidget*) _tmp12_, 0, 3, 1, 1);
	_g_object_unref0 (_tmp12_);
	_tmp13_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp13_);
	_data3_->pwd3 = _tmp13_;
	gtk_entry_set_visibility (_data3_->pwd3, FALSE);
	gtk_grid_attach (grid, (GtkWidget*) _data3_->pwd3, 1, 3, 1, 1);
	_tmp14_ = gtk_dialog_get_content_area (_data3_->dlg_pwd);
	_tmp15_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp14_, gtk_box_get_type ()) ? ((GtkBox*) _tmp14_) : NULL);
	content = _tmp15_;
	gtk_box_pack_start (content, (GtkWidget*) grid, TRUE, TRUE, (guint) 0);
	gtk_dialog_add_button (_data3_->dlg_pwd, _ ("Update"), 2);
	gtk_dialog_add_button (_data3_->dlg_pwd, _ ("Cancel"), 3);
	g_signal_connect_data (_data3_->dlg_pwd, "response", (GCallback) ___lambda58__gtk_dialog_response, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
	gtk_widget_show_all ((GtkWidget*) _data3_->dlg_pwd);
	_g_object_unref0 (content);
	_g_object_unref0 (grid);
	block3_data_unref (_data3_);
	_data3_ = NULL;
}


void
my_grid_add_listbox_id (MyGrid* self,
                        gint64 uid)
{
	GtkListBox* box = NULL;
	GtkListBox* _tmp0_;
	GeeHashMap* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	GtkListBox* _tmp4_;
	GtkListBox* _tmp5_;
	GtkListBox* _tmp6_;
	GtkListBox* _tmp7_;
	UserMsg* u1 = NULL;
	GeeHashMap* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	gpointer _tmp11_;
	UserMsg* _tmp12_;
	GtkLabel* t2 = NULL;
	UserMsg* _tmp13_;
	const gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	GtkLabel* _tmp17_;
	GtkLabel* _tmp18_;
	GtkListBox* _tmp19_;
	GtkLabel* _tmp20_;
	GtkLabel* _tmp21_;
	GtkContainer* _tmp22_;
	GtkContainer* _tmp23_;
	GtkListBox* _tmp24_;
	GtkListBox* _tmp27_;
	GtkListBox* _tmp28_;
	GtkScrolledWindow* _tmp29_;
	GtkListBox* _tmp30_;
	UserMsg* _tmp31_;
	const gchar* _tmp32_;
	gint _tmp33_;
	gint _tmp34_;
	GtkScrolledWindow* _tmp53_;
	GtkStyleContext* sc2 = NULL;
	GtkListBox* _tmp54_;
	GtkStyleContext* _tmp55_;
	GtkStyleContext* _tmp56_;
	GtkCssProvider* _tmp57_;
	g_return_if_fail (self != NULL);
	_tmp0_ = (GtkListBox*) gtk_list_box_new ();
	g_object_ref_sink (_tmp0_);
	box = _tmp0_;
	_tmp1_ = self->priv->boxes;
	_tmp2_ = g_strdup_printf ("%" G_GINT64_FORMAT, uid);
	_tmp3_ = _tmp2_;
	_tmp4_ = box;
	gee_abstract_map_set ((GeeAbstractMap*) _tmp1_, _tmp3_, _tmp4_);
	_g_free0 (_tmp3_);
	_tmp5_ = box;
	gtk_list_box_set_selection_mode (_tmp5_, GTK_SELECTION_NONE);
	_tmp6_ = box;
	g_object_set ((GtkWidget*) _tmp6_, "expand", TRUE, NULL);
	_tmp7_ = box;
	gtk_container_set_border_width ((GtkContainer*) _tmp7_, (guint) 3);
	_tmp8_ = self->frds1;
	_tmp9_ = g_strdup_printf ("%" G_GINT64_FORMAT, uid);
	_tmp10_ = _tmp9_;
	_tmp11_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp8_, _tmp10_);
	_tmp12_ = (UserMsg*) _tmp11_;
	_g_free0 (_tmp10_);
	u1 = _tmp12_;
	_tmp13_ = u1;
	_tmp14_ = (*_tmp13_).name;
	_tmp15_ = g_strconcat (_ ("Chat To: "), _tmp14_, NULL);
	_tmp16_ = _tmp15_;
	_tmp17_ = (GtkLabel*) gtk_label_new (_tmp16_);
	g_object_ref_sink (_tmp17_);
	_tmp18_ = _tmp17_;
	_g_free0 (_tmp16_);
	t2 = _tmp18_;
	_tmp19_ = box;
	_tmp20_ = t2;
	gtk_container_add ((GtkContainer*) _tmp19_, (GtkWidget*) _tmp20_);
	_tmp21_ = t2;
	_tmp22_ = gtk_widget_get_parent ((GtkWidget*) _tmp21_);
	_tmp23_ = _tmp22_;
	gtk_list_box_row_set_selectable (G_TYPE_CHECK_INSTANCE_TYPE (_tmp23_, gtk_list_box_row_get_type ()) ? ((GtkListBoxRow*) _tmp23_) : NULL, FALSE);
	_tmp24_ = self->priv->msgs;
	if (_tmp24_ != NULL) {
		GtkScrolledWindow* _tmp25_;
		GtkListBox* _tmp26_;
		_tmp25_ = self->priv->msg_win;
		_tmp26_ = self->priv->msgs;
		gtk_container_remove ((GtkContainer*) _tmp25_, (GtkWidget*) _tmp26_);
	}
	_tmp27_ = box;
	_tmp28_ = _g_object_ref0 (_tmp27_);
	_g_object_unref0 (self->priv->msgs);
	self->priv->msgs = _tmp28_;
	_tmp29_ = self->priv->msg_win;
	_tmp30_ = self->priv->msgs;
	gtk_container_add ((GtkContainer*) _tmp29_, (GtkWidget*) _tmp30_);
	self->priv->to = uid;
	_tmp31_ = u1;
	_tmp32_ = (*_tmp31_).timestamp_offline;
	_tmp33_ = strlen (_tmp32_);
	_tmp34_ = _tmp33_;
	if (_tmp34_ > 10) {
		UserMsg* _tmp35_;
		const gchar* _tmp36_;
		UserMsg* _tmp37_;
		gint _tmp38_;
		UserMsg* _tmp39_;
		const gchar* _tmp40_;
		const gchar* _tmp41_;
		UserMsg* _tmp42_;
		const gchar* _tmp43_;
		const gchar* _tmp44_;
		gchar* _tmp45_;
		gchar* _tmp46_;
		gchar* _tmp47_;
		gchar* _tmp48_;
		UserMsg* _tmp49_;
		gint64 _tmp50_;
		gchar* _tmp51_;
		gchar* _tmp52_;
		_tmp35_ = u1;
		_tmp36_ = (*_tmp35_).name;
		_tmp37_ = u1;
		_tmp38_ = (*_tmp37_).sex;
		my_grid_add_right_name_icon (self, _tmp36_, (gint16) _tmp38_);
		_tmp39_ = u1;
		_tmp40_ = (*_tmp39_).timestamp_offline;
		_tmp41_ = string_to_string (_tmp40_);
		_tmp42_ = u1;
		_tmp43_ = (*_tmp42_).msg_offline;
		_tmp44_ = string_to_string (_tmp43_);
		_tmp45_ = g_strconcat ("[", _tmp41_, "]\n", _tmp44_, NULL);
		_tmp46_ = _tmp45_;
		_tmp47_ = g_strconcat (_ ("Rewrite Offline Message:"), _tmp46_, NULL);
		_tmp48_ = _tmp47_;
		my_grid_add_text (self, _tmp48_, FALSE, FALSE);
		_g_free0 (_tmp48_);
		_g_free0 (_tmp46_);
		_tmp49_ = u1;
		_tmp50_ = (*_tmp49_).id;
		_tmp51_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp50_);
		_tmp52_ = _tmp51_;
		my_grid_msg_mark (self, _tmp52_);
		_g_free0 (_tmp52_);
	}
	_tmp53_ = self->priv->msg_win;
	gtk_widget_show_all ((GtkWidget*) _tmp53_);
	_tmp54_ = box;
	_tmp55_ = gtk_widget_get_style_context ((GtkWidget*) _tmp54_);
	_tmp56_ = _g_object_ref0 (_tmp55_);
	sc2 = _tmp56_;
	_tmp57_ = self->priv->cssp;
	gtk_style_context_add_provider (sc2, (GtkStyleProvider*) _tmp57_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	_g_object_unref0 (sc2);
	_g_object_unref0 (t2);
	_user_msg_free0 (u1);
	_g_object_unref0 (box);
}


void
my_grid_release_resource (MyGrid* self)
{
	g_return_if_fail (self != NULL);
	self->priv->running = FALSE;
}


static Block4Data*
block4_data_ref (Block4Data* _data4_)
{
	g_atomic_int_inc (&_data4_->_ref_count_);
	return _data4_;
}


static void
block4_data_unref (void * _userdata_)
{
	Block4Data* _data4_;
	_data4_ = (Block4Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data4_->_ref_count_)) {
		MyGrid* self;
		self = _data4_->self;
		user_msg_destroy (&_data4_->user1);
		_g_object_unref0 (self);
		g_slice_free (Block4Data, _data4_);
	}
}


static void
__lambda17_ (Block4Data* _data4_)
{
	MyGrid* self;
	ChatClient* _tmp0_;
	gint64 _tmp1_;
	ChatClient* _tmp2_;
	guint16 _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	gchar* _tmp7_;
	self = _data4_->self;
	_tmp0_ = client;
	_tmp1_ = _data4_->h_id;
	chat_client_set_http_id (_tmp0_, _tmp1_);
	_tmp2_ = client;
	_tmp3_ = server_port;
	_tmp4_ = g_strdup_printf ("%hu", _tmp3_);
	_tmp5_ = _tmp4_;
	_tmp6_ = g_strconcat ("http://localhost:", _tmp5_, NULL);
	_tmp7_ = _tmp6_;
	chat_client_open_path (_tmp2_, _tmp7_);
	_g_free0 (_tmp7_);
	_g_free0 (_tmp5_);
}


static void
___lambda17__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda17_ (self);
}


static void
__lambda18_ (Block4Data* _data4_)
{
	MyGrid* self;
	ChatClient* _tmp0_;
	UserMsg _tmp1_;
	gint64 _tmp2_;
	self = _data4_->self;
	_tmp0_ = client;
	_tmp1_ = _data4_->user1;
	_tmp2_ = _tmp1_.id;
	chat_client_set_tcp_id (_tmp0_, _tmp2_);
}


static void
___lambda18__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda18_ (self);
}


static gboolean
__lambda19_ (MyGrid* self,
             GdkEventButton* e)
{
	gboolean result = FALSE;
	guint _tmp0_;
	GtkListBoxRow* r = NULL;
	GtkListBox* _tmp1_;
	gdouble _tmp2_;
	GtkListBoxRow* _tmp3_;
	GtkListBoxRow* _tmp4_;
	GtkListBox* _tmp5_;
	GtkListBoxRow* _tmp6_;
	MyFriendMenu* _tmp7_;
	GtkListBoxRow* _tmp8_;
	const gchar* _tmp9_;
	const gchar* _tmp10_;
	MyFriendMenu* _tmp11_;
	g_return_val_if_fail (e != NULL, FALSE);
	_tmp0_ = e->button;
	if (_tmp0_ != ((guint) 3)) {
		result = FALSE;
		return result;
	}
	_tmp1_ = self->priv->friends;
	_tmp2_ = e->y;
	_tmp3_ = gtk_list_box_get_row_at_y (_tmp1_, (gint) _tmp2_);
	_tmp4_ = _g_object_ref0 (_tmp3_);
	r = _tmp4_;
	_tmp5_ = self->priv->friends;
	_tmp6_ = r;
	gtk_list_box_select_row (_tmp5_, _tmp6_);
	_tmp7_ = popup1;
	_tmp8_ = r;
	_tmp9_ = gtk_widget_get_name ((GtkWidget*) _tmp8_);
	_tmp10_ = _tmp9_;
	my_friend_menu_set_id (_tmp7_, _tmp10_);
	_tmp11_ = popup1;
	gtk_menu_popup_at_pointer ((GtkMenu*) _tmp11_, (GdkEvent*) e);
	result = TRUE;
	_g_object_unref0 (r);
	return result;
}


static gboolean
___lambda19__gtk_widget_button_release_event (GtkWidget* _sender,
                                              GdkEventButton* event,
                                              gpointer self)
{
	gboolean result;
	result = __lambda19_ ((MyGrid*) self, event);
	return result;
}


void
my_grid_add_friend (MyGrid* self,
                    UserMsg* user1,
                    gboolean tell)
{
	Block4Data* _data4_;
	UserMsg _tmp0_;
	UserMsg _tmp1_ = {0};
	GeeHashMap* _tmp2_;
	UserMsg _tmp3_;
	gint64 _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	gboolean _tmp7_;
	gchar* iconp = NULL;
	UserMsg _tmp17_;
	gint _tmp18_;
	GdkPixbuf* pix1 = NULL;
	const gchar* _tmp23_;
	GdkPixbuf* _tmp24_;
	GtkGrid* grid2 = NULL;
	GtkGrid* _tmp25_;
	GtkImage* img2 = NULL;
	GtkImage* _tmp26_;
	GtkImage* _tmp27_;
	GdkPixbuf* _tmp28_;
	GtkGrid* _tmp29_;
	GtkImage* _tmp30_;
	GtkLabel* l2 = NULL;
	UserMsg _tmp31_;
	const gchar* _tmp32_;
	GtkLabel* _tmp33_;
	GtkLabel* _tmp34_;
	GtkLabel* _tmp35_;
	GtkGrid* _tmp36_;
	GtkLabel* _tmp37_;
	GtkButton* b2 = NULL;
	GtkButton* _tmp38_;
	GtkButton* _tmp39_;
	guint16 _tmp40_;
	gchar* _tmp41_;
	gchar* _tmp42_;
	gchar* _tmp43_;
	gchar* _tmp44_;
	GtkGrid* _tmp45_;
	GtkButton* _tmp46_;
	GtkGrid* _tmp47_;
	GtkButton* b3 = NULL;
	GtkButton* _tmp48_;
	GtkButton* _tmp49_;
	guint16 _tmp50_;
	gchar* _tmp51_;
	gchar* _tmp52_;
	gchar* _tmp53_;
	gchar* _tmp54_;
	GtkGrid* _tmp55_;
	GtkButton* _tmp56_;
	GeeHashMap* _tmp57_;
	UserMsg _tmp58_;
	gint64 _tmp59_;
	gchar* _tmp60_;
	gchar* _tmp61_;
	GtkGrid* _tmp62_;
	GtkListBox* _tmp63_;
	GtkGrid* _tmp64_;
	GtkListBoxRow* row2 = NULL;
	GtkGrid* _tmp65_;
	GtkContainer* _tmp66_;
	GtkListBoxRow* _tmp67_;
	GtkListBoxRow* _tmp68_;
	UserMsg _tmp69_;
	gint64 _tmp70_;
	gchar* _tmp71_;
	gchar* _tmp72_;
	GtkGrid* _tmp73_;
	GtkImage* _tmp74_;
	UserMsg _tmp75_;
	gint _tmp76_;
	gchar* _tmp77_;
	gchar* _tmp78_;
	UserMsg _tmp79_;
	const gchar* _tmp80_;
	const gchar* _tmp81_;
	gchar* _tmp82_;
	gchar* _tmp83_;
	UserMsg _tmp84_;
	gint64 _tmp85_;
	GtkButton* _tmp86_;
	GtkButton* _tmp87_;
	GtkListBox* _tmp88_;
	UserMsg _tmp89_;
	gint64 _tmp90_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (user1 != NULL);
	_data4_ = g_slice_new0 (Block4Data);
	_data4_->_ref_count_ = 1;
	_data4_->self = g_object_ref (self);
	_tmp0_ = *user1;
	user_msg_copy (&_tmp0_, &_tmp1_);
	user_msg_destroy (&_data4_->user1);
	_data4_->user1 = _tmp1_;
	_tmp2_ = self->frds1;
	_tmp3_ = _data4_->user1;
	_tmp4_ = _tmp3_.id;
	_tmp5_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = gee_abstract_map_has_key ((GeeAbstractMap*) _tmp2_, _tmp6_);
	_g_free0 (_tmp6_);
	if (_tmp7_) {
		block4_data_unref (_data4_);
		_data4_ = NULL;
		return;
	} else {
		GeeHashMap* _tmp8_;
		UserMsg _tmp9_;
		gint64 _tmp10_;
		gchar* _tmp11_;
		gchar* _tmp12_;
		UserMsg _tmp13_;
		_tmp8_ = self->frds1;
		_tmp9_ = _data4_->user1;
		_tmp10_ = _tmp9_.id;
		_tmp11_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp10_);
		_tmp12_ = _tmp11_;
		_tmp13_ = _data4_->user1;
		gee_abstract_map_set ((GeeAbstractMap*) _tmp8_, _tmp12_, &_tmp13_);
		_g_free0 (_tmp12_);
	}
	if (tell) {
		ChatClient* _tmp14_;
		UserMsg _tmp15_;
		gint64 _tmp16_;
		_tmp14_ = client;
		_tmp15_ = _data4_->user1;
		_tmp16_ = _tmp15_.id;
		chat_client_tell (_tmp14_, _tmp16_);
	}
	_tmp17_ = _data4_->user1;
	_tmp18_ = _tmp17_.sex;
	if (_tmp18_ == 1) {
		const gchar* _tmp19_;
		gchar* _tmp20_;
		_tmp19_ = self->man_icon;
		_tmp20_ = g_strdup (_tmp19_);
		_g_free0 (iconp);
		iconp = _tmp20_;
	} else {
		const gchar* _tmp21_;
		gchar* _tmp22_;
		_tmp21_ = self->woman_icon;
		_tmp22_ = g_strdup (_tmp21_);
		_g_free0 (iconp);
		iconp = _tmp22_;
	}
	_tmp23_ = iconp;
	_tmp24_ = gdk_pixbuf_new_from_file (_tmp23_, &_inner_error0_);
	pix1 = _tmp24_;
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_free0 (iconp);
		block4_data_unref (_data4_);
		_data4_ = NULL;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp25_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp25_);
	grid2 = _tmp25_;
	_tmp26_ = (GtkImage*) gtk_image_new ();
	g_object_ref_sink (_tmp26_);
	img2 = _tmp26_;
	_tmp27_ = img2;
	_tmp28_ = pix1;
	gtk_image_set_from_pixbuf (_tmp27_, _tmp28_);
	_tmp29_ = grid2;
	_tmp30_ = img2;
	gtk_grid_attach (_tmp29_, (GtkWidget*) _tmp30_, 0, 0, 1, 1);
	_tmp31_ = _data4_->user1;
	_tmp32_ = _tmp31_.name;
	_tmp33_ = (GtkLabel*) gtk_label_new (_tmp32_);
	g_object_ref_sink (_tmp33_);
	l2 = _tmp33_;
	_tmp34_ = l2;
	gtk_label_set_xalign (_tmp34_, (gfloat) 0);
	_tmp35_ = l2;
	gtk_widget_set_hexpand ((GtkWidget*) _tmp35_, TRUE);
	_tmp36_ = grid2;
	_tmp37_ = l2;
	gtk_grid_attach (_tmp36_, (GtkWidget*) _tmp37_, 1, 0, 1, 1);
	_tmp38_ = (GtkButton*) gtk_button_new_with_label ("WEB");
	g_object_ref_sink (_tmp38_);
	b2 = _tmp38_;
	_tmp39_ = b2;
	_tmp40_ = server_port;
	_tmp41_ = g_strdup_printf ("%hu", _tmp40_);
	_tmp42_ = _tmp41_;
	_tmp43_ = g_strconcat ("http://localhost:", _tmp42_, NULL);
	_tmp44_ = _tmp43_;
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp39_, _tmp44_);
	_g_free0 (_tmp44_);
	_g_free0 (_tmp42_);
	_tmp45_ = grid2;
	_tmp46_ = b2;
	gtk_grid_attach (_tmp45_, (GtkWidget*) _tmp46_, 2, 0, 1, 1);
	_tmp47_ = grid2;
	gtk_grid_set_column_spacing (_tmp47_, (guint) 5);
	_tmp48_ = (GtkButton*) gtk_button_new_with_label ("TCP");
	g_object_ref_sink (_tmp48_);
	b3 = _tmp48_;
	_tmp49_ = b3;
	_tmp50_ = server_port;
	_tmp51_ = g_strdup_printf ("%hu", _tmp50_);
	_tmp52_ = _tmp51_;
	_tmp53_ = g_strconcat (_ ("TCP Tunnel, PORT:"), _tmp52_, NULL);
	_tmp54_ = _tmp53_;
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp49_, _tmp54_);
	_g_free0 (_tmp54_);
	_g_free0 (_tmp52_);
	_tmp55_ = grid2;
	_tmp56_ = b3;
	gtk_grid_attach (_tmp55_, (GtkWidget*) _tmp56_, 3, 0, 1, 1);
	_tmp57_ = self->priv->frd_boxes;
	_tmp58_ = _data4_->user1;
	_tmp59_ = _tmp58_.id;
	_tmp60_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp59_);
	_tmp61_ = _tmp60_;
	_tmp62_ = grid2;
	gee_abstract_map_set ((GeeAbstractMap*) _tmp57_, _tmp61_, _tmp62_);
	_g_free0 (_tmp61_);
	_tmp63_ = self->priv->friends;
	_tmp64_ = grid2;
	gtk_container_add ((GtkContainer*) _tmp63_, (GtkWidget*) _tmp64_);
	_tmp65_ = grid2;
	_tmp66_ = gtk_widget_get_parent ((GtkWidget*) _tmp65_);
	_tmp67_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp66_, gtk_list_box_row_get_type ()) ? ((GtkListBoxRow*) _tmp66_) : NULL);
	row2 = _tmp67_;
	_tmp68_ = row2;
	_tmp69_ = _data4_->user1;
	_tmp70_ = _tmp69_.id;
	_tmp71_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp70_);
	_tmp72_ = _tmp71_;
	gtk_widget_set_name ((GtkWidget*) _tmp68_, _tmp72_);
	_g_free0 (_tmp72_);
	_tmp73_ = grid2;
	gtk_widget_show_all ((GtkWidget*) _tmp73_);
	_tmp74_ = img2;
	_tmp75_ = _data4_->user1;
	_tmp76_ = _tmp75_.age;
	_tmp77_ = g_strdup_printf ("%i", _tmp76_);
	_tmp78_ = _tmp77_;
	_tmp79_ = _data4_->user1;
	_tmp80_ = _tmp79_.desc;
	_tmp81_ = string_to_string (_tmp80_);
	_tmp82_ = g_strconcat (_tmp78_, "岁\n", _tmp81_, NULL);
	_tmp83_ = _tmp82_;
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp74_, _tmp83_);
	_g_free0 (_tmp83_);
	_g_free0 (_tmp78_);
	_tmp84_ = _data4_->user1;
	_tmp85_ = _tmp84_.id;
	_data4_->h_id = _tmp85_;
	_tmp86_ = b2;
	g_signal_connect_data (_tmp86_, "clicked", (GCallback) ___lambda17__gtk_button_clicked, block4_data_ref (_data4_), (GClosureNotify) block4_data_unref, 0);
	_tmp87_ = b3;
	g_signal_connect_data (_tmp87_, "clicked", (GCallback) ___lambda18__gtk_button_clicked, block4_data_ref (_data4_), (GClosureNotify) block4_data_unref, 0);
	_tmp88_ = self->priv->friends;
	g_signal_connect_object ((GtkWidget*) _tmp88_, "button-release-event", (GCallback) ___lambda19__gtk_widget_button_release_event, self, 0);
	_tmp89_ = _data4_->user1;
	_tmp90_ = _tmp89_.id;
	my_grid_add_listbox_id (self, _tmp90_);
	_g_object_unref0 (row2);
	_g_object_unref0 (b3);
	_g_object_unref0 (b2);
	_g_object_unref0 (l2);
	_g_object_unref0 (img2);
	_g_object_unref0 (grid2);
	_g_object_unref0 (pix1);
	_g_free0 (iconp);
	block4_data_unref (_data4_);
	_data4_ = NULL;
}


void
my_grid_remove_friend (MyGrid* self,
                       const gchar* fid)
{
	GtkGrid* grid = NULL;
	GeeHashMap* _tmp0_;
	gpointer _tmp1_;
	GtkGrid* _tmp2_;
	GeeHashMap* _tmp3_;
	GeeHashMap* _tmp4_;
	ChatClient* _tmp5_;
	GtkListBoxRow* r = NULL;
	GtkContainer* _tmp6_;
	GtkListBoxRow* _tmp7_;
	GtkListBox* _tmp8_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (fid != NULL);
	_tmp0_ = self->priv->frd_boxes;
	_tmp1_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp0_, fid);
	_tmp2_ = _g_object_ref0 ((GtkGrid*) _tmp1_);
	grid = _tmp2_;
	_tmp3_ = self->priv->frd_boxes;
	gee_abstract_map_unset ((GeeAbstractMap*) _tmp3_, fid, NULL);
	_tmp4_ = self->frds1;
	gee_abstract_map_unset ((GeeAbstractMap*) _tmp4_, fid, NULL);
	_tmp5_ = client;
	chat_client_remove_friend (_tmp5_, g_ascii_strtoll (fid, NULL, 0));
	_tmp6_ = gtk_widget_get_parent ((GtkWidget*) grid);
	_tmp7_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp6_, gtk_list_box_row_get_type ()) ? ((GtkListBoxRow*) _tmp6_) : NULL);
	r = _tmp7_;
	gtk_list_box_row_set_selectable (r, FALSE);
	gtk_widget_set_name ((GtkWidget*) r, "");
	_tmp8_ = self->priv->friends;
	gtk_container_remove ((GtkContainer*) _tmp8_, (GtkWidget*) r);
	_g_object_unref0 (r);
	_g_object_unref0 (grid);
}


void
my_grid_add_right_name_icon (MyGrid* self,
                             const gchar* name,
                             gint16 sex)
{
	gchar* iconp = NULL;
	GdkPixbuf* pix1 = NULL;
	const gchar* _tmp4_;
	GdkPixbuf* _tmp5_;
	GtkGrid* grid2 = NULL;
	GtkGrid* _tmp6_;
	GtkImage* img2 = NULL;
	GtkImage* _tmp7_;
	GtkImage* _tmp8_;
	GtkGrid* _tmp9_;
	GtkImage* _tmp10_;
	GtkGrid* _tmp11_;
	GtkLabel* l2 = NULL;
	GtkLabel* _tmp12_;
	GtkLabel* _tmp13_;
	GtkGrid* _tmp14_;
	GtkLabel* _tmp15_;
	GtkGrid* _tmp16_;
	GtkListBox* _tmp17_;
	GtkGrid* _tmp18_;
	GtkGrid* _tmp19_;
	GtkCssProvider* _tmp20_;
	GtkGrid* _tmp21_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (name != NULL);
	if (((gint) sex) == 1) {
		const gchar* _tmp0_;
		gchar* _tmp1_;
		_tmp0_ = self->man_icon;
		_tmp1_ = g_strdup (_tmp0_);
		_g_free0 (iconp);
		iconp = _tmp1_;
	} else {
		const gchar* _tmp2_;
		gchar* _tmp3_;
		_tmp2_ = self->woman_icon;
		_tmp3_ = g_strdup (_tmp2_);
		_g_free0 (iconp);
		iconp = _tmp3_;
	}
	_tmp4_ = iconp;
	_tmp5_ = gdk_pixbuf_new_from_file (_tmp4_, &_inner_error0_);
	pix1 = _tmp5_;
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_free0 (iconp);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp6_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp6_);
	grid2 = _tmp6_;
	_tmp7_ = (GtkImage*) gtk_image_new ();
	g_object_ref_sink (_tmp7_);
	img2 = _tmp7_;
	_tmp8_ = img2;
	gtk_image_set_from_pixbuf (_tmp8_, pix1);
	_tmp9_ = grid2;
	_tmp10_ = img2;
	gtk_grid_attach (_tmp9_, (GtkWidget*) _tmp10_, 1, 0, 1, 1);
	_tmp11_ = grid2;
	gtk_widget_set_halign ((GtkWidget*) _tmp11_, GTK_ALIGN_END);
	_tmp12_ = (GtkLabel*) gtk_label_new (name);
	g_object_ref_sink (_tmp12_);
	l2 = _tmp12_;
	_tmp13_ = l2;
	gtk_label_set_xalign (_tmp13_, (gfloat) 1);
	_tmp14_ = grid2;
	_tmp15_ = l2;
	gtk_grid_attach (_tmp14_, (GtkWidget*) _tmp15_, 0, 0, 1, 1);
	_tmp16_ = grid2;
	gtk_grid_set_column_spacing (_tmp16_, (guint) 5);
	_tmp17_ = self->priv->msgs;
	_tmp18_ = grid2;
	gtk_container_add ((GtkContainer*) _tmp17_, (GtkWidget*) _tmp18_);
	_tmp19_ = grid2;
	_tmp20_ = self->name_css;
	my_grid_set_css_to (self, (GtkWidget*) _tmp19_, _tmp20_);
	_tmp21_ = grid2;
	gtk_widget_show_all ((GtkWidget*) _tmp21_);
	_g_object_unref0 (l2);
	_g_object_unref0 (img2);
	_g_object_unref0 (grid2);
	_g_object_unref0 (pix1);
	_g_free0 (iconp);
}


void
my_grid_add_left_name_icon (MyGrid* self,
                            const gchar* name,
                            gint16 sex)
{
	gchar* iconp = NULL;
	GtkGrid* grid1 = NULL;
	GtkGrid* _tmp4_;
	GdkPixbuf* pix1 = NULL;
	const gchar* _tmp5_;
	GdkPixbuf* _tmp6_;
	GtkImage* img1 = NULL;
	GtkImage* _tmp7_;
	GtkImage* _tmp8_;
	GtkImage* _tmp9_;
	GtkLabel* l1 = NULL;
	GtkLabel* _tmp10_;
	GtkLabel* _tmp11_;
	GtkLabel* _tmp12_;
	GtkListBox* _tmp13_;
	GtkCssProvider* _tmp14_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (name != NULL);
	if (((gint) sex) == 1) {
		const gchar* _tmp0_;
		gchar* _tmp1_;
		_tmp0_ = self->man_icon;
		_tmp1_ = g_strdup (_tmp0_);
		_g_free0 (iconp);
		iconp = _tmp1_;
	} else {
		const gchar* _tmp2_;
		gchar* _tmp3_;
		_tmp2_ = self->woman_icon;
		_tmp3_ = g_strdup (_tmp2_);
		_g_free0 (iconp);
		iconp = _tmp3_;
	}
	_tmp4_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp4_);
	grid1 = _tmp4_;
	_tmp5_ = iconp;
	_tmp6_ = gdk_pixbuf_new_from_file (_tmp5_, &_inner_error0_);
	pix1 = _tmp6_;
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_object_unref0 (grid1);
		_g_free0 (iconp);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp7_ = (GtkImage*) gtk_image_new ();
	g_object_ref_sink (_tmp7_);
	img1 = _tmp7_;
	_tmp8_ = img1;
	gtk_image_set_from_pixbuf (_tmp8_, pix1);
	_tmp9_ = img1;
	gtk_grid_attach (grid1, (GtkWidget*) _tmp9_, 0, 0, 1, 1);
	_tmp10_ = (GtkLabel*) gtk_label_new (name);
	g_object_ref_sink (_tmp10_);
	l1 = _tmp10_;
	_tmp11_ = l1;
	gtk_label_set_xalign (_tmp11_, (gfloat) 0);
	_tmp12_ = l1;
	gtk_grid_attach (grid1, (GtkWidget*) _tmp12_, 1, 0, 1, 1);
	gtk_grid_set_column_spacing (grid1, (guint) 5);
	gtk_widget_set_halign ((GtkWidget*) grid1, GTK_ALIGN_START);
	_tmp13_ = self->priv->msgs;
	gtk_container_add ((GtkContainer*) _tmp13_, (GtkWidget*) grid1);
	_tmp14_ = self->name_css;
	my_grid_set_css_to (self, (GtkWidget*) grid1, _tmp14_);
	gtk_widget_show_all ((GtkWidget*) grid1);
	_g_object_unref0 (l1);
	_g_object_unref0 (img1);
	_g_object_unref0 (pix1);
	_g_object_unref0 (grid1);
	_g_free0 (iconp);
}


void
my_grid_add_left_name_icon_to (MyGrid* self,
                               gint64 to,
                               const gchar* name,
                               gint16 sex)
{
	GtkListBox* box1 = NULL;
	GeeHashMap* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gpointer _tmp3_;
	GtkListBox* _tmp4_;
	GtkListBox* _tmp5_;
	gchar* iconp = NULL;
	GtkGrid* grid = NULL;
	GtkGrid* _tmp10_;
	GdkPixbuf* pix1 = NULL;
	const gchar* _tmp11_;
	GdkPixbuf* _tmp12_;
	GtkImage* img1 = NULL;
	GtkImage* _tmp13_;
	GtkImage* _tmp14_;
	GdkPixbuf* _tmp15_;
	GtkGrid* _tmp16_;
	GtkImage* _tmp17_;
	GtkLabel* l1 = NULL;
	GtkLabel* _tmp18_;
	GtkLabel* _tmp19_;
	GtkGrid* _tmp20_;
	GtkLabel* _tmp21_;
	GtkGrid* _tmp22_;
	GtkGrid* _tmp23_;
	GtkListBox* _tmp24_;
	GtkGrid* _tmp25_;
	GtkGrid* _tmp26_;
	GtkCssProvider* _tmp27_;
	GtkGrid* _tmp28_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (name != NULL);
	_tmp0_ = self->priv->boxes;
	_tmp1_ = g_strdup_printf ("%" G_GINT64_FORMAT, to);
	_tmp2_ = _tmp1_;
	_tmp3_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp0_, _tmp2_);
	_tmp4_ = (GtkListBox*) _tmp3_;
	_g_free0 (_tmp2_);
	box1 = _tmp4_;
	_tmp5_ = box1;
	if (_tmp5_ == NULL) {
		_g_object_unref0 (box1);
		return;
	}
	if (((gint) sex) == 1) {
		const gchar* _tmp6_;
		gchar* _tmp7_;
		_tmp6_ = self->man_icon;
		_tmp7_ = g_strdup (_tmp6_);
		_g_free0 (iconp);
		iconp = _tmp7_;
	} else {
		const gchar* _tmp8_;
		gchar* _tmp9_;
		_tmp8_ = self->woman_icon;
		_tmp9_ = g_strdup (_tmp8_);
		_g_free0 (iconp);
		iconp = _tmp9_;
	}
	_tmp10_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp10_);
	grid = _tmp10_;
	_tmp11_ = iconp;
	_tmp12_ = gdk_pixbuf_new_from_file (_tmp11_, &_inner_error0_);
	pix1 = _tmp12_;
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_object_unref0 (grid);
		_g_free0 (iconp);
		_g_object_unref0 (box1);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp13_ = (GtkImage*) gtk_image_new ();
	g_object_ref_sink (_tmp13_);
	img1 = _tmp13_;
	_tmp14_ = img1;
	_tmp15_ = pix1;
	gtk_image_set_from_pixbuf (_tmp14_, _tmp15_);
	_tmp16_ = grid;
	_tmp17_ = img1;
	gtk_grid_attach (_tmp16_, (GtkWidget*) _tmp17_, 0, 0, 1, 1);
	_tmp18_ = (GtkLabel*) gtk_label_new (name);
	g_object_ref_sink (_tmp18_);
	l1 = _tmp18_;
	_tmp19_ = l1;
	gtk_label_set_xalign (_tmp19_, (gfloat) 0);
	_tmp20_ = grid;
	_tmp21_ = l1;
	gtk_grid_attach (_tmp20_, (GtkWidget*) _tmp21_, 1, 0, 1, 1);
	_tmp22_ = grid;
	gtk_grid_set_column_spacing (_tmp22_, (guint) 5);
	_tmp23_ = grid;
	gtk_widget_set_halign ((GtkWidget*) _tmp23_, GTK_ALIGN_START);
	_tmp24_ = box1;
	_tmp25_ = grid;
	gtk_container_add ((GtkContainer*) _tmp24_, (GtkWidget*) _tmp25_);
	_tmp26_ = grid;
	_tmp27_ = self->name_css;
	my_grid_set_css_to (self, (GtkWidget*) _tmp26_, _tmp27_);
	_tmp28_ = grid;
	gtk_widget_show_all ((GtkWidget*) _tmp28_);
	_g_object_unref0 (l1);
	_g_object_unref0 (img1);
	_g_object_unref0 (pix1);
	_g_object_unref0 (grid);
	_g_free0 (iconp);
	_g_object_unref0 (box1);
}


void
my_grid_add_text_to (MyGrid* self,
                     gint64 to,
                     const gchar* text,
                     gboolean center,
                     gboolean markup)
{
	GtkListBox* box1 = NULL;
	GeeHashMap* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gpointer _tmp3_;
	GtkListBox* _tmp4_;
	GtkListBox* _tmp5_;
	GtkGrid* grid = NULL;
	GtkGrid* _tmp6_;
	GtkLabel* lb = NULL;
	GtkLabel* _tmp7_;
	GtkLabel* _tmp8_;
	GtkStyleContext* sc1 = NULL;
	GtkLabel* _tmp9_;
	GtkStyleContext* _tmp10_;
	GtkStyleContext* _tmp11_;
	GtkStyleContext* _tmp12_;
	GtkCssProvider* _tmp13_;
	GtkLabel* _tmp16_;
	GtkLabel* _tmp17_;
	GtkGrid* _tmp20_;
	GtkLabel* _tmp21_;
	GtkGrid* _tmp22_;
	GtkLabel* _tmp23_;
	GtkListBox* _tmp24_;
	GtkGrid* _tmp25_;
	GtkGrid* _tmp26_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (text != NULL);
	_tmp0_ = self->priv->boxes;
	_tmp1_ = g_strdup_printf ("%" G_GINT64_FORMAT, to);
	_tmp2_ = _tmp1_;
	_tmp3_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp0_, _tmp2_);
	_tmp4_ = (GtkListBox*) _tmp3_;
	_g_free0 (_tmp2_);
	box1 = _tmp4_;
	_tmp5_ = box1;
	if (_tmp5_ == NULL) {
		_g_object_unref0 (box1);
		return;
	}
	_tmp6_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp6_);
	grid = _tmp6_;
	_tmp7_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp7_);
	lb = _tmp7_;
	_tmp8_ = lb;
	gtk_label_set_selectable (_tmp8_, TRUE);
	_tmp9_ = lb;
	_tmp10_ = gtk_widget_get_style_context ((GtkWidget*) _tmp9_);
	_tmp11_ = _g_object_ref0 (_tmp10_);
	sc1 = _tmp11_;
	_tmp12_ = sc1;
	_tmp13_ = self->link_css1;
	gtk_style_context_add_provider (_tmp12_, (GtkStyleProvider*) _tmp13_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	if (markup) {
		GtkLabel* _tmp14_;
		_tmp14_ = lb;
		gtk_label_set_markup (_tmp14_, text);
	} else {
		GtkLabel* _tmp15_;
		_tmp15_ = lb;
		gtk_label_set_label (_tmp15_, text);
	}
	_tmp16_ = lb;
	g_object_set (_tmp16_, "wrap", TRUE, NULL);
	_tmp17_ = lb;
	g_object_set (_tmp17_, "wrap-mode", PANGO_WRAP_CHAR, NULL);
	if (!center) {
		GtkLabel* _tmp18_;
		_tmp18_ = lb;
		gtk_label_set_xalign (_tmp18_, (gfloat) 0);
	} else {
		GtkLabel* _tmp19_;
		_tmp19_ = lb;
		gtk_label_set_xalign (_tmp19_, (gfloat) 0.5);
	}
	_tmp20_ = grid;
	gtk_widget_set_halign ((GtkWidget*) _tmp20_, GTK_ALIGN_CENTER);
	_tmp21_ = lb;
	gtk_widget_set_hexpand ((GtkWidget*) _tmp21_, TRUE);
	_tmp22_ = grid;
	_tmp23_ = lb;
	gtk_grid_attach (_tmp22_, (GtkWidget*) _tmp23_, 1, 0, 1, 1);
	_tmp24_ = box1;
	_tmp25_ = grid;
	gtk_container_add ((GtkContainer*) _tmp24_, (GtkWidget*) _tmp25_);
	_tmp26_ = grid;
	gtk_widget_show_all ((GtkWidget*) _tmp26_);
	_g_object_unref0 (sc1);
	_g_object_unref0 (lb);
	_g_object_unref0 (grid);
	_g_object_unref0 (box1);
}


void
my_grid_add_image (MyGrid* self,
                   const gchar* pathname)
{
	GdkPixbuf* p1 = NULL;
	GdkPixbuf* _tmp0_;
	GtkImage* image = NULL;
	GtkImage* _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	GtkListBox* _tmp18_;
	GtkImage* _tmp19_;
	GtkImage* _tmp20_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (pathname != NULL);
	_tmp0_ = gdk_pixbuf_new_from_file (pathname, &_inner_error0_);
	p1 = _tmp0_;
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp1_ = (GtkImage*) gtk_image_new ();
	g_object_ref_sink (_tmp1_);
	image = _tmp1_;
	_tmp2_ = gdk_pixbuf_get_width (p1);
	_tmp3_ = _tmp2_;
	if (_tmp3_ > 300) {
		gdouble xs = 0.0;
		gint _tmp4_;
		gint _tmp5_;
		gint h2 = 0;
		gint _tmp6_;
		gint _tmp7_;
		gdouble _tmp8_;
		GdkPixbuf* p2 = NULL;
		gint _tmp9_;
		GdkPixbuf* _tmp10_;
		GdkPixbuf* _tmp11_;
		gint _tmp12_;
		gdouble _tmp13_;
		gdouble _tmp14_;
		GtkImage* _tmp15_;
		GdkPixbuf* _tmp16_;
		_tmp4_ = gdk_pixbuf_get_width (p1);
		_tmp5_ = _tmp4_;
		xs = ((gdouble) 300) / ((gdouble) _tmp5_);
		_tmp6_ = gdk_pixbuf_get_height (p1);
		_tmp7_ = _tmp6_;
		_tmp8_ = xs;
		h2 = (gint) (_tmp7_ * _tmp8_);
		_tmp9_ = h2;
		_tmp10_ = gdk_pixbuf_new (GDK_COLORSPACE_RGB, TRUE, 8, 300, _tmp9_);
		p2 = _tmp10_;
		_tmp11_ = p2;
		_tmp12_ = h2;
		_tmp13_ = xs;
		_tmp14_ = xs;
		gdk_pixbuf_scale (p1, _tmp11_, 0, 0, 300, _tmp12_, 0.0, 0.0, _tmp13_, _tmp14_, GDK_INTERP_NEAREST);
		_tmp15_ = image;
		_tmp16_ = p2;
		gtk_image_set_from_pixbuf (_tmp15_, _tmp16_);
		_g_object_unref0 (p2);
	} else {
		GtkImage* _tmp17_;
		_tmp17_ = image;
		gtk_image_set_from_pixbuf (_tmp17_, p1);
	}
	_tmp18_ = self->priv->msgs;
	_tmp19_ = image;
	gtk_container_add ((GtkContainer*) _tmp18_, (GtkWidget*) _tmp19_);
	_tmp20_ = image;
	gtk_widget_show ((GtkWidget*) _tmp20_);
	_g_object_unref0 (image);
	_g_object_unref0 (p1);
}


void
my_grid_add_text (MyGrid* self,
                  const gchar* text,
                  gboolean center,
                  gboolean markup)
{
	GtkGrid* grid = NULL;
	GtkGrid* _tmp0_;
	GtkLabel* lb = NULL;
	GtkLabel* _tmp1_;
	GtkLabel* _tmp2_;
	GtkStyleContext* sc1 = NULL;
	GtkLabel* _tmp3_;
	GtkStyleContext* _tmp4_;
	GtkStyleContext* _tmp5_;
	GtkStyleContext* _tmp6_;
	GtkCssProvider* _tmp7_;
	GtkLabel* _tmp10_;
	GtkLabel* _tmp11_;
	GtkGrid* _tmp14_;
	GtkGrid* _tmp15_;
	GtkLabel* _tmp16_;
	GtkListBox* _tmp17_;
	GtkGrid* _tmp18_;
	GtkGrid* _tmp19_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (text != NULL);
	_tmp0_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp0_);
	grid = _tmp0_;
	_tmp1_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp1_);
	lb = _tmp1_;
	_tmp2_ = lb;
	gtk_label_set_selectable (_tmp2_, TRUE);
	_tmp3_ = lb;
	_tmp4_ = gtk_widget_get_style_context ((GtkWidget*) _tmp3_);
	_tmp5_ = _g_object_ref0 (_tmp4_);
	sc1 = _tmp5_;
	_tmp6_ = sc1;
	_tmp7_ = self->link_css1;
	gtk_style_context_add_provider (_tmp6_, (GtkStyleProvider*) _tmp7_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	if (markup) {
		GtkLabel* _tmp8_;
		_tmp8_ = lb;
		gtk_label_set_markup (_tmp8_, text);
	} else {
		GtkLabel* _tmp9_;
		_tmp9_ = lb;
		gtk_label_set_label (_tmp9_, text);
	}
	_tmp10_ = lb;
	g_object_set (_tmp10_, "wrap", TRUE, NULL);
	_tmp11_ = lb;
	g_object_set (_tmp11_, "wrap-mode", PANGO_WRAP_CHAR, NULL);
	if (!center) {
		GtkLabel* _tmp12_;
		_tmp12_ = lb;
		gtk_label_set_xalign (_tmp12_, (gfloat) 0);
	} else {
		GtkLabel* _tmp13_;
		_tmp13_ = lb;
		gtk_label_set_xalign (_tmp13_, (gfloat) 0.5);
	}
	_tmp14_ = grid;
	gtk_widget_set_halign ((GtkWidget*) _tmp14_, GTK_ALIGN_CENTER);
	_tmp15_ = grid;
	_tmp16_ = lb;
	gtk_grid_attach (_tmp15_, (GtkWidget*) _tmp16_, 1, 0, 1, 1);
	_tmp17_ = self->priv->msgs;
	_tmp18_ = grid;
	gtk_container_add ((GtkContainer*) _tmp17_, (GtkWidget*) _tmp18_);
	_tmp19_ = grid;
	gtk_widget_show_all ((GtkWidget*) _tmp19_);
	_g_object_unref0 (sc1);
	_g_object_unref0 (lb);
	_g_object_unref0 (grid);
}


static Block5Data*
block5_data_ref (Block5Data* _data5_)
{
	g_atomic_int_inc (&_data5_->_ref_count_);
	return _data5_;
}


static void
block5_data_unref (void * _userdata_)
{
	Block5Data* _data5_;
	_data5_ = (Block5Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data5_->_ref_count_)) {
		MyGrid* self;
		self = _data5_->self;
		_g_free0 (_data5_->dir1);
		_g_free0 (_data5_->pathname);
		_g_object_unref0 (self);
		g_slice_free (Block5Data, _data5_);
	}
}


static void
__lambda22_ (Block5Data* _data5_)
{
	MyGrid* self;
	ChatClient* _tmp0_;
	self = _data5_->self;
	_tmp0_ = client;
	chat_client_open_path (_tmp0_, _data5_->pathname);
}


static void
___lambda22__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda22_ (self);
}


static void
__lambda23_ (Block5Data* _data5_)
{
	MyGrid* self;
	ChatClient* _tmp0_;
	self = _data5_->self;
	_tmp0_ = client;
	chat_client_open_path (_tmp0_, _data5_->dir1);
}


static void
___lambda23__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda23_ (self);
}


static void
__lambda24_ (Block5Data* _data5_)
{
	MyGrid* self;
	self = _data5_->self;
	g_remove (_data5_->pathname);
}


static void
___lambda24__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda24_ (self);
}


static void
my_grid_add_operate_buttons (MyGrid* self,
                             const gchar* pathname)
{
	Block5Data* _data5_;
	gchar* _tmp0_;
	gchar* _tmp1_;
	GtkGrid* grid = NULL;
	GtkGrid* _tmp2_;
	GtkLabel* lb1 = NULL;
	GtkLabel* _tmp3_;
	GtkLabel* lb2 = NULL;
	GtkLabel* _tmp4_;
	GtkButton* bt_open = NULL;
	GtkButton* _tmp5_;
	GtkButton* bt_dir = NULL;
	GtkButton* _tmp6_;
	GtkButton* bt_del = NULL;
	GtkButton* _tmp7_;
	GtkListBox* _tmp8_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (pathname != NULL);
	_data5_ = g_slice_new0 (Block5Data);
	_data5_->_ref_count_ = 1;
	_data5_->self = g_object_ref (self);
	_tmp0_ = g_strdup (pathname);
	_g_free0 (_data5_->pathname);
	_data5_->pathname = _tmp0_;
	_tmp1_ = g_path_get_dirname (_data5_->pathname);
	_data5_->dir1 = _tmp1_;
	_tmp2_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp2_);
	grid = _tmp2_;
	_tmp3_ = (GtkLabel*) gtk_label_new (" ");
	g_object_ref_sink (_tmp3_);
	lb1 = _tmp3_;
	_tmp4_ = (GtkLabel*) gtk_label_new (" ");
	g_object_ref_sink (_tmp4_);
	lb2 = _tmp4_;
	g_object_set ((GtkWidget*) lb1, "expand", TRUE, NULL);
	g_object_set ((GtkWidget*) lb2, "expand", TRUE, NULL);
	_tmp5_ = (GtkButton*) gtk_button_new_with_label (_ ("OpenFile"));
	g_object_ref_sink (_tmp5_);
	bt_open = _tmp5_;
	gtk_widget_set_tooltip_text ((GtkWidget*) bt_open, _data5_->pathname);
	_tmp6_ = (GtkButton*) gtk_button_new_with_label (_ ("OpenDir"));
	g_object_ref_sink (_tmp6_);
	bt_dir = _tmp6_;
	gtk_widget_set_tooltip_text ((GtkWidget*) bt_dir, _data5_->dir1);
	_tmp7_ = (GtkButton*) gtk_button_new_with_label (_ ("RemoveFile"));
	g_object_ref_sink (_tmp7_);
	bt_del = _tmp7_;
	gtk_grid_attach (grid, (GtkWidget*) lb1, 0, 0, 1, 1);
	gtk_grid_attach (grid, (GtkWidget*) bt_open, 1, 0, 1, 1);
	gtk_grid_attach (grid, (GtkWidget*) bt_dir, 2, 0, 1, 1);
	gtk_grid_attach (grid, (GtkWidget*) bt_del, 3, 0, 1, 1);
	gtk_grid_attach (grid, (GtkWidget*) lb2, 4, 0, 1, 1);
	_tmp8_ = self->priv->msgs;
	gtk_container_add ((GtkContainer*) _tmp8_, (GtkWidget*) grid);
	gtk_widget_show_all ((GtkWidget*) grid);
	g_signal_connect_data (bt_open, "clicked", (GCallback) ___lambda22__gtk_button_clicked, block5_data_ref (_data5_), (GClosureNotify) block5_data_unref, 0);
	g_signal_connect_data (bt_dir, "clicked", (GCallback) ___lambda23__gtk_button_clicked, block5_data_ref (_data5_), (GClosureNotify) block5_data_unref, 0);
	g_signal_connect_data (bt_del, "clicked", (GCallback) ___lambda24__gtk_button_clicked, block5_data_ref (_data5_), (GClosureNotify) block5_data_unref, 0);
	_g_object_unref0 (bt_del);
	_g_object_unref0 (bt_dir);
	_g_object_unref0 (bt_open);
	_g_object_unref0 (lb2);
	_g_object_unref0 (lb1);
	_g_object_unref0 (grid);
	block5_data_unref (_data5_);
	_data5_ = NULL;
}


static gchar*
string_slice (const gchar* self,
              glong start,
              glong end)
{
	gchar* result = NULL;
	glong string_length = 0L;
	gint _tmp0_;
	gint _tmp1_;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp6_ = FALSE;
	gchar* _tmp8_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = strlen (self);
	_tmp1_ = _tmp0_;
	string_length = (glong) _tmp1_;
	if (start < ((glong) 0)) {
		glong _tmp2_;
		_tmp2_ = string_length;
		start = _tmp2_ + start;
	}
	if (end < ((glong) 0)) {
		glong _tmp3_;
		_tmp3_ = string_length;
		end = _tmp3_ + end;
	}
	if (start >= ((glong) 0)) {
		glong _tmp5_;
		_tmp5_ = string_length;
		_tmp4_ = start <= _tmp5_;
	} else {
		_tmp4_ = FALSE;
	}
	g_return_val_if_fail (_tmp4_, NULL);
	if (end >= ((glong) 0)) {
		glong _tmp7_;
		_tmp7_ = string_length;
		_tmp6_ = end <= _tmp7_;
	} else {
		_tmp6_ = FALSE;
	}
	g_return_val_if_fail (_tmp6_, NULL);
	g_return_val_if_fail (start <= end, NULL);
	_tmp8_ = g_strndup (((gchar*) self) + start, (gsize) (end - start));
	result = _tmp8_;
	return result;
}


static gboolean
____lambda10_ (MyGrid* self)
{
	gboolean result = FALSE;
	GtkAdjustment* adj1 = NULL;
	GtkListBox* _tmp0_;
	GtkAdjustment* _tmp1_;
	GtkAdjustment* _tmp2_;
	gdouble _tmp3_;
	gdouble _tmp4_;
	_tmp0_ = self->priv->msgs;
	_tmp1_ = gtk_list_box_get_adjustment (_tmp0_);
	_tmp2_ = _g_object_ref0 (_tmp1_);
	adj1 = _tmp2_;
	_tmp3_ = gtk_adjustment_get_upper (adj1);
	_tmp4_ = _tmp3_;
	gtk_adjustment_set_value (adj1, _tmp4_);
	result = FALSE;
	_g_object_unref0 (adj1);
	return result;
}


static gboolean
_____lambda10__gsource_func (gpointer self)
{
	gboolean result;
	result = ____lambda10_ ((MyGrid*) self);
	return result;
}


static JsonNode*
_vala_JsonNode_copy (JsonNode* self)
{
	return g_boxed_copy (json_node_get_type (), self);
}


static gpointer
__vala_JsonNode_copy0 (gpointer self)
{
	return self ? _vala_JsonNode_copy (self) : NULL;
}


static void
_vala_JsonNode_free (JsonNode* self)
{
	g_boxed_free (json_node_get_type (), self);
}


static gpointer
_json_object_ref0 (gpointer self)
{
	return self ? json_object_ref (self) : NULL;
}


static gboolean
__lambda25_ (MyGrid* self)
{
	gboolean result = FALSE;
	GtkAdjustment* adj1 = NULL;
	GtkListBox* _tmp0_;
	GtkAdjustment* _tmp1_;
	GtkAdjustment* _tmp2_;
	gdouble _tmp3_;
	gdouble _tmp4_;
	_tmp0_ = self->priv->msgs;
	_tmp1_ = gtk_list_box_get_adjustment (_tmp0_);
	_tmp2_ = _g_object_ref0 (_tmp1_);
	adj1 = _tmp2_;
	_tmp3_ = gtk_adjustment_get_upper (adj1);
	_tmp4_ = _tmp3_;
	gtk_adjustment_set_value (adj1, _tmp4_);
	result = FALSE;
	_g_object_unref0 (adj1);
	return result;
}


static gboolean
___lambda25__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda25_ ((MyGrid*) self);
	return result;
}


void
my_grid_rpc_callback (MyGrid* self,
                      gint8 typ,
                      gint64 from,
                      const gchar* msg)
{
	gchar* typ1 = NULL;
	gchar* _tmp51_;
	gchar* msg1 = NULL;
	gint _tmp52_;
	gint _tmp53_;
	gchar* _tmp54_;
	gchar* fname = NULL;
	gchar* _tmp55_;
	gint16 fsex = 0;
	UserMsg* u = NULL;
	GeeHashMap* _tmp56_;
	gchar* _tmp57_;
	gchar* _tmp58_;
	gpointer _tmp59_;
	UserMsg* _tmp60_;
	GtkListBox* display = NULL;
	GeeHashMap* _tmp61_;
	gchar* _tmp62_;
	gchar* _tmp63_;
	gpointer _tmp64_;
	GtkListBox* _tmp65_;
	GtkListBox* bak_msgs = NULL;
	GtkListBox* _tmp66_;
	GtkListBox* _tmp67_;
	UserMsg* _tmp68_;
	const gchar* _tmp88_;
	const gchar* _tmp89_;
	GQuark _tmp91_ = 0U;
	static GQuark _tmp90_label0 = 0;
	static GQuark _tmp90_label1 = 0;
	static GQuark _tmp90_label2 = 0;
	GtkListBox* _tmp131_;
	GtkListBox* _tmp132_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (msg != NULL);
	if (from == ((gint64) 0)) {
		gint _tmp0_;
		gint _tmp1_;
		gchar* _tmp2_;
		gchar* _tmp3_;
		gboolean _tmp4_;
		_tmp0_ = strlen (msg);
		_tmp1_ = _tmp0_;
		if (_tmp1_ <= 8) {
			return;
		}
		_tmp2_ = string_slice (msg, (glong) 0, (glong) 8);
		_tmp3_ = _tmp2_;
		_tmp4_ = g_strcmp0 (_tmp3_, "Offline ") == 0;
		_g_free0 (_tmp3_);
		if (_tmp4_) {
			gchar* off_id = NULL;
			gint _tmp5_;
			gint _tmp6_;
			gchar* _tmp7_;
			GtkGrid* grid = NULL;
			GeeHashMap* _tmp8_;
			const gchar* _tmp9_;
			gpointer _tmp10_;
			GtkGrid* _tmp11_;
			GtkStyleContext* sc = NULL;
			GtkGrid* _tmp12_;
			GtkStyleContext* _tmp13_;
			GtkStyleContext* _tmp14_;
			GtkStyleContext* _tmp15_;
			GtkCssProvider* _tmp16_;
			GtkStyleContext* _tmp17_;
			GtkListBox* _tmp19_;
			GtkListBox* tmp = NULL;
			GtkListBox* _tmp20_;
			GtkListBox* _tmp21_;
			GeeHashMap* _tmp22_;
			const gchar* _tmp23_;
			gpointer _tmp24_;
			GtkListBox* _tmp25_;
			GtkListBox* _tmp26_;
			_tmp5_ = strlen (msg);
			_tmp6_ = _tmp5_;
			_tmp7_ = string_slice (msg, (glong) 8, (glong) _tmp6_);
			off_id = _tmp7_;
			_tmp8_ = self->priv->frd_boxes;
			_tmp9_ = off_id;
			_tmp10_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp8_, _tmp9_);
			_tmp11_ = _g_object_ref0 ((GtkGrid*) _tmp10_);
			grid = _tmp11_;
			_tmp12_ = grid;
			_tmp13_ = gtk_widget_get_style_context ((GtkWidget*) _tmp12_);
			_tmp14_ = _g_object_ref0 (_tmp13_);
			sc = _tmp14_;
			_tmp15_ = sc;
			_tmp16_ = self->provider1;
			gtk_style_context_add_provider (_tmp15_, (GtkStyleProvider*) _tmp16_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
			_tmp17_ = sc;
			if (gtk_style_context_has_class (_tmp17_, "off") == FALSE) {
				GtkStyleContext* _tmp18_;
				_tmp18_ = sc;
				gtk_style_context_add_class (_tmp18_, "off");
			}
			_tmp19_ = self->priv->friends;
			gtk_list_box_invalidate_sort (_tmp19_);
			_tmp20_ = self->priv->msgs;
			_tmp21_ = _g_object_ref0 (_tmp20_);
			tmp = _tmp21_;
			_tmp22_ = self->priv->boxes;
			_tmp23_ = off_id;
			_tmp24_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp22_, _tmp23_);
			_g_object_unref0 (self->priv->msgs);
			self->priv->msgs = (GtkListBox*) _tmp24_;
			my_grid_add_text (self, _ ("[Offline]"), FALSE, FALSE);
			_tmp25_ = tmp;
			_tmp26_ = _g_object_ref0 (_tmp25_);
			_g_object_unref0 (self->priv->msgs);
			self->priv->msgs = _tmp26_;
			g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _____lambda10__gsource_func, g_object_ref (self), g_object_unref);
			_g_object_unref0 (tmp);
			_g_object_unref0 (sc);
			_g_object_unref0 (grid);
			_g_free0 (off_id);
		} else {
			gchar* _tmp27_;
			gchar* _tmp28_;
			gboolean _tmp29_;
			_tmp27_ = string_slice (msg, (glong) 0, (glong) 8);
			_tmp28_ = _tmp27_;
			_tmp29_ = g_strcmp0 (_tmp28_, "Version:") == 0;
			_g_free0 (_tmp28_);
			if (_tmp29_) {
				gint _tmp30_;
				gint _tmp31_;
				gchar* _tmp32_;
				gchar* _tmp33_;
				gint _tmp34_;
				gint _tmp35_;
				_tmp30_ = strlen (msg);
				_tmp31_ = _tmp30_;
				_tmp32_ = string_slice (msg, (glong) 8, (glong) _tmp31_);
				_tmp33_ = _tmp32_;
				LATESTVER = atoi (_tmp33_);
				_g_free0 (_tmp33_);
				_tmp34_ = LATESTVER;
				_tmp35_ = RELEASE;
				if (_tmp34_ > _tmp35_) {
					version_notify ();
				}
			} else {
				gchar* _tmp36_;
				gchar* _tmp37_;
				gboolean _tmp38_;
				_tmp36_ = string_slice (msg, (glong) 0, (glong) 8);
				_tmp37_ = _tmp36_;
				_tmp38_ = g_strcmp0 (_tmp37_, "DELETE 1") == 0;
				_g_free0 (_tmp37_);
				if (_tmp38_) {
					gtk_main_quit ();
				} else {
					gchar* _tmp39_;
					gchar* _tmp40_;
					gboolean _tmp41_;
					_tmp39_ = string_slice (msg, (glong) 0, (glong) 8);
					_tmp40_ = _tmp39_;
					_tmp41_ = g_strcmp0 (_tmp40_, "DELETE 0") == 0;
					_g_free0 (_tmp40_);
					if (_tmp41_) {
						my_grid_add_text (self, _ ("[Operate Fail]"), FALSE, FALSE);
					} else {
						gchar* _tmp42_;
						gchar* _tmp43_;
						gboolean _tmp44_;
						_tmp42_ = string_slice (msg, (glong) 0, (glong) 8);
						_tmp43_ = _tmp42_;
						_tmp44_ = g_strcmp0 (_tmp43_, "ConnDown") == 0;
						_g_free0 (_tmp43_);
						if (_tmp44_) {
							GtkMessageDialog* dlg_about = NULL;
							AppWin* _tmp45_;
							GtkMessageDialog* _tmp46_;
							GtkMessageDialog* _tmp47_;
							GtkMessageDialog* _tmp48_;
							GtkMessageDialog* _tmp49_;
							GtkMessageDialog* _tmp50_;
							_tmp45_ = app;
							_tmp46_ = (GtkMessageDialog*) gtk_message_dialog_new ((GtkWindow*) _tmp45_, GTK_DIALOG_MODAL, GTK_MESSAGE_INFO, GTK_BUTTONS_OK, NULL);
							g_object_ref_sink (_tmp46_);
							dlg_about = _tmp46_;
							_tmp47_ = dlg_about;
							g_object_set (_tmp47_, "text", _ ("Warning"), NULL);
							_tmp48_ = dlg_about;
							g_object_set (_tmp48_, "secondary-text", _ ("Disconnected from Server!\nPlease Restart powerchat!"), NULL);
							_tmp49_ = dlg_about;
							gtk_dialog_run ((GtkDialog*) _tmp49_);
							_tmp50_ = dlg_about;
							gtk_widget_destroy ((GtkWidget*) _tmp50_);
							_g_object_unref0 (dlg_about);
						}
					}
				}
			}
		}
		return;
	}
	_tmp51_ = string_slice (msg, (glong) 0, (glong) 4);
	typ1 = _tmp51_;
	_tmp52_ = strlen (msg);
	_tmp53_ = _tmp52_;
	_tmp54_ = string_slice (msg, (glong) 4, (glong) _tmp53_);
	msg1 = _tmp54_;
	_tmp55_ = g_strdup ("");
	fname = _tmp55_;
	fsex = (gint16) 2;
	_tmp56_ = self->frds1;
	_tmp57_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
	_tmp58_ = _tmp57_;
	_tmp59_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp56_, _tmp58_);
	_tmp60_ = (UserMsg*) _tmp59_;
	_g_free0 (_tmp58_);
	u = _tmp60_;
	_tmp61_ = self->priv->boxes;
	_tmp62_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
	_tmp63_ = _tmp62_;
	_tmp64_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp61_, _tmp63_);
	_tmp65_ = (GtkListBox*) _tmp64_;
	_g_free0 (_tmp63_);
	display = _tmp65_;
	_tmp66_ = self->priv->msgs;
	_tmp67_ = _g_object_ref0 (_tmp66_);
	bak_msgs = _tmp67_;
	_tmp68_ = u;
	if (_tmp68_ != NULL) {
		UserMsg* _tmp69_;
		const gchar* _tmp70_;
		gchar* _tmp71_;
		UserMsg* _tmp72_;
		gint _tmp73_;
		GtkListBox* _tmp74_;
		GtkListBox* _tmp75_;
		_tmp69_ = u;
		_tmp70_ = (*_tmp69_).name;
		_tmp71_ = g_strdup (_tmp70_);
		_g_free0 (fname);
		fname = _tmp71_;
		_tmp72_ = u;
		_tmp73_ = (*_tmp72_).sex;
		fsex = (gint16) _tmp73_;
		_tmp74_ = display;
		_tmp75_ = _g_object_ref0 (_tmp74_);
		_g_object_unref0 (self->priv->msgs);
		self->priv->msgs = _tmp75_;
	} else {
		const gchar* _tmp76_;
		_tmp76_ = typ1;
		if (g_strcmp0 (_tmp76_, "TEXT") == 0) {
			gchar* _tmp77_;
			gchar* _tmp78_;
			gchar* _tmp79_;
			ChatClient* _tmp80_;
			const gchar* _tmp81_;
			GtkListBox* _tmp82_;
			GtkListBox* _tmp83_;
			_tmp77_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
			_tmp78_ = _tmp77_;
			_tmp79_ = g_strconcat ("ID:", _tmp78_, NULL);
			_g_free0 (fname);
			fname = _tmp79_;
			_g_free0 (_tmp78_);
			_tmp80_ = client;
			_tmp81_ = msg1;
			chat_client_offline_msg_with_id (_tmp80_, from, _tmp81_);
			_tmp82_ = bak_msgs;
			_tmp83_ = _g_object_ref0 (_tmp82_);
			_g_object_unref0 (self->priv->msgs);
			self->priv->msgs = _tmp83_;
			_g_object_unref0 (bak_msgs);
			_g_object_unref0 (display);
			_user_msg_free0 (u);
			_g_free0 (fname);
			_g_free0 (msg1);
			_g_free0 (typ1);
			return;
		} else {
			const gchar* _tmp84_;
			_tmp84_ = typ1;
			if (g_strcmp0 (_tmp84_, "JSON") == 0) {
				gchar* _tmp85_;
				gchar* _tmp86_;
				gchar* _tmp87_;
				_tmp85_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
				_tmp86_ = _tmp85_;
				_tmp87_ = g_strconcat ("ID:", _tmp86_, NULL);
				_g_free0 (fname);
				fname = _tmp87_;
				_g_free0 (_tmp86_);
			}
		}
	}
	_tmp88_ = typ1;
	_tmp89_ = _tmp88_;
	_tmp91_ = (NULL == _tmp89_) ? 0 : g_quark_from_string (_tmp89_);
	if (_tmp91_ == ((0 != _tmp90_label0) ? _tmp90_label0 : (_tmp90_label0 = g_quark_from_static_string ("TEXT")))) {
		switch (0) {
			default:
			{
				const gchar* _tmp92_;
				gint16 _tmp93_;
				const gchar* _tmp94_;
				gchar* _tmp95_;
				gchar* _tmp96_;
				const gchar* _tmp97_;
				_tmp92_ = fname;
				_tmp93_ = fsex;
				my_grid_add_right_name_icon (self, _tmp92_, _tmp93_);
				_tmp94_ = msg1;
				my_grid_add_text (self, _tmp94_, FALSE, FALSE);
				_tmp95_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
				_tmp96_ = _tmp95_;
				my_grid_msg_mark (self, _tmp96_);
				_g_free0 (_tmp96_);
				_tmp97_ = fname;
				msg_notify (_tmp97_);
				break;
			}
		}
	} else if (_tmp91_ == ((0 != _tmp90_label1) ? _tmp90_label1 : (_tmp90_label1 = g_quark_from_static_string ("JSON")))) {
		switch (0) {
			default:
			{
				JsonParser* p2 = NULL;
				JsonParser* _tmp98_;
				gboolean _tmp99_ = FALSE;
				JsonParser* _tmp100_;
				const gchar* _tmp101_;
				JsonNode* node2 = NULL;
				JsonParser* _tmp102_;
				JsonNode* _tmp103_;
				JsonNode* _tmp104_;
				JsonNode* _tmp105_;
				JsonObject* obj2 = NULL;
				JsonNode* _tmp106_;
				JsonObject* _tmp107_;
				JsonObject* _tmp108_;
				gchar* name1 = NULL;
				JsonObject* _tmp109_;
				const gchar* _tmp110_;
				gchar* _tmp111_;
				gchar* mime1 = NULL;
				JsonObject* _tmp112_;
				const gchar* _tmp113_;
				gchar* _tmp114_;
				const gchar* _tmp115_;
				gint16 _tmp116_;
				const gchar* _tmp117_;
				gchar* _tmp118_;
				gchar* _tmp119_;
				gboolean _tmp120_;
				const gchar* _tmp122_;
				gchar* _tmp123_;
				gchar* _tmp124_;
				const gchar* _tmp125_;
				gchar* _tmp126_;
				gchar* _tmp127_;
				GtkListBox* _tmp128_;
				const gchar* _tmp129_;
				_tmp98_ = json_parser_new ();
				p2 = _tmp98_;
				_tmp100_ = p2;
				_tmp101_ = msg1;
				_tmp99_ = json_parser_load_from_data (_tmp100_, _tmp101_, (gssize) -1, &_inner_error0_);
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
					_g_object_unref0 (p2);
					_g_object_unref0 (bak_msgs);
					_g_object_unref0 (display);
					_user_msg_free0 (u);
					_g_free0 (fname);
					_g_free0 (msg1);
					_g_free0 (typ1);
					g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
					g_clear_error (&_inner_error0_);
					return;
				}
				if (_tmp99_ == FALSE) {
					_g_object_unref0 (p2);
					break;
				}
				_tmp102_ = p2;
				_tmp103_ = json_parser_get_root (_tmp102_);
				_tmp104_ = __vala_JsonNode_copy0 (_tmp103_);
				node2 = _tmp104_;
				_tmp105_ = node2;
				if (_tmp105_ == NULL) {
					__vala_JsonNode_free0 (node2);
					_g_object_unref0 (p2);
					break;
				}
				_tmp106_ = node2;
				_tmp107_ = json_node_get_object (_tmp106_);
				_tmp108_ = _json_object_ref0 (_tmp107_);
				obj2 = _tmp108_;
				_tmp109_ = obj2;
				_tmp110_ = json_object_get_string_member (_tmp109_, "Name");
				_tmp111_ = g_strdup (_tmp110_);
				name1 = _tmp111_;
				_tmp112_ = obj2;
				_tmp113_ = json_object_get_string_member (_tmp112_, "Mime");
				_tmp114_ = g_strdup (_tmp113_);
				mime1 = _tmp114_;
				_tmp115_ = fname;
				_tmp116_ = fsex;
				my_grid_add_right_name_icon (self, _tmp115_, _tmp116_);
				_tmp117_ = mime1;
				_tmp118_ = string_slice (_tmp117_, (glong) 0, (glong) 5);
				_tmp119_ = _tmp118_;
				_tmp120_ = g_strcmp0 (_tmp119_, "image") == 0;
				_g_free0 (_tmp119_);
				if (_tmp120_) {
					const gchar* _tmp121_;
					_tmp121_ = name1;
					my_grid_add_image (self, _tmp121_);
				}
				_tmp122_ = name1;
				_tmp123_ = g_path_get_basename (_tmp122_);
				_tmp124_ = _tmp123_;
				my_grid_add_text (self, _tmp124_, TRUE, FALSE);
				_g_free0 (_tmp124_);
				_tmp125_ = name1;
				my_grid_add_operate_buttons (self, _tmp125_);
				_tmp126_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
				_tmp127_ = _tmp126_;
				my_grid_msg_mark (self, _tmp127_);
				_g_free0 (_tmp127_);
				_tmp128_ = self->priv->msgs;
				gtk_widget_show_all ((GtkWidget*) _tmp128_);
				_tmp129_ = fname;
				msg_notify (_tmp129_);
				_g_free0 (mime1);
				_g_free0 (name1);
				_json_object_unref0 (obj2);
				__vala_JsonNode_free0 (node2);
				_g_object_unref0 (p2);
				break;
			}
		}
	} else if (_tmp91_ == ((0 != _tmp90_label2) ? _tmp90_label2 : (_tmp90_label2 = g_quark_from_static_string ("LOGI")))) {
		switch (0) {
			default:
			{
				UserMsg* _tmp130_;
				_tmp130_ = u;
				if (_tmp130_ == NULL) {
					break;
				}
				my_grid_user_online (self, from);
				break;
			}
		}
	}
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda25__gsource_func, g_object_ref (self), g_object_unref);
	_tmp131_ = bak_msgs;
	_tmp132_ = _g_object_ref0 (_tmp131_);
	_g_object_unref0 (self->priv->msgs);
	self->priv->msgs = _tmp132_;
	_g_object_unref0 (bak_msgs);
	_g_object_unref0 (display);
	_user_msg_free0 (u);
	_g_free0 (fname);
	_g_free0 (msg1);
	_g_free0 (typ1);
}


void
my_grid_user_online (MyGrid* self,
                     gint64 uid1)
{
	GtkGrid* grid = NULL;
	GeeHashMap* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gpointer _tmp3_;
	GtkGrid* _tmp4_;
	GtkGrid* _tmp5_;
	GtkStyleContext* sc3 = NULL;
	GtkStyleContext* _tmp6_;
	GtkStyleContext* _tmp7_;
	GtkCssProvider* _tmp8_;
	GtkListBox* _tmp9_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->frd_boxes;
	_tmp1_ = g_strdup_printf ("%" G_GINT64_FORMAT, uid1);
	_tmp2_ = _tmp1_;
	_tmp3_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp0_, _tmp2_);
	_tmp4_ = _g_object_ref0 ((GtkGrid*) _tmp3_);
	_tmp5_ = _tmp4_;
	_g_free0 (_tmp2_);
	grid = _tmp5_;
	_tmp6_ = gtk_widget_get_style_context ((GtkWidget*) grid);
	_tmp7_ = _g_object_ref0 (_tmp6_);
	sc3 = _tmp7_;
	_tmp8_ = self->provider1;
	gtk_style_context_remove_provider (sc3, (GtkStyleProvider*) _tmp8_);
	gtk_style_context_remove_class (sc3, "off");
	_tmp9_ = self->priv->friends;
	gtk_list_box_invalidate_sort (_tmp9_);
	_g_object_unref0 (sc3);
	_g_object_unref0 (grid);
}


void
my_grid_user_offline (MyGrid* self,
                      gint64 uid1)
{
	GtkGrid* grid = NULL;
	GeeHashMap* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gpointer _tmp3_;
	GtkGrid* _tmp4_;
	GtkGrid* _tmp5_;
	GtkStyleContext* sc3 = NULL;
	GtkGrid* _tmp6_;
	GtkStyleContext* _tmp7_;
	GtkStyleContext* _tmp8_;
	GtkStyleContext* _tmp9_;
	GtkCssProvider* _tmp10_;
	GtkStyleContext* _tmp11_;
	GtkListBox* _tmp13_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->frd_boxes;
	_tmp1_ = g_strdup_printf ("%" G_GINT64_FORMAT, uid1);
	_tmp2_ = _tmp1_;
	_tmp3_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp0_, _tmp2_);
	_tmp4_ = _g_object_ref0 ((GtkGrid*) _tmp3_);
	_tmp5_ = _tmp4_;
	_g_free0 (_tmp2_);
	grid = _tmp5_;
	_tmp6_ = grid;
	_tmp7_ = gtk_widget_get_style_context ((GtkWidget*) _tmp6_);
	_tmp8_ = _g_object_ref0 (_tmp7_);
	sc3 = _tmp8_;
	_tmp9_ = sc3;
	_tmp10_ = self->provider1;
	gtk_style_context_add_provider (_tmp9_, (GtkStyleProvider*) _tmp10_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	_tmp11_ = sc3;
	if (gtk_style_context_has_class (_tmp11_, "off") == FALSE) {
		GtkStyleContext* _tmp12_;
		_tmp12_ = sc3;
		gtk_style_context_add_class (_tmp12_, "off");
	}
	_tmp13_ = self->priv->friends;
	gtk_list_box_invalidate_sort (_tmp13_);
	_g_object_unref0 (sc3);
	_g_object_unref0 (grid);
}


void
my_grid_msg_mark (MyGrid* self,
                  const gchar* uid)
{
	GtkListBoxRow* r = NULL;
	GeeHashMap* _tmp0_;
	gpointer _tmp1_;
	GtkContainer* _tmp2_;
	GtkListBoxRow* _tmp3_;
	AppWin* _tmp4_;
	gint _tmp5_;
	GtkListBoxRow* _tmp7_;
	GtkGrid* grid = NULL;
	GeeHashMap* _tmp8_;
	gpointer _tmp9_;
	GtkGrid* _tmp10_;
	GtkStyleContext* sc3 = NULL;
	GtkGrid* _tmp11_;
	GtkStyleContext* _tmp12_;
	GtkStyleContext* _tmp13_;
	GtkStyleContext* _tmp14_;
	GtkCssProvider* _tmp15_;
	GtkStyleContext* _tmp16_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (uid != NULL);
	_tmp0_ = self->priv->frd_boxes;
	_tmp1_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp0_, uid);
	_tmp2_ = gtk_widget_get_parent ((GtkWidget*) ((GtkGrid*) _tmp1_));
	_tmp3_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp2_, gtk_list_box_row_get_type ()) ? ((GtkListBoxRow*) _tmp2_) : NULL);
	r = _tmp3_;
	_tmp4_ = app;
	_tmp5_ = _tmp4_->counter;
	if (_tmp5_ == 1) {
		AppWin* _tmp6_;
		_tmp6_ = app;
		app_win_tray_notify (_tmp6_);
	}
	_tmp7_ = r;
	if (gtk_list_box_row_is_selected (_tmp7_)) {
		_g_object_unref0 (r);
		return;
	}
	_tmp8_ = self->priv->frd_boxes;
	_tmp9_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp8_, uid);
	_tmp10_ = _g_object_ref0 ((GtkGrid*) _tmp9_);
	grid = _tmp10_;
	_tmp11_ = grid;
	_tmp12_ = gtk_widget_get_style_context ((GtkWidget*) _tmp11_);
	_tmp13_ = _g_object_ref0 (_tmp12_);
	sc3 = _tmp13_;
	_tmp14_ = sc3;
	_tmp15_ = self->mark1;
	gtk_style_context_add_provider (_tmp14_, (GtkStyleProvider*) _tmp15_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	_tmp16_ = sc3;
	if (gtk_style_context_has_class (_tmp16_, "mark") == FALSE) {
		GtkStyleContext* _tmp17_;
		gint _tmp18_;
		gint _tmp19_;
		AppWin* _tmp21_;
		gint _tmp22_;
		gchar* _tmp23_;
		gchar* _tmp24_;
		gchar* _tmp25_;
		gchar* _tmp26_;
		gchar* _tmp27_;
		gchar* _tmp28_;
		gchar* _tmp29_;
		gchar* _tmp30_;
		const gchar* _tmp31_;
		const gchar* _tmp32_;
		const gchar* _tmp33_;
		const gchar* _tmp34_;
		gchar* _tmp35_;
		gchar* _tmp36_;
		gchar* _tmp37_;
		gchar* _tmp38_;
		GtkGrid* _tmp39_;
		_tmp17_ = sc3;
		gtk_style_context_add_class (_tmp17_, "mark");
		_tmp18_ = self->mark_num;
		self->mark_num = _tmp18_ + 1;
		_tmp19_ = self->mark_num;
		if (_tmp19_ == 1) {
			AppWin* _tmp20_;
			_tmp20_ = app;
			app_win_tray_notify (_tmp20_);
		}
		_tmp21_ = app;
		_tmp22_ = self->mark_num;
		_tmp23_ = g_strdup_printf ("%i", _tmp22_);
		_tmp24_ = _tmp23_;
		_tmp25_ = g_strconcat ("(", _tmp24_, ")", NULL);
		_tmp26_ = _tmp25_;
		_tmp27_ = g_strconcat (_ ("Everyone Publish!"), _tmp26_, NULL);
		_tmp28_ = _tmp27_;
		_tmp29_ = g_strconcat (_tmp28_, " - ", NULL);
		_tmp30_ = _tmp29_;
		_tmp31_ = self->uname;
		_tmp32_ = string_to_string (_tmp31_);
		_tmp33_ = self->host;
		_tmp34_ = string_to_string (_tmp33_);
		_tmp35_ = g_strconcat (_tmp32_, "@", _tmp34_, NULL);
		_tmp36_ = _tmp35_;
		_tmp37_ = g_strconcat (_tmp30_, _tmp36_, NULL);
		_tmp38_ = _tmp37_;
		gtk_window_set_title ((GtkWindow*) _tmp21_, _tmp38_);
		_g_free0 (_tmp38_);
		_g_free0 (_tmp36_);
		_g_free0 (_tmp30_);
		_g_free0 (_tmp28_);
		_g_free0 (_tmp26_);
		_g_free0 (_tmp24_);
		_tmp39_ = grid;
		gtk_widget_show_all ((GtkWidget*) _tmp39_);
	} else {
		GtkGrid* _tmp40_;
		_tmp40_ = grid;
		gtk_widget_show_all ((GtkWidget*) _tmp40_);
	}
	_g_object_unref0 (sc3);
	_g_object_unref0 (grid);
	_g_object_unref0 (r);
}


static void
my_grid_class_init (MyGridClass * klass)
{
	my_grid_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &MyGrid_private_offset);
	G_OBJECT_CLASS (klass)->finalize = my_grid_finalize;
}


static void
my_grid_instance_init (MyGrid * self)
{
	const gchar* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	GeeHashMap* _tmp4_;
	gchar* _tmp5_;
	self->priv = my_grid_get_instance_private (self);
	self->priv->msgs = NULL;
	self->priv->running = TRUE;
	self->mark_num = 0;
	_tmp0_ = prog_path;
	_tmp1_ = g_build_path (G_DIR_SEPARATOR_S, _tmp0_, "..", "share", "icons", "powerchat", "man.png", NULL);
	self->man_icon = _tmp1_;
	_tmp2_ = prog_path;
	_tmp3_ = g_build_path (G_DIR_SEPARATOR_S, _tmp2_, "..", "share", "icons", "powerchat", "woman.png", NULL);
	self->woman_icon = _tmp3_;
	_tmp4_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, gtk_list_box_get_type (), (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
	self->priv->boxes = _tmp4_;
	_tmp5_ = g_strdup ("");
	self->priv->pressed = _tmp5_;
}


static void
my_grid_finalize (GObject * obj)
{
	MyGrid * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_MY_GRID, MyGrid);
	_g_object_unref0 (self->priv->friends);
	_g_object_unref0 (self->priv->msgs);
	_g_object_unref0 (self->priv->entry1);
	_g_object_unref0 (self->priv->droplabel);
	_g_object_unref0 (self->port1);
	_g_object_unref0 (self->mygrid);
	_g_object_unref0 (self->frds1);
	_g_object_unref0 (self->priv->frd_boxes);
	_g_object_unref0 (self->provider1);
	_g_object_unref0 (self->mark1);
	_g_object_unref0 (self->name_css);
	_g_object_unref0 (self->button1);
	_g_object_unref0 (self->link_css1);
	_g_object_unref0 (self->strangers_btn);
	_g_object_unref0 (self->user_btn);
	_g_object_unref0 (self->msend_btn);
	_g_free0 (self->man_icon);
	_g_free0 (self->woman_icon);
	_g_free0 (self->uname);
	_g_free0 (self->udesc);
	_g_free0 (self->host);
	_g_object_unref0 (self->priv->cssp);
	_g_object_unref0 (self->priv->msg_win);
	_g_object_unref0 (self->priv->boxes);
	_g_free0 (self->priv->pressed);
	G_OBJECT_CLASS (my_grid_parent_class)->finalize (obj);
}


GType
my_grid_get_type (void)
{
	static volatile gsize my_grid_type_id__volatile = 0;
	if (g_once_init_enter (&my_grid_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (MyGridClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) my_grid_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (MyGrid), 0, (GInstanceInitFunc) my_grid_instance_init, NULL };
		GType my_grid_type_id;
		my_grid_type_id = g_type_register_static (G_TYPE_OBJECT, "MyGrid", &g_define_type_info, 0);
		MyGrid_private_offset = g_type_add_instance_private (my_grid_type_id, sizeof (MyGridPrivate));
		g_once_init_leave (&my_grid_type_id__volatile, my_grid_type_id);
	}
	return my_grid_type_id__volatile;
}


void
msg_notify (const gchar* uname)
{
	GtkApplication* app = NULL;
	GtkApplication* _tmp0_;
	GtkApplication* _tmp1_;
	GNotification* notify1 = NULL;
	GNotification* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	g_return_if_fail (uname != NULL);
	_tmp0_ = application1;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	app = _tmp1_;
	g_application_hold ((GApplication*) app);
	_tmp2_ = g_notification_new (_ ("New message"));
	notify1 = _tmp2_;
	_tmp3_ = g_strconcat (_ ("From: "), uname, NULL);
	_tmp4_ = _tmp3_;
	g_notification_set_body (notify1, _tmp4_);
	_g_free0 (_tmp4_);
	g_notification_set_default_action (notify1, "app.show-win");
	g_application_send_notification ((GApplication*) app, NULL, notify1);
	g_application_release ((GApplication*) app);
	_g_object_unref0 (notify1);
	_g_object_unref0 (app);
}


void
version_notify (void)
{
	GtkApplication* app = NULL;
	GtkApplication* _tmp0_;
	GtkApplication* _tmp1_;
	GNotification* notify1 = NULL;
	GNotification* _tmp2_;
	_tmp0_ = application1;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	app = _tmp1_;
	g_application_hold ((GApplication*) app);
	_tmp2_ = g_notification_new (_ ("New Version Released!"));
	notify1 = _tmp2_;
	g_notification_set_body (notify1, _ ("Click here or click menu item 'Help->Upgrade' to get new version."));
	g_notification_set_default_action (notify1, "app.down-page");
	g_application_send_notification ((GApplication*) app, NULL, notify1);
	g_application_release ((GApplication*) app);
	_g_object_unref0 (notify1);
	_g_object_unref0 (app);
}


static inline gpointer
app_win_get_instance_private (AppWin* self)
{
	return G_STRUCT_MEMBER_P (self, AppWin_private_offset);
}


static void
__lambda4_ (AppWin* self)
{
	gint _tmp0_;
	_tmp0_ = self->counter;
	if (_tmp0_ == 0) {
		gtk_widget_hide ((GtkWidget*) self);
		self->counter = 1;
	} else {
		gtk_widget_show ((GtkWidget*) self);
		self->counter = 0;
		gtk_window_set_keep_above ((GtkWindow*) self, TRUE);
	}
}


static void
___lambda4__gtk_status_icon_activate (GtkStatusIcon* _sender,
                                      gpointer self)
{
	__lambda4_ ((AppWin*) self);
}


static void
__lambda5_ (AppWin* self,
            GtkWidget* w)
{
	gtk_window_set_keep_above ((GtkWindow*) self, FALSE);
}


static void
___lambda5__gtk_container_set_focus_child (GtkContainer* _sender,
                                           GtkWidget* child,
                                           gpointer self)
{
	__lambda5_ ((AppWin*) self, child);
}


static void
__lambda6_ (AppWin* self)
{
	GtkStatusIcon* _tmp0_;
	MyGrid* _tmp1_;
	gint _tmp2_;
	_tmp0_ = self->priv->tray1;
	gtk_status_icon_set_visible (_tmp0_, TRUE);
	_tmp1_ = grid1;
	_tmp2_ = _tmp1_->mark_num;
	if (_tmp2_ == 0) {
		app_win_clear_notify (self);
	}
}


static void
___lambda6__gtk_widget_show (GtkWidget* _sender,
                             gpointer self)
{
	__lambda6_ ((AppWin*) self);
}


static gboolean
__lambda59_ (AppWin* self,
             GdkEventAny* e)
{
	gboolean result = FALSE;
	g_return_val_if_fail (e != NULL, FALSE);
	self->counter = 1;
	result = gtk_widget_hide_on_delete ((GtkWidget*) self);
	return result;
}


static gboolean
___lambda59__gtk_widget_delete_event (GtkWidget* _sender,
                                      GdkEventAny* event,
                                      gpointer self)
{
	gboolean result;
	result = __lambda59_ ((AppWin*) self, event);
	return result;
}


AppWin*
app_win_construct (GType object_type)
{
	AppWin * self = NULL;
	GtkApplication* _tmp0_;
	gchar* icon_path = NULL;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	const gchar* _tmp3_;
	GdkPixbuf* _tmp4_ = NULL;
	const gchar* _tmp5_;
	GdkPixbuf* _tmp6_;
	GdkPixbuf* _tmp7_;
	GdkPixbuf* _tmp8_ = NULL;
	const gchar* _tmp9_;
	gchar* _tmp10_;
	gchar* _tmp11_;
	GdkPixbuf* _tmp12_;
	GdkPixbuf* _tmp13_;
	GdkPixbuf* _tmp14_;
	GdkPixbuf* _tmp15_;
	GtkStatusIcon* _tmp16_;
	GtkStatusIcon* _tmp17_;
	GtkStatusIcon* _tmp18_;
	GtkVBox* _tmp19_;
	GtkVBox* _tmp20_;
	GError* _inner_error0_ = NULL;
	self = (AppWin*) g_object_new (object_type, NULL);
	_tmp0_ = application1;
	gtk_application_add_window (_tmp0_, G_TYPE_CHECK_INSTANCE_TYPE (self, gtk_window_get_type ()) ? ((GtkWindow*) self) : NULL);
	gtk_window_set_title ((GtkWindow*) self, _ ("Everyone Publish!"));
	g_object_set ((GtkWindow*) self, "window-position", GTK_WIN_POS_CENTER, NULL);
	gtk_window_set_default_size ((GtkWindow*) self, 640, 480);
	gtk_window_set_hide_titlebar_when_maximized ((GtkWindow*) self, TRUE);
	gtk_window_set_resizable ((GtkWindow*) self, FALSE);
	_tmp1_ = prog_path;
	_tmp2_ = g_build_path (G_DIR_SEPARATOR_S, _tmp1_, "..", "share", "icons", "powerchat", "tank.png", NULL);
	icon_path = _tmp2_;
	_tmp3_ = icon_path;
	gtk_window_set_icon_from_file ((GtkWindow*) self, _tmp3_, &_inner_error0_);
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_free0 (icon_path);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return NULL;
	}
	_tmp5_ = icon_path;
	_tmp6_ = gdk_pixbuf_new_from_file (_tmp5_, &_inner_error0_);
	_tmp4_ = _tmp6_;
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_free0 (icon_path);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return NULL;
	}
	_tmp7_ = _tmp4_;
	_tmp4_ = NULL;
	_g_object_unref0 (self->priv->icon1);
	self->priv->icon1 = _tmp7_;
	_tmp9_ = prog_path;
	_tmp10_ = g_build_path (G_DIR_SEPARATOR_S, _tmp9_, "..", "share", "icons", "powerchat", "msg.png", NULL);
	_tmp11_ = _tmp10_;
	_tmp12_ = gdk_pixbuf_new_from_file (_tmp11_, &_inner_error0_);
	_tmp13_ = _tmp12_;
	_g_free0 (_tmp11_);
	_tmp8_ = _tmp13_;
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_object_unref0 (_tmp4_);
		_g_free0 (icon_path);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return NULL;
	}
	_tmp14_ = _tmp8_;
	_tmp8_ = NULL;
	_g_object_unref0 (self->priv->icon2);
	self->priv->icon2 = _tmp14_;
	_tmp15_ = self->priv->icon1;
	_tmp16_ = gtk_status_icon_new_from_pixbuf (_tmp15_);
	_g_object_unref0 (self->priv->tray1);
	self->priv->tray1 = _tmp16_;
	_tmp17_ = self->priv->tray1;
	gtk_status_icon_set_visible (_tmp17_, FALSE);
	_tmp18_ = self->priv->tray1;
	g_signal_connect_object (_tmp18_, "activate", (GCallback) ___lambda4__gtk_status_icon_activate, self, 0);
	g_signal_connect_object ((GtkContainer*) self, "set-focus-child", (GCallback) ___lambda5__gtk_container_set_focus_child, self, 0);
	g_signal_connect_object ((GtkWidget*) self, "show", (GCallback) ___lambda6__gtk_widget_show, self, 0);
	gtk_window_set_destroy_with_parent ((GtkWindow*) self, FALSE);
	g_signal_connect_object ((GtkWidget*) self, "delete-event", (GCallback) ___lambda59__gtk_widget_delete_event, self, 0);
	_tmp19_ = (GtkVBox*) gtk_vbox_new (FALSE, 0);
	g_object_ref_sink (_tmp19_);
	_g_object_unref0 (self->priv->box1);
	self->priv->box1 = _tmp19_;
	_tmp20_ = self->priv->box1;
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp20_);
	app_win_setup_menubar (self);
	_g_object_unref0 (_tmp8_);
	_g_object_unref0 (_tmp4_);
	_g_free0 (icon_path);
	return self;
}


AppWin*
app_win_new (void)
{
	return app_win_construct (TYPE_APP_WIN);
}


void
app_win_update_tooltip (AppWin* self)
{
	GtkStatusIcon* _tmp0_;
	gchar* _tmp1_;
	gchar* _tmp2_;
	MyGrid* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
	MyGrid* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	gchar* _tmp11_;
	gchar* _tmp12_;
	gchar* _tmp13_;
	gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->tray1;
	_tmp1_ = g_strconcat (_ ("Everyone Publish!"), " - ", NULL);
	_tmp2_ = _tmp1_;
	_tmp3_ = grid1;
	_tmp4_ = _tmp3_->uname;
	_tmp5_ = string_to_string (_tmp4_);
	_tmp6_ = grid1;
	_tmp7_ = _tmp6_->host;
	_tmp8_ = string_to_string (_tmp7_);
	_tmp9_ = g_strconcat (_tmp5_, "@", _tmp8_, NULL);
	_tmp10_ = _tmp9_;
	_tmp11_ = g_strconcat (_tmp2_, _tmp10_, NULL);
	_tmp12_ = _tmp11_;
	_tmp13_ = g_strconcat (_tmp12_, "\n", NULL);
	_tmp14_ = _tmp13_;
	_tmp15_ = g_strconcat (_tmp14_, _ ("(Click to Hide/Show)"), NULL);
	_tmp16_ = _tmp15_;
	gtk_status_icon_set_tooltip_text (_tmp0_, _tmp16_);
	_g_free0 (_tmp16_);
	_g_free0 (_tmp14_);
	_g_free0 (_tmp12_);
	_g_free0 (_tmp10_);
	_g_free0 (_tmp2_);
}


void
app_win_tray_notify (AppWin* self)
{
	GtkStatusIcon* _tmp0_;
	GdkPixbuf* _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->tray1;
	_tmp1_ = self->priv->icon2;
	gtk_status_icon_set_from_pixbuf (_tmp0_, _tmp1_);
}


void
app_win_clear_notify (AppWin* self)
{
	GtkStatusIcon* _tmp0_;
	GdkPixbuf* _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->tray1;
	_tmp1_ = self->priv->icon1;
	gtk_status_icon_set_from_pixbuf (_tmp0_, _tmp1_);
}


void
app_win_append (AppWin* self,
                GtkWidget* w)
{
	GtkVBox* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (w != NULL);
	_tmp0_ = self->priv->box1;
	gtk_box_pack_start ((GtkBox*) _tmp0_, w, TRUE, TRUE, (guint) 0);
}


void
app_win_setup_menubar (AppWin* self)
{
	GMenu* menu1 = NULL;
	GMenu* _tmp0_;
	GMenu* menubar = NULL;
	GMenu* _tmp1_;
	GMenuItem* item1 = NULL;
	GMenuItem* _tmp2_;
	GMenu* _tmp3_;
	GMenuItem* _tmp4_;
	GMenuItem* _tmp5_;
	GMenu* _tmp6_;
	GMenuItem* _tmp7_;
	GMenuItem* _tmp8_;
	GMenu* _tmp9_;
	GMenuItem* _tmp10_;
	GMenuItem* _tmp11_;
	GMenu* _tmp12_;
	GMenuItem* _tmp13_;
	GMenuItem* _tmp14_;
	GMenu* _tmp15_;
	GMenuItem* _tmp16_;
	GMenuItem* _tmp17_;
	GMenu* _tmp18_;
	GMenuItem* _tmp19_;
	GMenu* _tmp20_;
	GMenu* _tmp21_;
	GMenuItem* _tmp22_;
	GMenu* _tmp23_;
	GMenuItem* _tmp24_;
	GMenuItem* _tmp25_;
	GMenu* _tmp26_;
	GMenuItem* _tmp27_;
	GMenuItem* _tmp28_;
	GMenu* _tmp29_;
	GMenuItem* _tmp30_;
	GMenuItem* _tmp31_;
	GMenu* _tmp32_;
	GMenuItem* _tmp33_;
	GMenuItem* _tmp34_;
	GMenu* _tmp35_;
	GMenuItem* _tmp36_;
	GMenuItem* _tmp37_;
	GMenu* _tmp38_;
	GMenuItem* _tmp39_;
	GMenu* _tmp40_;
	GtkApplication* _tmp41_;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_menu_new ();
	menu1 = _tmp0_;
	_tmp1_ = g_menu_new ();
	menubar = _tmp1_;
	_tmp2_ = g_menu_item_new (_ ("PreviewWeb"), "app.preview-web");
	item1 = _tmp2_;
	_tmp3_ = menu1;
	_tmp4_ = item1;
	g_menu_append_item (_tmp3_, _tmp4_);
	_tmp5_ = g_menu_item_new (_ ("OpenBlogDir"), "app.blog-dir");
	_g_object_unref0 (item1);
	item1 = _tmp5_;
	_tmp6_ = menu1;
	_tmp7_ = item1;
	g_menu_append_item (_tmp6_, _tmp7_);
	_tmp8_ = g_menu_item_new (_ ("OpenDownloadDir"), "app.down-dir");
	_g_object_unref0 (item1);
	item1 = _tmp8_;
	_tmp9_ = menu1;
	_tmp10_ = item1;
	g_menu_append_item (_tmp9_, _tmp10_);
	_tmp11_ = g_menu_item_new (_ ("ModifyDesc"), "app.modify-desc");
	_g_object_unref0 (item1);
	item1 = _tmp11_;
	_tmp12_ = menu1;
	_tmp13_ = item1;
	g_menu_append_item (_tmp12_, _tmp13_);
	_tmp14_ = g_menu_item_new (_ ("UpdatePasswd"), "app.update-pwd");
	_g_object_unref0 (item1);
	item1 = _tmp14_;
	_tmp15_ = menu1;
	_tmp16_ = item1;
	g_menu_append_item (_tmp15_, _tmp16_);
	_tmp17_ = g_menu_item_new (_ ("Quit"), "app.quit");
	_g_object_unref0 (item1);
	item1 = _tmp17_;
	_tmp18_ = menu1;
	_tmp19_ = item1;
	g_menu_append_item (_tmp18_, _tmp19_);
	_tmp20_ = menu1;
	g_menu_append_submenu (menubar, _ ("Operate"), (GMenuModel*) _tmp20_);
	_tmp21_ = g_menu_new ();
	_g_object_unref0 (menu1);
	menu1 = _tmp21_;
	_tmp22_ = g_menu_item_new (_ ("Homepage"), "app.homepage");
	_g_object_unref0 (item1);
	item1 = _tmp22_;
	_tmp23_ = menu1;
	_tmp24_ = item1;
	g_menu_append_item (_tmp23_, _tmp24_);
	_tmp25_ = g_menu_item_new (_ ("Wiki"), "app.wiki");
	_g_object_unref0 (item1);
	item1 = _tmp25_;
	_tmp26_ = menu1;
	_tmp27_ = item1;
	g_menu_append_item (_tmp26_, _tmp27_);
	_tmp28_ = g_menu_item_new (_ ("Upgrade"), "app.down-page");
	_g_object_unref0 (item1);
	item1 = _tmp28_;
	_tmp29_ = menu1;
	_tmp30_ = item1;
	g_menu_append_item (_tmp29_, _tmp30_);
	_tmp31_ = g_menu_item_new (_ ("About"), "app.about");
	_g_object_unref0 (item1);
	item1 = _tmp31_;
	_tmp32_ = menu1;
	_tmp33_ = item1;
	g_menu_append_item (_tmp32_, _tmp33_);
	_tmp34_ = g_menu_item_new (_ ("Pay"), "app.pay");
	_g_object_unref0 (item1);
	item1 = _tmp34_;
	_tmp35_ = menu1;
	_tmp36_ = item1;
	g_menu_append_item (_tmp35_, _tmp36_);
	_tmp37_ = g_menu_item_new (_ ("DeleteMe"), "app.delete-me");
	_g_object_unref0 (item1);
	item1 = _tmp37_;
	_tmp38_ = menu1;
	_tmp39_ = item1;
	g_menu_append_item (_tmp38_, _tmp39_);
	_tmp40_ = menu1;
	g_menu_append_submenu (menubar, _ ("Help"), (GMenuModel*) _tmp40_);
	_tmp41_ = application1;
	gtk_application_set_menubar (_tmp41_, G_TYPE_CHECK_INSTANCE_TYPE (menubar, g_menu_model_get_type ()) ? ((GMenuModel*) menubar) : NULL);
	app_win_add_actions (self);
	_g_object_unref0 (item1);
	_g_object_unref0 (menubar);
	_g_object_unref0 (menu1);
}


static void
__lambda60_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	GtkApplication* _tmp1_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	gtk_widget_show ((GtkWidget*) self);
	gtk_window_set_keep_above ((GtkWindow*) self, TRUE);
	self->counter = 0;
	_tmp1_ = application1;
	g_application_release ((GApplication*) _tmp1_);
}


static void
___lambda60__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda60_ ((AppWin*) self);
}


static Block6Data*
block6_data_ref (Block6Data* _data6_)
{
	g_atomic_int_inc (&_data6_->_ref_count_);
	return _data6_;
}


static void
block6_data_unref (void * _userdata_)
{
	Block6Data* _data6_;
	_data6_ = (Block6Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data6_->_ref_count_)) {
		AppWin* self;
		self = _data6_->self;
		_g_object_unref0 (_data6_->dlg_about);
		_g_object_unref0 (self);
		g_slice_free (Block6Data, _data6_);
	}
}


static void
__lambda62_ (Block6Data* _data6_,
             gint rid)
{
	AppWin* self;
	self = _data6_->self;
	gtk_widget_destroy ((GtkWidget*) _data6_->dlg_about);
}


static void
___lambda62__gtk_dialog_response (GtkDialog* _sender,
                                  gint response_id,
                                  gpointer self)
{
	__lambda62_ (self, response_id);
}


static void
__lambda61_ (AppWin* self)
{
	Block6Data* _data6_;
	GtkApplication* _tmp0_;
	GtkMessageDialog* _tmp1_;
	GtkApplication* _tmp2_;
	_data6_ = g_slice_new0 (Block6Data);
	_data6_->_ref_count_ = 1;
	_data6_->self = g_object_ref (self);
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	_tmp1_ = (GtkMessageDialog*) gtk_message_dialog_new ((GtkWindow*) self, GTK_DIALOG_MODAL, GTK_MESSAGE_INFO, GTK_BUTTONS_OK, NULL);
	g_object_ref_sink (_tmp1_);
	_data6_->dlg_about = _tmp1_;
	g_object_set (_data6_->dlg_about, "text", _ ("Copy Right:"), NULL);
	g_object_set (_data6_->dlg_about, "secondary-text", "Fu Huizhong <fuhuizn@163.com>", NULL);
	gtk_widget_show ((GtkWidget*) _data6_->dlg_about);
	g_signal_connect_data ((GtkDialog*) _data6_->dlg_about, "response", (GCallback) ___lambda62__gtk_dialog_response, block6_data_ref (_data6_), (GClosureNotify) block6_data_unref, 0);
	_tmp2_ = application1;
	g_application_release ((GApplication*) _tmp2_);
	block6_data_unref (_data6_);
	_data6_ = NULL;
}


static void
___lambda61__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda61_ ((AppWin*) self);
}


static void
__lambda63_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	ChatClient* _tmp1_;
	GtkApplication* _tmp2_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	_tmp1_ = client;
	chat_client_open_path (_tmp1_, "https://gitee.com/rocket049/powerchat");
	_tmp2_ = application1;
	g_application_release ((GApplication*) _tmp2_);
}


static void
___lambda63__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda63_ ((AppWin*) self);
}


static void
__lambda64_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	ChatClient* _tmp1_;
	GtkApplication* _tmp2_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	_tmp1_ = client;
	chat_client_open_path (_tmp1_, "https://gitee.com/rocket049/powerchat/wikis/powerchat?sort_id=1325779");
	_tmp2_ = application1;
	g_application_release ((GApplication*) _tmp2_);
}


static void
___lambda64__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda64_ ((AppWin*) self);
}


static void
__lambda65_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	ChatClient* _tmp1_;
	guint16 _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	GtkApplication* _tmp7_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	_tmp1_ = client;
	_tmp2_ = proxy_port;
	_tmp3_ = g_strdup_printf ("%hu", _tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = g_strconcat ("http://localhost:", _tmp4_, "/", NULL);
	_tmp6_ = _tmp5_;
	chat_client_open_path (_tmp1_, _tmp6_);
	_g_free0 (_tmp6_);
	_g_free0 (_tmp4_);
	_tmp7_ = application1;
	g_application_release ((GApplication*) _tmp7_);
}


static void
___lambda65__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda65_ ((AppWin*) self);
}


static void
__lambda66_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	gchar* home1 = NULL;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* blog1 = NULL;
	gchar* _tmp3_;
	ChatClient* _tmp4_;
	GtkApplication* _tmp5_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	_tmp1_ = g_get_home_dir ();
	_tmp2_ = g_strdup (_tmp1_);
	home1 = _tmp2_;
	_tmp3_ = g_build_path (G_DIR_SEPARATOR_S, home1, "ChatShare", NULL);
	blog1 = _tmp3_;
	_tmp4_ = client;
	chat_client_open_path (_tmp4_, blog1);
	_tmp5_ = application1;
	g_application_release ((GApplication*) _tmp5_);
	_g_free0 (blog1);
	_g_free0 (home1);
}


static void
___lambda66__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda66_ ((AppWin*) self);
}


static void
__lambda67_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	MyGrid* _tmp1_;
	GtkApplication* _tmp2_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	g_print ("Bye!\n");
	_tmp1_ = grid1;
	my_grid_release_resource (_tmp1_);
	gtk_main_quit ();
	_tmp2_ = application1;
	g_application_release ((GApplication*) _tmp2_);
}


static void
___lambda67__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda67_ ((AppWin*) self);
}


static void
__lambda68_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	GtkDialog* dlg = NULL;
	GtkDialog* _tmp1_;
	GtkDialog* _tmp2_;
	GtkDialog* _tmp3_;
	GtkLabel* text1 = NULL;
	GtkLabel* _tmp4_;
	GtkLabel* text2 = NULL;
	GtkLabel* _tmp5_;
	GtkEntry* pwd1 = NULL;
	GtkEntry* _tmp6_;
	GtkGrid* grid = NULL;
	GtkGrid* _tmp7_;
	GtkGrid* _tmp8_;
	GtkLabel* _tmp9_;
	GtkGrid* _tmp10_;
	GtkLabel* _tmp11_;
	GtkGrid* _tmp12_;
	GtkEntry* _tmp13_;
	GtkDialog* _tmp14_;
	GtkBox* _tmp15_;
	GtkGrid* _tmp16_;
	GtkGrid* _tmp17_;
	gint r = 0;
	GtkDialog* _tmp18_;
	gint _tmp19_;
	GtkDialog* _tmp26_;
	GtkApplication* _tmp27_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	_tmp1_ = (GtkDialog*) gtk_dialog_new ();
	g_object_ref_sink (_tmp1_);
	dlg = _tmp1_;
	_tmp2_ = dlg;
	gtk_dialog_add_button (_tmp2_, _ ("Yes"), 1);
	_tmp3_ = dlg;
	gtk_dialog_add_button (_tmp3_, _ ("No"), 2);
	_tmp4_ = (GtkLabel*) gtk_label_new (_ ("  You will Delete this user!  \n  Are you sure?"));
	g_object_ref_sink (_tmp4_);
	text1 = _tmp4_;
	_tmp5_ = (GtkLabel*) gtk_label_new (_ ("Password："));
	g_object_ref_sink (_tmp5_);
	text2 = _tmp5_;
	_tmp6_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp6_);
	pwd1 = _tmp6_;
	_tmp7_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp7_);
	grid = _tmp7_;
	_tmp8_ = grid;
	_tmp9_ = text1;
	gtk_grid_attach (_tmp8_, (GtkWidget*) _tmp9_, 0, 0, 2, 1);
	_tmp10_ = grid;
	_tmp11_ = text2;
	gtk_grid_attach (_tmp10_, (GtkWidget*) _tmp11_, 0, 1, 1, 1);
	_tmp12_ = grid;
	_tmp13_ = pwd1;
	gtk_grid_attach (_tmp12_, (GtkWidget*) _tmp13_, 1, 1, 1, 1);
	_tmp14_ = dlg;
	_tmp15_ = gtk_dialog_get_content_area (_tmp14_);
	_tmp16_ = grid;
	gtk_box_pack_start (_tmp15_, (GtkWidget*) _tmp16_, TRUE, TRUE, (guint) 0);
	_tmp17_ = grid;
	gtk_widget_show_all ((GtkWidget*) _tmp17_);
	_tmp18_ = dlg;
	r = gtk_dialog_run (_tmp18_);
	_tmp19_ = r;
	if (_tmp19_ == 1) {
		ChatClient* _tmp20_;
		MyGrid* _tmp21_;
		const gchar* _tmp22_;
		GtkEntry* _tmp23_;
		const gchar* _tmp24_;
		const gchar* _tmp25_;
		_tmp20_ = client;
		_tmp21_ = grid1;
		_tmp22_ = _tmp21_->uname;
		_tmp23_ = pwd1;
		_tmp24_ = gtk_entry_get_text (_tmp23_);
		_tmp25_ = _tmp24_;
		chat_client_delete_me (_tmp20_, _tmp22_, _tmp25_);
	}
	_tmp26_ = dlg;
	gtk_widget_destroy ((GtkWidget*) _tmp26_);
	_tmp27_ = application1;
	g_application_release ((GApplication*) _tmp27_);
	_g_object_unref0 (grid);
	_g_object_unref0 (pwd1);
	_g_object_unref0 (text2);
	_g_object_unref0 (text1);
	_g_object_unref0 (dlg);
}


static void
___lambda68__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda68_ ((AppWin*) self);
}


static void
__lambda69_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	GtkDialog* dlg = NULL;
	GtkDialog* _tmp1_;
	GtkDialog* _tmp2_;
	GtkDialog* _tmp3_;
	GtkLabel* text1 = NULL;
	GtkLabel* _tmp4_;
	GtkEntry* desc1 = NULL;
	GtkEntry* _tmp5_;
	GtkEntry* _tmp6_;
	GtkGrid* g1 = NULL;
	GtkGrid* _tmp7_;
	GtkGrid* _tmp8_;
	GtkLabel* _tmp9_;
	GtkGrid* _tmp10_;
	GtkEntry* _tmp11_;
	GtkDialog* _tmp12_;
	GtkBox* _tmp13_;
	GtkGrid* _tmp14_;
	GtkGrid* _tmp15_;
	gint r = 0;
	GtkDialog* _tmp16_;
	gint _tmp17_;
	GtkDialog* _tmp27_;
	GtkApplication* _tmp28_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	_tmp1_ = (GtkDialog*) gtk_dialog_new ();
	g_object_ref_sink (_tmp1_);
	dlg = _tmp1_;
	_tmp2_ = dlg;
	gtk_dialog_add_button (_tmp2_, _ ("Yes"), 1);
	_tmp3_ = dlg;
	gtk_dialog_add_button (_tmp3_, _ ("No"), 2);
	_tmp4_ = (GtkLabel*) gtk_label_new (_ ("New description:"));
	g_object_ref_sink (_tmp4_);
	text1 = _tmp4_;
	_tmp5_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp5_);
	desc1 = _tmp5_;
	_tmp6_ = desc1;
	gtk_entry_set_width_chars (_tmp6_, 40);
	_tmp7_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp7_);
	g1 = _tmp7_;
	_tmp8_ = g1;
	_tmp9_ = text1;
	gtk_grid_attach (_tmp8_, (GtkWidget*) _tmp9_, 0, 0, 1, 1);
	_tmp10_ = g1;
	_tmp11_ = desc1;
	gtk_grid_attach (_tmp10_, (GtkWidget*) _tmp11_, 0, 1, 1, 1);
	_tmp12_ = dlg;
	_tmp13_ = gtk_dialog_get_content_area (_tmp12_);
	_tmp14_ = g1;
	gtk_box_pack_start (_tmp13_, (GtkWidget*) _tmp14_, TRUE, TRUE, (guint) 0);
	_tmp15_ = g1;
	gtk_widget_show_all ((GtkWidget*) _tmp15_);
	_tmp16_ = dlg;
	r = gtk_dialog_run (_tmp16_);
	_tmp17_ = r;
	if (_tmp17_ == 1) {
		ChatClient* _tmp18_;
		GtkEntry* _tmp19_;
		const gchar* _tmp20_;
		const gchar* _tmp21_;
		MyGrid* _tmp22_;
		GtkEntry* _tmp23_;
		const gchar* _tmp24_;
		const gchar* _tmp25_;
		gchar* _tmp26_;
		_tmp18_ = client;
		_tmp19_ = desc1;
		_tmp20_ = gtk_entry_get_text (_tmp19_);
		_tmp21_ = _tmp20_;
		chat_client_update_desc (_tmp18_, _tmp21_);
		_tmp22_ = grid1;
		_tmp23_ = desc1;
		_tmp24_ = gtk_entry_get_text (_tmp23_);
		_tmp25_ = _tmp24_;
		_tmp26_ = g_strdup (_tmp25_);
		_g_free0 (_tmp22_->udesc);
		_tmp22_->udesc = _tmp26_;
	}
	_tmp27_ = dlg;
	gtk_widget_destroy ((GtkWidget*) _tmp27_);
	_tmp28_ = application1;
	g_application_release ((GApplication*) _tmp28_);
	_g_object_unref0 (g1);
	_g_object_unref0 (desc1);
	_g_object_unref0 (text1);
	_g_object_unref0 (dlg);
}


static void
___lambda69__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda69_ ((AppWin*) self);
}


static void
__lambda70_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	GtkDialog* dlg1 = NULL;
	AppWin* _tmp1_;
	GtkDialog* _tmp2_;
	GtkDialog* _tmp3_;
	GtkBox* area = NULL;
	GtkDialog* _tmp4_;
	GtkBox* _tmp5_;
	GtkBox* _tmp6_;
	GtkLabel* label1 = NULL;
	GtkLabel* _tmp7_;
	GtkLabel* _tmp8_;
	gchar* ln1 = NULL;
	gchar* _tmp9_;
	gchar* text1 = NULL;
	const gchar* _tmp10_;
	gchar* _tmp11_;
	gint _tmp12_;
	gint _tmp13_;
	const gchar* _tmp28_;
	GtkLabel* _tmp29_;
	const gchar* _tmp30_;
	GtkGrid* g1 = NULL;
	GtkGrid* _tmp31_;
	GtkLabel* _tmp32_;
	GtkBox* _tmp33_;
	GtkBox* _tmp34_;
	GtkDialog* _tmp35_;
	GtkApplication* _tmp36_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	_tmp1_ = app;
	_tmp2_ = (GtkDialog*) gtk_dialog_new_with_buttons (_ ("Upgrade"), (GtkWindow*) _tmp1_, GTK_DIALOG_MODAL, NULL);
	g_object_ref_sink (_tmp2_);
	dlg1 = _tmp2_;
	_tmp3_ = dlg1;
	gtk_widget_set_size_request ((GtkWidget*) _tmp3_, 300, 200);
	_tmp4_ = dlg1;
	_tmp5_ = gtk_dialog_get_content_area (_tmp4_);
	_tmp6_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp5_, gtk_box_get_type ()) ? ((GtkBox*) _tmp5_) : NULL);
	area = _tmp6_;
	_tmp7_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp7_);
	label1 = _tmp7_;
	_tmp8_ = label1;
	g_object_set ((GtkWidget*) _tmp8_, "expand", TRUE, NULL);
	_tmp9_ = g_strdup (_ ("This is the latest version!"));
	ln1 = _tmp9_;
	_tmp10_ = ln1;
	_tmp11_ = g_strdup (_tmp10_);
	text1 = _tmp11_;
	_tmp12_ = LATESTVER;
	_tmp13_ = RELEASE;
	if (_tmp12_ > _tmp13_) {
		gchar* _tmp14_;
		gchar* github = NULL;
		gchar* _tmp15_;
		gchar* gitee = NULL;
		gchar* _tmp16_;
		const gchar* _tmp17_;
		const gchar* _tmp18_;
		const gchar* _tmp19_;
		const gchar* _tmp20_;
		const gchar* _tmp21_;
		const gchar* _tmp22_;
		const gchar* _tmp23_;
		const gchar* _tmp24_;
		const gchar* _tmp25_;
		const gchar* _tmp26_;
		gchar* _tmp27_;
		_tmp14_ = g_strdup (_ ("New Version Released!"));
		_g_free0 (ln1);
		ln1 = _tmp14_;
		_tmp15_ = g_strdup ("https://github.com/rocket049/powerchat/releases");
		github = _tmp15_;
		_tmp16_ = g_strdup ("https://gitee.com/rocket049/powerchat/releases");
		gitee = _tmp16_;
		_tmp17_ = ln1;
		_tmp18_ = string_to_string (_tmp17_);
		_tmp19_ = github;
		_tmp20_ = string_to_string (_tmp19_);
		_tmp21_ = github;
		_tmp22_ = string_to_string (_tmp21_);
		_tmp23_ = gitee;
		_tmp24_ = string_to_string (_tmp23_);
		_tmp25_ = gitee;
		_tmp26_ = string_to_string (_tmp25_);
		_tmp27_ = g_strconcat ("\n  ", _tmp18_, "\n\n  <a href='", _tmp20_, "'>", _tmp22_, "</a>  \n\n  <a href='", _tmp24_, "'>", _tmp26_, "</a>  \n\n", NULL);
		_g_free0 (text1);
		text1 = _tmp27_;
		_g_free0 (gitee);
		_g_free0 (github);
	}
	_tmp28_ = text1;
	g_print ("%s", _tmp28_);
	_tmp29_ = label1;
	_tmp30_ = text1;
	gtk_label_set_markup (_tmp29_, _tmp30_);
	_tmp31_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp31_);
	g1 = _tmp31_;
	_tmp32_ = label1;
	gtk_grid_attach (g1, (GtkWidget*) _tmp32_, 0, 0, 1, 1);
	gtk_widget_show_all ((GtkWidget*) g1);
	_tmp33_ = area;
	gtk_box_pack_start (_tmp33_, (GtkWidget*) g1, TRUE, TRUE, (guint) 0);
	_tmp34_ = area;
	gtk_widget_show_all ((GtkWidget*) _tmp34_);
	_tmp35_ = dlg1;
	gtk_widget_show ((GtkWidget*) _tmp35_);
	_tmp36_ = application1;
	g_application_release ((GApplication*) _tmp36_);
	_g_object_unref0 (g1);
	_g_free0 (text1);
	_g_free0 (ln1);
	_g_object_unref0 (label1);
	_g_object_unref0 (area);
	_g_object_unref0 (dlg1);
}


static void
___lambda70__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda70_ ((AppWin*) self);
}


static void
__lambda71_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	MyGrid* _tmp1_;
	GtkApplication* _tmp2_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	_tmp1_ = grid1;
	my_grid_update_pwd (_tmp1_);
	_tmp2_ = application1;
	g_application_release ((GApplication*) _tmp2_);
}


static void
___lambda71__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda71_ ((AppWin*) self);
}


static void
__lambda72_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	gchar* home1 = NULL;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* blog1 = NULL;
	gchar* _tmp3_;
	ChatClient* _tmp4_;
	GtkApplication* _tmp5_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	_tmp1_ = g_get_home_dir ();
	_tmp2_ = g_strdup (_tmp1_);
	home1 = _tmp2_;
	_tmp3_ = g_build_path (G_DIR_SEPARATOR_S, home1, ".powerchat", "RecvFiles", NULL);
	blog1 = _tmp3_;
	_tmp4_ = client;
	chat_client_open_path (_tmp4_, blog1);
	_tmp5_ = application1;
	g_application_release ((GApplication*) _tmp5_);
	_g_free0 (blog1);
	_g_free0 (home1);
}


static void
___lambda72__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda72_ ((AppWin*) self);
}


static void
__lambda73_ (AppWin* self)
{
	GtkApplication* _tmp0_;
	ChatClient* _tmp1_;
	GtkApplication* _tmp2_;
	_tmp0_ = application1;
	g_application_hold ((GApplication*) _tmp0_);
	_tmp1_ = client;
	chat_client_open_path (_tmp1_, "https://gitee.com/rocket049/powerchat/wikis");
	_tmp2_ = application1;
	g_application_release ((GApplication*) _tmp2_);
}


static void
___lambda73__g_simple_action_activate (GSimpleAction* _sender,
                                       GVariant* parameter,
                                       gpointer self)
{
	__lambda73_ ((AppWin*) self);
}


static void
app_win_add_actions (AppWin* self)
{
	GSimpleAction* act1 = NULL;
	GSimpleAction* _tmp0_;
	GtkApplication* _tmp1_;
	GSimpleAction* act2 = NULL;
	GSimpleAction* _tmp2_;
	GtkApplication* _tmp3_;
	GSimpleAction* act3 = NULL;
	GSimpleAction* _tmp4_;
	GtkApplication* _tmp5_;
	GSimpleAction* act4 = NULL;
	GSimpleAction* _tmp6_;
	GtkApplication* _tmp7_;
	GSimpleAction* act5 = NULL;
	GSimpleAction* _tmp8_;
	GtkApplication* _tmp9_;
	GSimpleAction* act6 = NULL;
	GSimpleAction* _tmp10_;
	GtkApplication* _tmp11_;
	GSimpleAction* act7 = NULL;
	GSimpleAction* _tmp12_;
	GtkApplication* _tmp13_;
	GSimpleAction* act8 = NULL;
	GSimpleAction* _tmp14_;
	GtkApplication* _tmp15_;
	GSimpleAction* act9 = NULL;
	GSimpleAction* _tmp16_;
	GtkApplication* _tmp17_;
	GSimpleAction* act10 = NULL;
	GSimpleAction* _tmp18_;
	GtkApplication* _tmp19_;
	GSimpleAction* act11 = NULL;
	GSimpleAction* _tmp20_;
	GtkApplication* _tmp21_;
	GSimpleAction* act12 = NULL;
	GSimpleAction* _tmp22_;
	GtkApplication* _tmp23_;
	GSimpleAction* act13 = NULL;
	GSimpleAction* _tmp24_;
	GtkApplication* _tmp25_;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_simple_action_new ("show-win", NULL);
	act1 = _tmp0_;
	g_signal_connect_object (act1, "activate", (GCallback) ___lambda60__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act1, TRUE);
	_tmp1_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp1_, (GAction*) act1);
	_tmp2_ = g_simple_action_new ("about", NULL);
	act2 = _tmp2_;
	g_signal_connect_object (act2, "activate", (GCallback) ___lambda61__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act2, TRUE);
	_tmp3_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp3_, (GAction*) act2);
	_tmp4_ = g_simple_action_new ("homepage", NULL);
	act3 = _tmp4_;
	g_signal_connect_object (act3, "activate", (GCallback) ___lambda63__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act3, TRUE);
	_tmp5_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp5_, (GAction*) act3);
	_tmp6_ = g_simple_action_new ("pay", NULL);
	act4 = _tmp6_;
	g_signal_connect_object (act4, "activate", (GCallback) ___lambda64__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act4, TRUE);
	_tmp7_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp7_, (GAction*) act4);
	_tmp8_ = g_simple_action_new ("preview-web", NULL);
	act5 = _tmp8_;
	g_signal_connect_object (act5, "activate", (GCallback) ___lambda65__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act5, TRUE);
	_tmp9_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp9_, (GAction*) act5);
	_tmp10_ = g_simple_action_new ("blog-dir", NULL);
	act6 = _tmp10_;
	g_signal_connect_object (act6, "activate", (GCallback) ___lambda66__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act6, TRUE);
	_tmp11_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp11_, (GAction*) act6);
	_tmp12_ = g_simple_action_new ("quit", NULL);
	act7 = _tmp12_;
	g_signal_connect_object (act7, "activate", (GCallback) ___lambda67__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act7, TRUE);
	_tmp13_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp13_, (GAction*) act7);
	_tmp14_ = g_simple_action_new ("delete-me", NULL);
	act8 = _tmp14_;
	g_signal_connect_object (act8, "activate", (GCallback) ___lambda68__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act8, TRUE);
	_tmp15_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp15_, (GAction*) act8);
	_tmp16_ = g_simple_action_new ("modify-desc", NULL);
	act9 = _tmp16_;
	g_signal_connect_object (act9, "activate", (GCallback) ___lambda69__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act9, TRUE);
	_tmp17_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp17_, (GAction*) act9);
	_tmp18_ = g_simple_action_new ("down-page", NULL);
	act10 = _tmp18_;
	g_signal_connect_object (act10, "activate", (GCallback) ___lambda70__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act10, TRUE);
	_tmp19_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp19_, (GAction*) act10);
	_tmp20_ = g_simple_action_new ("update-pwd", NULL);
	act11 = _tmp20_;
	g_signal_connect_object (act11, "activate", (GCallback) ___lambda71__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act11, TRUE);
	_tmp21_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp21_, (GAction*) act11);
	_tmp22_ = g_simple_action_new ("down-dir", NULL);
	act12 = _tmp22_;
	g_signal_connect_object (act12, "activate", (GCallback) ___lambda72__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act12, TRUE);
	_tmp23_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp23_, (GAction*) act12);
	_tmp24_ = g_simple_action_new ("wiki", NULL);
	act13 = _tmp24_;
	g_signal_connect_object (act13, "activate", (GCallback) ___lambda73__g_simple_action_activate, self, 0);
	g_simple_action_set_enabled (act13, TRUE);
	_tmp25_ = application1;
	g_action_map_add_action ((GActionMap*) _tmp25_, (GAction*) act13);
	_g_object_unref0 (act13);
	_g_object_unref0 (act12);
	_g_object_unref0 (act11);
	_g_object_unref0 (act10);
	_g_object_unref0 (act9);
	_g_object_unref0 (act8);
	_g_object_unref0 (act7);
	_g_object_unref0 (act6);
	_g_object_unref0 (act5);
	_g_object_unref0 (act4);
	_g_object_unref0 (act3);
	_g_object_unref0 (act2);
	_g_object_unref0 (act1);
}


static void
app_win_class_init (AppWinClass * klass)
{
	app_win_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &AppWin_private_offset);
	G_OBJECT_CLASS (klass)->finalize = app_win_finalize;
}


static void
app_win_instance_init (AppWin * self)
{
	self->priv = app_win_get_instance_private (self);
	self->counter = 0;
}


static void
app_win_finalize (GObject * obj)
{
	AppWin * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_APP_WIN, AppWin);
	_g_object_unref0 (self->priv->tray1);
	_g_object_unref0 (self->priv->icon1);
	_g_object_unref0 (self->priv->icon2);
	_g_object_unref0 (self->priv->box1);
	G_OBJECT_CLASS (app_win_parent_class)->finalize (obj);
}


GType
app_win_get_type (void)
{
	static volatile gsize app_win_type_id__volatile = 0;
	if (g_once_init_enter (&app_win_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (AppWinClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) app_win_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (AppWin), 0, (GInstanceInitFunc) app_win_instance_init, NULL };
		GType app_win_type_id;
		app_win_type_id = g_type_register_static (gtk_application_window_get_type (), "AppWin", &g_define_type_info, 0);
		AppWin_private_offset = g_type_add_instance_private (app_win_type_id, sizeof (AppWinPrivate));
		g_once_init_leave (&app_win_type_id__volatile, app_win_type_id);
	}
	return app_win_type_id__volatile;
}


static void
__lambda74_ (LoginDialog* self)
{
	login_dialog_login (self);
}


static void
___lambda74__gtk_entry_activate (GtkEntry* _sender,
                                 gpointer self)
{
	__lambda74_ ((LoginDialog*) self);
}


static void
__lambda76_ (LoginDialog* self,
             gint rid)
{
	if (rid == 2) {
		login_dialog_login (self);
	} else {
		if (rid == 4) {
			GtkDialog* _tmp0_;
			AddUserDialog* _tmp1_;
			AddUserDialog* _tmp2_;
			_tmp0_ = self->dlg1;
			gtk_widget_hide ((GtkWidget*) _tmp0_);
			_tmp1_ = add_user_dialog_new ();
			_g_object_unref0 (adduser1);
			adduser1 = _tmp1_;
			_tmp2_ = adduser1;
			add_user_dialog_show (_tmp2_);
		} else {
			gtk_main_quit ();
		}
	}
}


static void
___lambda76__gtk_dialog_response (GtkDialog* _sender,
                                  gint response_id,
                                  gpointer self)
{
	__lambda76_ ((LoginDialog*) self, response_id);
}


LoginDialog*
login_dialog_construct (GType object_type)
{
	LoginDialog * self = NULL;
	AppWin* _tmp0_;
	GtkDialog* _tmp1_;
	GtkGrid* grid = NULL;
	GtkGrid* _tmp2_;
	GtkLabel* _tmp3_;
	GtkLabel* _tmp4_;
	GtkLabel* _tmp5_;
	GtkLabel* _tmp6_;
	GtkLabel* _tmp7_;
	GtkLabel* _tmp8_;
	GtkEntry* _tmp9_;
	GtkEntry* _tmp10_;
	GtkEntry* _tmp11_;
	GtkEntry* _tmp12_;
	GtkEntry* _tmp13_;
	GtkBox* content = NULL;
	GtkDialog* _tmp14_;
	GtkBox* _tmp15_;
	GtkBox* _tmp16_;
	GtkDialog* _tmp17_;
	GtkDialog* _tmp18_;
	GtkDialog* _tmp19_;
	GtkEntry* _tmp20_;
	GtkDialog* _tmp21_;
	self = (LoginDialog*) g_object_new (object_type, NULL);
	_tmp0_ = app;
	_tmp1_ = (GtkDialog*) gtk_dialog_new_with_buttons (_ ("login"), (GtkWindow*) _tmp0_, GTK_DIALOG_MODAL, NULL);
	g_object_ref_sink (_tmp1_);
	_g_object_unref0 (self->dlg1);
	self->dlg1 = _tmp1_;
	_tmp2_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp2_);
	grid = _tmp2_;
	_tmp3_ = (GtkLabel*) gtk_label_new (_ ("Input name and password:"));
	g_object_ref_sink (_tmp3_);
	_tmp4_ = _tmp3_;
	gtk_grid_attach (grid, (GtkWidget*) _tmp4_, 0, 0, 2, 1);
	_g_object_unref0 (_tmp4_);
	_tmp5_ = (GtkLabel*) gtk_label_new (_ ("Login Name："));
	g_object_ref_sink (_tmp5_);
	_tmp6_ = _tmp5_;
	gtk_grid_attach (grid, (GtkWidget*) _tmp6_, 0, 1, 1, 1);
	_g_object_unref0 (_tmp6_);
	_tmp7_ = (GtkLabel*) gtk_label_new (_ ("Password："));
	g_object_ref_sink (_tmp7_);
	_tmp8_ = _tmp7_;
	gtk_grid_attach (grid, (GtkWidget*) _tmp8_, 0, 2, 1, 1);
	_g_object_unref0 (_tmp8_);
	_tmp9_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp9_);
	_g_object_unref0 (self->name);
	self->name = _tmp9_;
	_tmp10_ = self->name;
	gtk_grid_attach (grid, (GtkWidget*) _tmp10_, 1, 1, 1, 1);
	_tmp11_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp11_);
	_g_object_unref0 (self->passwd);
	self->passwd = _tmp11_;
	_tmp12_ = self->passwd;
	gtk_entry_set_visibility (_tmp12_, FALSE);
	_tmp13_ = self->passwd;
	gtk_grid_attach (grid, (GtkWidget*) _tmp13_, 1, 2, 1, 1);
	_tmp14_ = self->dlg1;
	_tmp15_ = gtk_dialog_get_content_area (_tmp14_);
	_tmp16_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp15_, gtk_box_get_type ()) ? ((GtkBox*) _tmp15_) : NULL);
	content = _tmp16_;
	gtk_box_pack_start (content, (GtkWidget*) grid, TRUE, TRUE, (guint) 0);
	gtk_widget_show_all ((GtkWidget*) content);
	_tmp17_ = self->dlg1;
	gtk_dialog_add_button (_tmp17_, _ ("Login"), 2);
	_tmp18_ = self->dlg1;
	gtk_dialog_add_button (_tmp18_, _ ("Register"), 4);
	_tmp19_ = self->dlg1;
	gtk_dialog_add_button (_tmp19_, _ ("Cancel"), 3);
	login_dialog_load_name (self);
	_tmp20_ = self->passwd;
	g_signal_connect_object (_tmp20_, "activate", (GCallback) ___lambda74__gtk_entry_activate, self, 0);
	_tmp21_ = self->dlg1;
	g_signal_connect_object (_tmp21_, "response", (GCallback) ___lambda76__gtk_dialog_response, self, 0);
	_g_object_unref0 (content);
	_g_object_unref0 (grid);
	return self;
}


LoginDialog*
login_dialog_new (void)
{
	return login_dialog_construct (TYPE_LOGIN_DIALOG);
}


static gboolean
__lambda75_ (LoginDialog* self)
{
	gboolean result = FALSE;
	ChatClient* _tmp0_;
	_tmp0_ = client;
	chat_client_get_friends_async (_tmp0_);
	result = FALSE;
	return result;
}


static gboolean
___lambda75__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda75_ ((LoginDialog*) self);
	return result;
}


void
login_dialog_login (LoginDialog* self)
{
	UserData* u = NULL;
	ChatClient* _tmp0_;
	GtkEntry* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	GtkEntry* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	UserData* _tmp7_;
	GtkEntry* _tmp28_;
	const gchar* _tmp29_;
	const gchar* _tmp30_;
	AppWin* _tmp31_;
	GtkDialog* _tmp32_;
	g_return_if_fail (self != NULL);
	_tmp0_ = client;
	_tmp1_ = self->name;
	_tmp2_ = gtk_entry_get_text (_tmp1_);
	_tmp3_ = _tmp2_;
	_tmp4_ = self->passwd;
	_tmp5_ = gtk_entry_get_text (_tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = chat_client_login (_tmp0_, _tmp3_, _tmp6_);
	u = _tmp7_;
	if (u != NULL) {
		FILE* _tmp8_;
		MyGrid* _tmp9_;
		gint64 _tmp10_;
		MyGrid* _tmp11_;
		const gchar* _tmp12_;
		gchar* _tmp13_;
		MyGrid* _tmp14_;
		gint _tmp15_;
		MyGrid* _tmp16_;
		gint _tmp17_;
		MyGrid* _tmp18_;
		const gchar* _tmp19_;
		gchar* _tmp20_;
		MyGrid* _tmp21_;
		GtkButton* _tmp22_;
		const gchar* _tmp23_;
		gchar* _tmp24_;
		gchar* _tmp25_;
		_tmp8_ = stdout;
		fprintf (_tmp8_, "login ok\n");
		_tmp9_ = grid1;
		_tmp10_ = (*u).Id;
		_tmp9_->uid = _tmp10_;
		_tmp11_ = grid1;
		_tmp12_ = (*u).Name;
		_tmp13_ = g_strdup (_tmp12_);
		_g_free0 (_tmp11_->uname);
		_tmp11_->uname = _tmp13_;
		_tmp14_ = grid1;
		_tmp15_ = (*u).Sex;
		_tmp14_->usex = (gint16) _tmp15_;
		_tmp16_ = grid1;
		_tmp17_ = (*u).Age;
		_tmp16_->uage = (gint16) _tmp17_;
		_tmp18_ = grid1;
		_tmp19_ = (*u).Desc;
		_tmp20_ = g_strdup (_tmp19_);
		_g_free0 (_tmp18_->udesc);
		_tmp18_->udesc = _tmp20_;
		_tmp21_ = grid1;
		_tmp22_ = _tmp21_->user_btn;
		_tmp23_ = (*u).Name;
		_tmp24_ = g_strconcat (_ ("About: "), _tmp23_, NULL);
		_tmp25_ = _tmp24_;
		gtk_button_set_label (_tmp22_, _tmp25_);
		_g_free0 (_tmp25_);
	} else {
		GtkDialog* _tmp26_;
		FILE* _tmp27_;
		_tmp26_ = self->dlg1;
		gtk_window_set_title ((GtkWindow*) _tmp26_, _ ("Name/Password Error!"));
		_tmp27_ = stdout;
		fprintf (_tmp27_, "login fail\n");
		_user_data_free0 (u);
		return;
	}
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda75__gsource_func, g_object_ref (self), g_object_unref);
	_tmp28_ = self->name;
	_tmp29_ = gtk_entry_get_text (_tmp28_);
	_tmp30_ = _tmp29_;
	save_name (_tmp30_);
	_tmp31_ = app;
	gtk_widget_show_all ((GtkWidget*) _tmp31_);
	_tmp32_ = self->dlg1;
	gtk_widget_hide ((GtkWidget*) _tmp32_);
	_user_data_free0 (u);
}


gint
login_dialog_run (LoginDialog* self)
{
	gint result = 0;
	GtkDialog* _tmp0_;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->dlg1;
	result = gtk_dialog_run (_tmp0_);
	return result;
}


void
login_dialog_hide (LoginDialog* self)
{
	GtkDialog* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->dlg1;
	gtk_widget_hide ((GtkWidget*) _tmp0_);
}


void
login_dialog_load_name (LoginDialog* self)
{
	gchar* loguser = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_get_home_dir ();
	_tmp1_ = g_build_path (G_DIR_SEPARATOR_S, _tmp0_, ".powerchat", "manual", "loguser.txt", NULL);
	loguser = _tmp1_;
	{
		GFile* fp = NULL;
		const gchar* _tmp2_;
		GFile* _tmp3_;
		GFileInputStream* fs = NULL;
		GFile* _tmp4_;
		GFileInputStream* _tmp5_;
		GDataInputStream* dis = NULL;
		GFileInputStream* _tmp6_;
		GDataInputStream* _tmp7_;
		gchar* ns = NULL;
		GDataInputStream* _tmp8_;
		gchar* _tmp9_;
		const gchar* _tmp10_;
		_tmp2_ = loguser;
		_tmp3_ = g_file_new_for_path (_tmp2_);
		fp = _tmp3_;
		_tmp4_ = fp;
		_tmp5_ = g_file_read (_tmp4_, NULL, &_inner_error0_);
		fs = _tmp5_;
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			_g_object_unref0 (fp);
			goto __catch1_g_error;
		}
		_tmp6_ = fs;
		_tmp7_ = g_data_input_stream_new (G_TYPE_CHECK_INSTANCE_TYPE (_tmp6_, g_input_stream_get_type ()) ? ((GInputStream*) _tmp6_) : NULL);
		dis = _tmp7_;
		_tmp8_ = dis;
		_tmp9_ = g_data_input_stream_read_line (_tmp8_, NULL, NULL, &_inner_error0_);
		ns = _tmp9_;
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			_g_object_unref0 (dis);
			_g_object_unref0 (fs);
			_g_object_unref0 (fp);
			goto __catch1_g_error;
		}
		_tmp10_ = ns;
		if (_tmp10_ != NULL) {
			GtkEntry* _tmp11_;
			const gchar* _tmp12_;
			GtkEntry* _tmp13_;
			_tmp11_ = self->name;
			_tmp12_ = ns;
			gtk_entry_set_text (_tmp11_, _tmp12_);
			_tmp13_ = self->passwd;
			gtk_entry_grab_focus_without_selecting (_tmp13_);
		}
		_g_free0 (ns);
		_g_object_unref0 (dis);
		_g_object_unref0 (fs);
		_g_object_unref0 (fp);
	}
	goto __finally1;
	__catch1_g_error:
	{
		GError* e = NULL;
		GError* _tmp14_;
		const gchar* _tmp15_;
		e = _inner_error0_;
		_inner_error0_ = NULL;
		_tmp14_ = e;
		_tmp15_ = _tmp14_->message;
		g_print ("load name Error: %s\n", _tmp15_);
		_g_error_free0 (e);
	}
	__finally1:
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_free0 (loguser);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_g_free0 (loguser);
}


static void
login_dialog_class_init (LoginDialogClass * klass)
{
	login_dialog_parent_class = g_type_class_peek_parent (klass);
	G_OBJECT_CLASS (klass)->finalize = login_dialog_finalize;
}


static void
login_dialog_instance_init (LoginDialog * self)
{
}


static void
login_dialog_finalize (GObject * obj)
{
	LoginDialog * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_LOGIN_DIALOG, LoginDialog);
	_g_object_unref0 (self->name);
	_g_object_unref0 (self->passwd);
	_g_object_unref0 (self->dlg1);
	G_OBJECT_CLASS (login_dialog_parent_class)->finalize (obj);
}


GType
login_dialog_get_type (void)
{
	static volatile gsize login_dialog_type_id__volatile = 0;
	if (g_once_init_enter (&login_dialog_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (LoginDialogClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) login_dialog_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (LoginDialog), 0, (GInstanceInitFunc) login_dialog_instance_init, NULL };
		GType login_dialog_type_id;
		login_dialog_type_id = g_type_register_static (G_TYPE_OBJECT, "LoginDialog", &g_define_type_info, 0);
		g_once_init_leave (&login_dialog_type_id__volatile, login_dialog_type_id);
	}
	return login_dialog_type_id__volatile;
}


void
save_name (const gchar* name1)
{
	gchar* loguser = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	GFile* fp = NULL;
	const gchar* _tmp2_;
	GFile* _tmp3_;
	GFileOutputStream* fs = NULL;
	GDataOutputStream* dos = NULL;
	GFileOutputStream* _tmp14_;
	GDataOutputStream* _tmp15_;
	GDataOutputStream* _tmp16_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (name1 != NULL);
	_tmp0_ = g_get_home_dir ();
	_tmp1_ = g_build_path (G_DIR_SEPARATOR_S, _tmp0_, ".powerchat", "manual", "loguser.txt", NULL);
	loguser = _tmp1_;
	_tmp2_ = loguser;
	_tmp3_ = g_file_new_for_path (_tmp2_);
	fp = _tmp3_;
	{
		GFileOutputStream* _tmp4_ = NULL;
		GFile* _tmp5_;
		GFileOutputStream* _tmp6_;
		GFileOutputStream* _tmp7_;
		_tmp5_ = fp;
		_tmp6_ = g_file_create (_tmp5_, G_FILE_CREATE_PRIVATE, NULL, &_inner_error0_);
		_tmp4_ = _tmp6_;
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			goto __catch2_g_error;
		}
		_tmp7_ = _tmp4_;
		_tmp4_ = NULL;
		_g_object_unref0 (fs);
		fs = _tmp7_;
		_g_object_unref0 (_tmp4_);
	}
	goto __finally2;
	__catch2_g_error:
	{
		GError* e1 = NULL;
		e1 = _inner_error0_;
		_inner_error0_ = NULL;
		{
			GFileOutputStream* _tmp8_ = NULL;
			GFile* _tmp9_;
			GFileOutputStream* _tmp10_;
			GFileOutputStream* _tmp11_;
			_tmp9_ = fp;
			_tmp10_ = g_file_replace (_tmp9_, NULL, FALSE, G_FILE_CREATE_PRIVATE, NULL, &_inner_error0_);
			_tmp8_ = _tmp10_;
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
				goto __catch3_g_error;
			}
			_tmp11_ = _tmp8_;
			_tmp8_ = NULL;
			_g_object_unref0 (fs);
			fs = _tmp11_;
			_g_object_unref0 (_tmp8_);
		}
		goto __finally3;
		__catch3_g_error:
		{
			GError* e2 = NULL;
			GError* _tmp12_;
			const gchar* _tmp13_;
			e2 = _inner_error0_;
			_inner_error0_ = NULL;
			_tmp12_ = e2;
			_tmp13_ = _tmp12_->message;
			g_print ("write name Error: %s\n", _tmp13_);
			_g_error_free0 (e2);
			_g_error_free0 (e1);
			_g_object_unref0 (fs);
			_g_object_unref0 (fp);
			_g_free0 (loguser);
			return;
		}
		__finally3:
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			_g_error_free0 (e1);
			_g_error_free0 (e1);
			_g_object_unref0 (fs);
			_g_object_unref0 (fp);
			_g_free0 (loguser);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
			g_clear_error (&_inner_error0_);
			return;
		}
		_g_error_free0 (e1);
	}
	__finally2:
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_object_unref0 (fs);
		_g_object_unref0 (fp);
		_g_free0 (loguser);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp14_ = fs;
	_tmp15_ = g_data_output_stream_new (G_TYPE_CHECK_INSTANCE_TYPE (_tmp14_, g_output_stream_get_type ()) ? ((GOutputStream*) _tmp14_) : NULL);
	dos = _tmp15_;
	_tmp16_ = dos;
	g_data_output_stream_put_string (_tmp16_, name1, NULL, &_inner_error0_);
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		_g_object_unref0 (dos);
		_g_object_unref0 (fs);
		_g_object_unref0 (fp);
		_g_free0 (loguser);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	g_print ("write name. \n");
	_g_object_unref0 (dos);
	_g_object_unref0 (fs);
	_g_object_unref0 (fp);
	_g_free0 (loguser);
}


gchar*
get_cfg_dir (const gchar* name)
{
	gchar* result = NULL;
	gchar* home1 = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	gchar* res = NULL;
	gchar* _tmp2_;
	g_return_val_if_fail (name != NULL, NULL);
	_tmp0_ = g_get_home_dir ();
	_tmp1_ = g_strdup (_tmp0_);
	home1 = _tmp1_;
	_tmp2_ = g_build_path (G_DIR_SEPARATOR_S, home1, ".powerchat", name, NULL);
	res = _tmp2_;
	g_mkdir_with_parents (res, 0755);
	result = res;
	_g_free0 (home1);
	return result;
}


void
set_my_locale (const gchar* path1)
{
	gchar* _tmp0_ = NULL;
	gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* textpath = NULL;
	const gchar* _tmp3_;
	gchar* _tmp4_;
	const gchar* _tmp5_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (path1 != NULL);
	_tmp1_ = g_file_read_link ("/proc/self/exe", &_inner_error0_);
	_tmp0_ = _tmp1_;
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
	_tmp2_ = g_path_get_dirname (_tmp0_);
	_g_free0 (prog_path);
	prog_path = _tmp2_;
	_tmp3_ = prog_path;
	_tmp4_ = g_build_path (G_DIR_SEPARATOR_S, _tmp3_, "..", "share", "locale", NULL);
	textpath = _tmp4_;
	setlocale (LC_ALL, "");
	textdomain ("powerchat");
	_tmp5_ = textpath;
	bindtextdomain ("powerchat", _tmp5_);
	bind_textdomain_codeset ("powerchat", "UTF-8");
	_g_free0 (textpath);
	_g_free0 (_tmp0_);
}


static gboolean
__lambda80_ (void)
{
	gboolean result = FALSE;
	ChatClient* _tmp0_;
	_tmp0_ = client;
	chat_client_ping (_tmp0_);
	result = TRUE;
	return result;
}


static gboolean
___lambda80__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda80_ ();
	return result;
}


gint
_vala_main (gchar** args,
            int args_length1)
{
	gint result = 0;
	ChatClient* _tmp0_;
	const gchar* _tmp2_;
	GtkApplication* _tmp3_;
	GtkApplication* _tmp4_;
	MyGrid* _tmp6_;
	AppWin* _tmp7_;
	AppWin* _tmp8_;
	MyGrid* _tmp9_;
	GtkGrid* _tmp10_;
	LoginDialog* _tmp11_;
	LoginDialog* _tmp12_;
	GtkDialog* _tmp13_;
	MyFriendMenu* _tmp14_;
	ChatClient* _tmp15_;
	GError* _inner_error0_ = NULL;
	gtk_init (&args_length1, &args);
	_tmp0_ = chat_client_new ();
	_g_object_unref0 (client);
	client = _tmp0_;
	if (!g_thread_supported ()) {
		FILE* _tmp1_;
		_tmp1_ = stderr;
		fprintf (_tmp1_, "Cannot run without threads.\n");
		result = 1;
		return result;
	}
	_tmp2_ = args[0];
	set_my_locale (_tmp2_);
	_tmp3_ = gtk_application_new (NULL, G_APPLICATION_FLAGS_NONE);
	_g_object_unref0 (application1);
	application1 = _tmp3_;
	_tmp4_ = application1;
	g_application_register ((GApplication*) _tmp4_, NULL, &_inner_error0_);
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		gint _tmp5_ = -1;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return _tmp5_;
	}
	_tmp6_ = my_grid_new ();
	_g_object_unref0 (grid1);
	grid1 = _tmp6_;
	_tmp7_ = app_win_new ();
	g_object_ref_sink (_tmp7_);
	_g_object_unref0 (app);
	app = _tmp7_;
	_tmp8_ = app;
	_tmp9_ = grid1;
	_tmp10_ = _tmp9_->mygrid;
	app_win_append (_tmp8_, (GtkWidget*) _tmp10_);
	_tmp11_ = login_dialog_new ();
	_g_object_unref0 (login1);
	login1 = _tmp11_;
	_tmp12_ = login1;
	_tmp13_ = _tmp12_->dlg1;
	gtk_widget_show_all ((GtkWidget*) _tmp13_);
	_tmp14_ = my_friend_menu_new ();
	g_object_ref_sink (_tmp14_);
	_g_object_unref0 (popup1);
	popup1 = _tmp14_;
	g_timeout_add_seconds_full (G_PRIORITY_DEFAULT, (guint) 60, ___lambda80__gsource_func, NULL, NULL);
	gtk_main ();
	_tmp15_ = client;
	chat_client_quit (_tmp15_);
	result = 0;
	return result;
}


int
main (int argc,
      char ** argv)
{
	return _vala_main (argv, argc);
}


static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint
_vala_array_length (gpointer array)
{
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



