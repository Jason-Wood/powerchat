/* ui.c generated by valac 0.40.8, the Vala compiler
 * generated from ui.vala, do not modify */



#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <float.h>
#include <math.h>
#include <gdk/gdk.h>
#include <pango/pango.h>
#include <json-glib/json-glib.h>
#include <glib/gstdio.h>
#include <stdio.h>
#include <jsonrpc-glib.h>


#define TYPE_APP_WIN (app_win_get_type ())
#define APP_WIN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_APP_WIN, AppWin))
#define APP_WIN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_APP_WIN, AppWinClass))
#define IS_APP_WIN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_APP_WIN))
#define IS_APP_WIN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_APP_WIN))
#define APP_WIN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_APP_WIN, AppWinClass))

typedef struct _AppWin AppWin;
typedef struct _AppWinClass AppWinClass;

#define TYPE_MY_GRID (my_grid_get_type ())
#define MY_GRID(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MY_GRID, MyGrid))
#define MY_GRID_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MY_GRID, MyGridClass))
#define IS_MY_GRID(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MY_GRID))
#define IS_MY_GRID_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MY_GRID))
#define MY_GRID_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MY_GRID, MyGridClass))

typedef struct _MyGrid MyGrid;
typedef struct _MyGridClass MyGridClass;

#define TYPE_LOGIN_DIALOG (login_dialog_get_type ())
#define LOGIN_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_LOGIN_DIALOG, LoginDialog))
#define LOGIN_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_LOGIN_DIALOG, LoginDialogClass))
#define IS_LOGIN_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_LOGIN_DIALOG))
#define IS_LOGIN_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_LOGIN_DIALOG))
#define LOGIN_DIALOG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_LOGIN_DIALOG, LoginDialogClass))

typedef struct _LoginDialog LoginDialog;
typedef struct _LoginDialogClass LoginDialogClass;

#define TYPE_RPC_CLIENT (rpc_client_get_type ())
#define RPC_CLIENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_RPC_CLIENT, RpcClient))
#define RPC_CLIENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_RPC_CLIENT, RpcClientClass))
#define IS_RPC_CLIENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_RPC_CLIENT))
#define IS_RPC_CLIENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_RPC_CLIENT))
#define RPC_CLIENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_RPC_CLIENT, RpcClientClass))

typedef struct _RpcClient RpcClient;
typedef struct _RpcClientClass RpcClientClass;

#define TYPE_ADD_USER_DIALOG (add_user_dialog_get_type ())
#define ADD_USER_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_ADD_USER_DIALOG, AddUserDialog))
#define ADD_USER_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_ADD_USER_DIALOG, AddUserDialogClass))
#define IS_ADD_USER_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_ADD_USER_DIALOG))
#define IS_ADD_USER_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_ADD_USER_DIALOG))
#define ADD_USER_DIALOG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_ADD_USER_DIALOG, AddUserDialogClass))

typedef struct _AddUserDialog AddUserDialog;
typedef struct _AddUserDialogClass AddUserDialogClass;

#define TYPE_USER_DATA (user_data_get_type ())
typedef struct _UserData UserData;
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _MyGridPrivate MyGridPrivate;
enum  {
	MY_GRID_0_PROPERTY,
	MY_GRID_NUM_PROPERTIES
};
static GParamSpec* my_grid_properties[MY_GRID_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
typedef struct _Block1Data Block1Data;
typedef struct _Block2Data Block2Data;

#define TYPE_STRANGERS_DIALG (strangers_dialg_get_type ())
#define STRANGERS_DIALG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_STRANGERS_DIALG, StrangersDialg))
#define STRANGERS_DIALG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_STRANGERS_DIALG, StrangersDialgClass))
#define IS_STRANGERS_DIALG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_STRANGERS_DIALG))
#define IS_STRANGERS_DIALG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_STRANGERS_DIALG))
#define STRANGERS_DIALG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_STRANGERS_DIALG, StrangersDialgClass))

typedef struct _StrangersDialg StrangersDialg;
typedef struct _StrangersDialgClass StrangersDialgClass;
#define _g_thread_unref0(var) ((var == NULL) ? NULL : (var = (g_thread_unref (var), NULL)))

#define TYPE_SEARCH_DIALG (search_dialg_get_type ())
#define SEARCH_DIALG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_SEARCH_DIALG, SearchDialg))
#define SEARCH_DIALG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_SEARCH_DIALG, SearchDialgClass))
#define IS_SEARCH_DIALG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_SEARCH_DIALG))
#define IS_SEARCH_DIALG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_SEARCH_DIALG))
#define SEARCH_DIALG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_SEARCH_DIALG, SearchDialgClass))

typedef struct _SearchDialg SearchDialg;
typedef struct _SearchDialgClass SearchDialgClass;
#define _user_data_free0(var) ((var == NULL) ? NULL : (var = (user_data_free (var), NULL)))
typedef struct _Block3Data Block3Data;

#define TYPE_MY_FRIEND_MENU (my_friend_menu_get_type ())
#define MY_FRIEND_MENU(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MY_FRIEND_MENU, MyFriendMenu))
#define MY_FRIEND_MENU_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MY_FRIEND_MENU, MyFriendMenuClass))
#define IS_MY_FRIEND_MENU(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MY_FRIEND_MENU))
#define IS_MY_FRIEND_MENU_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MY_FRIEND_MENU))
#define MY_FRIEND_MENU_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MY_FRIEND_MENU, MyFriendMenuClass))

typedef struct _MyFriendMenu MyFriendMenu;
typedef struct _MyFriendMenuClass MyFriendMenuClass;
typedef struct _Block4Data Block4Data;
#define __vala_JsonNode_free0(var) ((var == NULL) ? NULL : (var = (_vala_JsonNode_free (var), NULL)))
#define _json_object_unref0(var) ((var == NULL) ? NULL : (var = (json_object_unref (var), NULL)))
typedef struct _AppWinPrivate AppWinPrivate;
enum  {
	APP_WIN_0_PROPERTY,
	APP_WIN_NUM_PROPERTIES
};
static GParamSpec* app_win_properties[APP_WIN_NUM_PROPERTIES];
typedef struct _LoginDialogPrivate LoginDialogPrivate;
enum  {
	LOGIN_DIALOG_0_PROPERTY,
	LOGIN_DIALOG_NUM_PROPERTIES
};
static GParamSpec* login_dialog_properties[LOGIN_DIALOG_NUM_PROPERTIES];
typedef struct _RpcClientPrivate RpcClientPrivate;
#define _g_variant_unref0(var) ((var == NULL) ? NULL : (var = (g_variant_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

struct _UserData {
	gint64 id;
	gint16 sex;
	gchar* name;
	gchar* desc;
	gint16 age;
	gchar* msg_offline;
	gchar* timestamp_offline;
};

struct _MyGrid {
	GObject parent_instance;
	MyGridPrivate * priv;
	GtkEntry* port1;
	GtkGrid* mygrid;
	GtkCssProvider* provider1;
	GtkCssProvider* mark1;
	GtkCssProvider* button1;
	GtkCssProvider* link_css1;
	GtkButton* strangers_btn;
	GtkButton* user_btn;
	gchar* man_icon;
	gchar* woman_icon;
	gint64 uid;
	gint16 usex;
	gchar* uname;
	gchar* udesc;
	gint16 uage;
};

struct _MyGridClass {
	GObjectClass parent_class;
};

struct _MyGridPrivate {
	GtkListBox* friends;
	GtkListBox* msgs;
	GtkEntry* entry1;
	gint64 to;
	gboolean running;
	GeeHashMap* frds1;
	GeeHashMap* frd_boxes;
	GtkCssProvider* cssp;
	GtkScrolledWindow* msg_win;
	GeeHashMap* boxes;
	gchar* pressed;
};

struct _Block1Data {
	int _ref_count_;
	MyGrid* self;
	GtkButton* b6;
};

struct _Block2Data {
	int _ref_count_;
	MyGrid* self;
	gchar* k1;
};

struct _Block3Data {
	int _ref_count_;
	MyGrid* self;
	UserData user1;
};

typedef void (*RpcClientQueryCallback) (UserData* u, gpointer user_data);
struct _Block4Data {
	int _ref_count_;
	MyGrid* self;
	gchar* name1;
};

struct _AppWin {
	GtkWindow parent_instance;
	AppWinPrivate * priv;
};

struct _AppWinClass {
	GtkWindowClass parent_class;
};

struct _LoginDialog {
	GObject parent_instance;
	LoginDialogPrivate * priv;
	GtkEntry* name;
	GtkEntry* passwd;
	GtkDialog* dlg1;
};

struct _LoginDialogClass {
	GObjectClass parent_class;
};

struct _RpcClient {
	GObject parent_instance;
	RpcClientPrivate * priv;
	JsonrpcClient* c;
};

struct _RpcClientClass {
	GObjectClass parent_class;
};


extern AppWin* app;
AppWin* app = NULL;
extern MyGrid* grid1;
MyGrid* grid1 = NULL;
extern LoginDialog* login1;
LoginDialog* login1 = NULL;
extern RpcClient* rpc1;
RpcClient* rpc1 = NULL;
extern AddUserDialog* adduser1;
AddUserDialog* adduser1 = NULL;
static gpointer my_grid_parent_class = NULL;
extern guint16 proxy_port;
extern StrangersDialg* strangers1;
extern SearchDialg* search1;
extern MyFriendMenu* popup1;
static gpointer app_win_parent_class = NULL;
static gpointer login_dialog_parent_class = NULL;
extern guint16 server_port;
guint16 server_port = (guint16) 7890;
guint16 proxy_port = 0U;

GType app_win_get_type (void) G_GNUC_CONST;
GType my_grid_get_type (void) G_GNUC_CONST;
GType login_dialog_get_type (void) G_GNUC_CONST;
GType rpc_client_get_type (void) G_GNUC_CONST;
GType add_user_dialog_get_type (void) G_GNUC_CONST;
GType user_data_get_type (void) G_GNUC_CONST;
UserData* user_data_dup (const UserData* self);
void user_data_free (UserData* self);
void user_data_copy (const UserData* self,
                     UserData* dest);
void user_data_destroy (UserData* self);
#define MY_GRID_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_MY_GRID, MyGridPrivate))
MyGrid* my_grid_new (void);
MyGrid* my_grid_construct (GType object_type);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static gint __lambda5_ (MyGrid* self,
                 GtkListBoxRow* row1,
                 GtkListBoxRow* row2);
static gint ___lambda5__gtk_list_box_sort_func (GtkListBoxRow* row1,
                                         GtkListBoxRow* row2,
                                         gpointer self);
static void __lambda6_ (MyGrid* self);
static gboolean __lambda7_ (MyGrid* self);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static gboolean ____lambda8_ (Block2Data* _data2_);
gboolean rpc_client_tell (RpcClient* self,
                          gint64 to);
static gboolean _____lambda8__gsource_func (gpointer self);
static gpointer ___lambda7__gthread_func (gpointer self);
StrangersDialg* strangers_dialg_new (void);
StrangersDialg* strangers_dialg_construct (GType object_type);
GType strangers_dialg_get_type (void) G_GNUC_CONST;
gboolean rpc_client_get_proxy (RpcClient* self,
                               guint16* port);
static void ___lambda6__gtk_widget_show (GtkWidget* _sender,
                                  gpointer self);
static void __lambda27_ (MyGrid* self);
gboolean rpc_client_send_file (RpcClient* self,
                               gint64 to,
                               const gchar* pathname);
void my_grid_add_left_name_icon (MyGrid* self,
                                 const gchar* name,
                                 gint16 sex);
void my_grid_add_text (MyGrid* self,
                       const gchar* text,
                       gboolean center,
                       gboolean markup);
static void ___lambda27__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda28_ (MyGrid* self);
static void ___lambda28__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda29_ (MyGrid* self);
SearchDialg* search_dialg_new (void);
SearchDialg* search_dialg_construct (GType object_type);
GType search_dialg_get_type (void) G_GNUC_CONST;
void search_dialg_show (SearchDialg* self);
static void ___lambda29__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda32_ (Block1Data* _data1_);
gboolean rpc_client_set_proxy (RpcClient* self,
                               guint16 port);
static void ___lambda32__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda33_ (MyGrid* self);
void strangers_dialg_show (StrangersDialg* self);
static void ___lambda33__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda34_ (MyGrid* self);
static void ___lambda34__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda35_ (MyGrid* self);
gboolean rpc_client_ChatTo (RpcClient* self,
                            gint64 to,
                            const gchar* msg);
static gboolean __lambda36_ (MyGrid* self);
static gboolean ___lambda36__gsource_func (gpointer self);
static void ___lambda35__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static void __lambda37_ (MyGrid* self,
                  GtkListBoxRow* r);
static void ___lambda37__gtk_list_box_row_selected (GtkListBox* _sender,
                                             GtkListBoxRow* row,
                                             gpointer self);
void my_grid_add_listbox_id (MyGrid* self,
                             gint64 uid);
void my_grid_add_right_name_icon (MyGrid* self,
                                  const gchar* name,
                                  gint16 sex);
void my_grid_release_resource (MyGrid* self);
void my_grid_add_friend (MyGrid* self,
                         UserData* user1);
static Block3Data* block3_data_ref (Block3Data* _data3_);
static void block3_data_unref (void * _userdata_);
static void __lambda14_ (Block3Data* _data3_);
gboolean rpc_client_set_http_id (RpcClient* self,
                                 gint64 uid);
static void ___lambda14__gtk_button_clicked (GtkButton* _sender,
                                      gpointer self);
static gboolean __lambda16_ (MyGrid* self,
                      GdkEventButton* e);
GType my_friend_menu_get_type (void) G_GNUC_CONST;
void my_friend_menu_set_id (MyFriendMenu* self,
                            const gchar* id);
static gboolean ___lambda16__gtk_widget_button_release_event (GtkWidget* _sender,
                                                       GdkEventButton* event,
                                                       gpointer self);
void my_grid_remove_friend (MyGrid* self,
                            const gchar* fid);
gboolean rpc_client_remove_friend (RpcClient* self,
                                   gint64 fid);
void my_grid_add_image (MyGrid* self,
                        const gchar* pathname);
void my_grid_rpc_callback (MyGrid* self,
                           gint8 typ,
                           gint64 from,
                           const gchar* msg);
static gboolean ____lambda38_ (MyGrid* self);
static gboolean _____lambda38__gsource_func (gpointer self);
gboolean rpc_client_offline_msg_with_id (RpcClient* self,
                                         gint64 uid,
                                         const gchar* msg,
                                         RpcClientQueryCallback f,
                                         gpointer f_target);
static void ____lambda39_ (MyGrid* self,
                    UserData* ux);
void strangers_dialg_prepend_row (StrangersDialg* self,
                                  UserData* u1);
static void _____lambda39__rpc_client_query_callback (UserData* u,
                                               gpointer self);
void my_grid_msg_mark (MyGrid* self,
                       const gchar* uid);
static Block4Data* block4_data_ref (Block4Data* _data4_);
static void block4_data_unref (void * _userdata_);
static JsonNode* _vala_JsonNode_copy (JsonNode* self);
static void _vala_JsonNode_free (JsonNode* self);
static void ___lambda40_ (Block4Data* _data4_);
static void ____lambda40__gtk_button_clicked (GtkButton* _sender,
                                       gpointer self);
static gboolean __lambda41_ (MyGrid* self);
static gboolean ___lambda41__gsource_func (gpointer self);
static void my_grid_finalize (GObject * obj);
AppWin* app_win_new (void);
AppWin* app_win_construct (GType object_type);
static void __lambda4_ (AppWin* self);
static void ___lambda4__gtk_widget_destroy (GtkWidget* _sender,
                                     gpointer self);
LoginDialog* login_dialog_new (void);
LoginDialog* login_dialog_construct (GType object_type);
static void __lambda42_ (LoginDialog* self,
                  gint rid);
gint64 rpc_client_login (RpcClient* self,
                         const gchar* name,
                         const gchar* pwd,
                         UserData* u);
gboolean rpc_client_get_friends_async (RpcClient* self);
AddUserDialog* add_user_dialog_new (void);
AddUserDialog* add_user_dialog_construct (GType object_type);
void add_user_dialog_show (AddUserDialog* self);
static void ___lambda42__gtk_dialog_response (GtkDialog* _sender,
                                       gint response_id,
                                       gpointer self);
gint login_dialog_run (LoginDialog* self);
void login_dialog_hide (LoginDialog* self);
static void login_dialog_finalize (GObject * obj);
gint _vala_main (gchar** args,
                 int args_length1);
RpcClient* rpc_client_new (void);
RpcClient* rpc_client_construct (GType object_type);
gboolean rpc_client_connect (RpcClient* self,
                             const gchar* host,
                             guint16 port);
static void __lambda46_ (JsonrpcClient* s,
                  const gchar* m,
                  GVariant* p);
static void ___lambda46__jsonrpc_client_notification (JsonrpcClient* _sender,
                                               const gchar* method_name,
                                               GVariant* params,
                                               gpointer self);
MyFriendMenu* my_friend_menu_new (void);
MyFriendMenu* my_friend_menu_construct (GType object_type);
gboolean rpc_client_quit (RpcClient* self);


void
user_data_copy (const UserData* self,
                UserData* dest)
{
	gint64 _tmp0_;
	gint16 _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	const gchar* _tmp4_;
	gchar* _tmp5_;
	gint16 _tmp6_;
	const gchar* _tmp7_;
	gchar* _tmp8_;
	const gchar* _tmp9_;
	gchar* _tmp10_;
	_tmp0_ = (*self).id;
	(*dest).id = _tmp0_;
	_tmp1_ = (*self).sex;
	(*dest).sex = _tmp1_;
	_tmp2_ = (*self).name;
	_tmp3_ = g_strdup (_tmp2_);
	_g_free0 ((*dest).name);
	(*dest).name = _tmp3_;
	_tmp4_ = (*self).desc;
	_tmp5_ = g_strdup (_tmp4_);
	_g_free0 ((*dest).desc);
	(*dest).desc = _tmp5_;
	_tmp6_ = (*self).age;
	(*dest).age = _tmp6_;
	_tmp7_ = (*self).msg_offline;
	_tmp8_ = g_strdup (_tmp7_);
	_g_free0 ((*dest).msg_offline);
	(*dest).msg_offline = _tmp8_;
	_tmp9_ = (*self).timestamp_offline;
	_tmp10_ = g_strdup (_tmp9_);
	_g_free0 ((*dest).timestamp_offline);
	(*dest).timestamp_offline = _tmp10_;
}


void
user_data_destroy (UserData* self)
{
	_g_free0 ((*self).name);
	_g_free0 ((*self).desc);
	_g_free0 ((*self).msg_offline);
	_g_free0 ((*self).timestamp_offline);
}


UserData*
user_data_dup (const UserData* self)
{
	UserData* dup;
	dup = g_new0 (UserData, 1);
	user_data_copy (self, dup);
	return dup;
}


void
user_data_free (UserData* self)
{
	user_data_destroy (self);
	g_free (self);
}


GType
user_data_get_type (void)
{
	static volatile gsize user_data_type_id__volatile = 0;
	if (g_once_init_enter (&user_data_type_id__volatile)) {
		GType user_data_type_id;
		user_data_type_id = g_boxed_type_register_static ("UserData", (GBoxedCopyFunc) user_data_dup, (GBoxedFreeFunc) user_data_free);
		g_once_init_leave (&user_data_type_id__volatile, user_data_type_id);
	}
	return user_data_type_id__volatile;
}


static Block1Data*
block1_data_ref (Block1Data* _data1_)
{
	g_atomic_int_inc (&_data1_->_ref_count_);
	return _data1_;
}


static void
block1_data_unref (void * _userdata_)
{
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
		MyGrid* self;
		self = _data1_->self;
		_g_object_unref0 (_data1_->b6);
		_g_object_unref0 (self);
		g_slice_free (Block1Data, _data1_);
	}
}


static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}


static gint
__lambda5_ (MyGrid* self,
            GtkListBoxRow* row1,
            GtkListBoxRow* row2)
{
	gint result = 0;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	GtkStyleContext* rsc1 = NULL;
	GeeHashMap* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	gpointer _tmp5_;
	GtkStyleContext* _tmp6_;
	GtkStyleContext* _tmp7_;
	GtkStyleContext* rsc2 = NULL;
	GeeHashMap* _tmp8_;
	const gchar* _tmp9_;
	const gchar* _tmp10_;
	gpointer _tmp11_;
	GtkStyleContext* _tmp12_;
	GtkStyleContext* _tmp13_;
	GtkStyleContext* _tmp14_;
	g_return_val_if_fail (row1 != NULL, 0);
	g_return_val_if_fail (row2 != NULL, 0);
	_tmp0_ = gtk_widget_get_name ((GtkWidget*) row1);
	_tmp1_ = _tmp0_;
	if (g_strcmp0 (_tmp1_, "0") == 0) {
		result = -1;
		return result;
	}
	_tmp2_ = self->priv->frd_boxes;
	_tmp3_ = gtk_widget_get_name ((GtkWidget*) row1);
	_tmp4_ = _tmp3_;
	_tmp5_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp2_, _tmp4_);
	_tmp6_ = gtk_widget_get_style_context ((GtkWidget*) ((GtkGrid*) _tmp5_));
	_tmp7_ = _g_object_ref0 (_tmp6_);
	rsc1 = _tmp7_;
	_tmp8_ = self->priv->frd_boxes;
	_tmp9_ = gtk_widget_get_name ((GtkWidget*) row2);
	_tmp10_ = _tmp9_;
	_tmp11_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp8_, _tmp10_);
	_tmp12_ = gtk_widget_get_style_context ((GtkWidget*) ((GtkGrid*) _tmp11_));
	_tmp13_ = _g_object_ref0 (_tmp12_);
	rsc2 = _tmp13_;
	_tmp14_ = rsc1;
	if (gtk_style_context_has_class (_tmp14_, "off")) {
		GtkStyleContext* _tmp15_;
		_tmp15_ = rsc2;
		if (gtk_style_context_has_class (_tmp15_, "off")) {
			const gchar* _tmp16_;
			const gchar* _tmp17_;
			gint64 _tmp18_;
			const gchar* _tmp19_;
			const gchar* _tmp20_;
			gint64 _tmp21_;
			_tmp16_ = gtk_widget_get_name ((GtkWidget*) row1);
			_tmp17_ = _tmp16_;
			_tmp18_ = g_ascii_strtoll (_tmp17_, NULL, 0);
			_tmp19_ = gtk_widget_get_name ((GtkWidget*) row2);
			_tmp20_ = _tmp19_;
			_tmp21_ = g_ascii_strtoll (_tmp20_, NULL, 0);
			if (_tmp18_ > _tmp21_) {
				result = 1;
				_g_object_unref0 (rsc2);
				_g_object_unref0 (rsc1);
				return result;
			} else {
				result = -1;
				_g_object_unref0 (rsc2);
				_g_object_unref0 (rsc1);
				return result;
			}
		} else {
			result = 1;
			_g_object_unref0 (rsc2);
			_g_object_unref0 (rsc1);
			return result;
		}
	} else {
		GtkStyleContext* _tmp22_;
		_tmp22_ = rsc2;
		if (gtk_style_context_has_class (_tmp22_, "off")) {
			result = -1;
			_g_object_unref0 (rsc2);
			_g_object_unref0 (rsc1);
			return result;
		} else {
			const gchar* _tmp23_;
			const gchar* _tmp24_;
			gint64 _tmp25_;
			const gchar* _tmp26_;
			const gchar* _tmp27_;
			gint64 _tmp28_;
			_tmp23_ = gtk_widget_get_name ((GtkWidget*) row1);
			_tmp24_ = _tmp23_;
			_tmp25_ = g_ascii_strtoll (_tmp24_, NULL, 0);
			_tmp26_ = gtk_widget_get_name ((GtkWidget*) row2);
			_tmp27_ = _tmp26_;
			_tmp28_ = g_ascii_strtoll (_tmp27_, NULL, 0);
			if (_tmp25_ > _tmp28_) {
				result = 1;
				_g_object_unref0 (rsc2);
				_g_object_unref0 (rsc1);
				return result;
			} else {
				result = -1;
				_g_object_unref0 (rsc2);
				_g_object_unref0 (rsc1);
				return result;
			}
		}
	}
	_g_object_unref0 (rsc2);
	_g_object_unref0 (rsc1);
}


static gint
___lambda5__gtk_list_box_sort_func (GtkListBoxRow* row1,
                                    GtkListBoxRow* row2,
                                    gpointer self)
{
	gint result;
	result = __lambda5_ ((MyGrid*) self, row1, row2);
	return result;
}


static Block2Data*
block2_data_ref (Block2Data* _data2_)
{
	g_atomic_int_inc (&_data2_->_ref_count_);
	return _data2_;
}


static void
block2_data_unref (void * _userdata_)
{
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
		MyGrid* self;
		self = _data2_->self;
		_g_free0 (_data2_->k1);
		_g_object_unref0 (self);
		g_slice_free (Block2Data, _data2_);
	}
}


static gboolean
____lambda8_ (Block2Data* _data2_)
{
	MyGrid* self;
	gboolean result = FALSE;
	RpcClient* _tmp0_;
	const gchar* _tmp1_;
	gint64 _tmp2_;
	self = _data2_->self;
	_tmp0_ = rpc1;
	_tmp1_ = _data2_->k1;
	_tmp2_ = g_ascii_strtoll (_tmp1_, NULL, 0);
	if (rpc_client_tell (_tmp0_, _tmp2_) == FALSE) {
		gtk_main_quit ();
	}
	result = FALSE;
	return result;
}


static gboolean
_____lambda8__gsource_func (gpointer self)
{
	gboolean result;
	result = ____lambda8_ (self);
	return result;
}


static gboolean
__lambda7_ (MyGrid* self)
{
	gboolean result = FALSE;
	GeeSet* ids = NULL;
	GeeHashMap* _tmp0_;
	GeeSet* _tmp1_;
	GeeSet* _tmp2_;
	_tmp0_ = self->priv->frds1;
	_tmp1_ = gee_abstract_map_get_keys ((GeeAbstractMap*) _tmp0_);
	_tmp2_ = _tmp1_;
	ids = _tmp2_;
	{
		GeeIterator* _k1_it = NULL;
		GeeSet* _tmp3_;
		GeeIterator* _tmp4_;
		_tmp3_ = ids;
		_tmp4_ = gee_iterable_iterator ((GeeIterable*) _tmp3_);
		_k1_it = _tmp4_;
		while (TRUE) {
			Block2Data* _data2_;
			GeeIterator* _tmp5_;
			GeeIterator* _tmp6_;
			gpointer _tmp7_;
			const gchar* _tmp8_;
			const gchar* _tmp9_;
			gint64 _tmp10_;
			gchar* _tmp11_;
			gchar* _tmp12_;
			gboolean _tmp13_;
			_data2_ = g_slice_new0 (Block2Data);
			_data2_->_ref_count_ = 1;
			_data2_->self = g_object_ref (self);
			_tmp5_ = _k1_it;
			if (!gee_iterator_next (_tmp5_)) {
				block2_data_unref (_data2_);
				_data2_ = NULL;
				break;
			}
			_tmp6_ = _k1_it;
			_tmp7_ = gee_iterator_get (_tmp6_);
			_data2_->k1 = (gchar*) _tmp7_;
			_tmp8_ = _data2_->k1;
			g_print ("%s\n", _tmp8_);
			_tmp9_ = _data2_->k1;
			_tmp10_ = self->uid;
			_tmp11_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp10_);
			_tmp12_ = _tmp11_;
			_tmp13_ = g_strcmp0 (_tmp9_, _tmp12_) == 0;
			_g_free0 (_tmp12_);
			if (_tmp13_) {
				block2_data_unref (_data2_);
				_data2_ = NULL;
				continue;
			}
			g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _____lambda8__gsource_func, block2_data_ref (_data2_), block2_data_unref);
			block2_data_unref (_data2_);
			_data2_ = NULL;
		}
		_g_object_unref0 (_k1_it);
	}
	result = TRUE;
	_g_object_unref0 (ids);
	return result;
}


static gpointer
___lambda7__gthread_func (gpointer self)
{
	gpointer result;
	result = (gpointer) ((gintptr) __lambda7_ ((MyGrid*) self));
	g_object_unref (self);
	return result;
}


static void
__lambda6_ (MyGrid* self)
{
	GThread* thread = NULL;
	GThread* _tmp0_;
	StrangersDialg* _tmp1_;
	guint16 port2 = 0U;
	RpcClient* _tmp2_;
	guint16 _tmp3_ = 0U;
	gboolean _tmp4_;
	_tmp0_ = g_thread_new ("tell", ___lambda7__gthread_func, g_object_ref (self));
	thread = _tmp0_;
	_tmp1_ = strangers_dialg_new ();
	_g_object_unref0 (strangers1);
	strangers1 = _tmp1_;
	_tmp2_ = rpc1;
	_tmp4_ = rpc_client_get_proxy (_tmp2_, &_tmp3_);
	port2 = _tmp3_;
	if (_tmp4_) {
		guint16 _tmp5_;
		GtkEntry* _tmp6_;
		guint16 _tmp7_;
		gchar* _tmp8_;
		gchar* _tmp9_;
		_tmp5_ = port2;
		proxy_port = _tmp5_;
		_tmp6_ = self->port1;
		_tmp7_ = proxy_port;
		_tmp8_ = g_strdup_printf ("%hu", _tmp7_);
		_tmp9_ = _tmp8_;
		gtk_entry_set_text (_tmp6_, _tmp9_);
		_g_free0 (_tmp9_);
	} else {
		gtk_main_quit ();
	}
	_g_thread_unref0 (thread);
}


static void
___lambda6__gtk_widget_show (GtkWidget* _sender,
                             gpointer self)
{
	__lambda6_ ((MyGrid*) self);
}


static gchar*
string_slice (const gchar* self,
              glong start,
              glong end)
{
	gchar* result = NULL;
	glong string_length = 0L;
	gint _tmp0_;
	gint _tmp1_;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp6_ = FALSE;
	gchar* _tmp8_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = strlen (self);
	_tmp1_ = _tmp0_;
	string_length = (glong) _tmp1_;
	if (start < ((glong) 0)) {
		glong _tmp2_;
		_tmp2_ = string_length;
		start = _tmp2_ + start;
	}
	if (end < ((glong) 0)) {
		glong _tmp3_;
		_tmp3_ = string_length;
		end = _tmp3_ + end;
	}
	if (start >= ((glong) 0)) {
		glong _tmp5_;
		_tmp5_ = string_length;
		_tmp4_ = start <= _tmp5_;
	} else {
		_tmp4_ = FALSE;
	}
	g_return_val_if_fail (_tmp4_, NULL);
	if (end >= ((glong) 0)) {
		glong _tmp7_;
		_tmp7_ = string_length;
		_tmp6_ = end <= _tmp7_;
	} else {
		_tmp6_ = FALSE;
	}
	g_return_val_if_fail (_tmp6_, NULL);
	g_return_val_if_fail (start <= end, NULL);
	_tmp8_ = g_strndup (((gchar*) self) + start, (gsize) (end - start));
	result = _tmp8_;
	return result;
}


static const gchar*
string_to_string (const gchar* self)
{
	const gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	result = self;
	return result;
}


static void
__lambda27_ (MyGrid* self)
{
	gboolean _tmp0_ = FALSE;
	gint64 _tmp1_;
	GtkFileChooserDialog* chooser = NULL;
	AppWin* _tmp4_;
	GtkFileChooserDialog* _tmp5_;
	GtkFileChooserDialog* _tmp6_;
	GtkFileChooserDialog* _tmp7_;
	GtkFileChooserDialog* _tmp30_;
	GError * _inner_error_ = NULL;
	_tmp1_ = self->priv->to;
	if (_tmp1_ == ((gint64) 0)) {
		_tmp0_ = TRUE;
	} else {
		gint64 _tmp2_;
		gint64 _tmp3_;
		_tmp2_ = self->priv->to;
		_tmp3_ = self->uid;
		_tmp0_ = _tmp2_ == _tmp3_;
	}
	if (_tmp0_) {
		return;
	}
	_tmp4_ = app;
	_tmp5_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Select your favorite file", (GtkWindow*) _tmp4_, GTK_FILE_CHOOSER_ACTION_OPEN, "_Cancel", GTK_RESPONSE_CANCEL, "_Open", GTK_RESPONSE_ACCEPT, NULL);
	g_object_ref_sink (_tmp5_);
	chooser = _tmp5_;
	_tmp6_ = chooser;
	gtk_file_chooser_set_select_multiple ((GtkFileChooser*) _tmp6_, FALSE);
	_tmp7_ = chooser;
	if (gtk_dialog_run ((GtkDialog*) _tmp7_) == ((gint) GTK_RESPONSE_ACCEPT)) {
		gchar* uri = NULL;
		GtkFileChooserDialog* _tmp8_;
		gchar* _tmp9_;
		const gchar* _tmp10_;
		gchar* _tmp11_;
		gchar* _tmp12_;
		gboolean _tmp13_;
		_tmp8_ = chooser;
		_tmp9_ = gtk_file_chooser_get_uri ((GtkFileChooser*) _tmp8_);
		uri = _tmp9_;
		_tmp10_ = uri;
		_tmp11_ = string_slice (_tmp10_, (glong) 0, (glong) 7);
		_tmp12_ = _tmp11_;
		_tmp13_ = g_strcmp0 (_tmp12_, "file://") == 0;
		_g_free0 (_tmp12_);
		if (_tmp13_) {
			gchar* fname = NULL;
			const gchar* _tmp14_;
			gchar* _tmp15_;
			RpcClient* _tmp16_;
			gint64 _tmp17_;
			const gchar* _tmp18_;
			_tmp14_ = uri;
			_tmp15_ = g_filename_from_uri (_tmp14_, NULL, &_inner_error_);
			fname = _tmp15_;
			if (G_UNLIKELY (_inner_error_ != NULL)) {
				_g_free0 (uri);
				_g_object_unref0 (chooser);
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp16_ = rpc1;
			_tmp17_ = self->priv->to;
			_tmp18_ = fname;
			if (rpc_client_send_file (_tmp16_, _tmp17_, _tmp18_)) {
				gchar* text1 = NULL;
				const gchar* _tmp19_;
				const gchar* _tmp20_;
				const gchar* _tmp21_;
				gchar* _tmp22_;
				gchar* _tmp23_;
				const gchar* _tmp24_;
				gchar* _tmp25_;
				gchar* _tmp26_;
				const gchar* _tmp27_;
				gint16 _tmp28_;
				const gchar* _tmp29_;
				_tmp19_ = uri;
				_tmp20_ = string_to_string (_tmp19_);
				_tmp21_ = fname;
				_tmp22_ = g_path_get_basename (_tmp21_);
				_tmp23_ = _tmp22_;
				_tmp24_ = string_to_string (_tmp23_);
				_tmp25_ = g_strconcat ("<a href='", _tmp20_, "'>", _tmp24_, "</a>", NULL);
				_tmp26_ = _tmp25_;
				_g_free0 (_tmp23_);
				text1 = _tmp26_;
				_tmp27_ = self->uname;
				_tmp28_ = self->usex;
				my_grid_add_left_name_icon (self, _tmp27_, _tmp28_);
				_tmp29_ = text1;
				my_grid_add_text (self, _tmp29_, TRUE, TRUE);
				_g_free0 (text1);
			} else {
				gtk_main_quit ();
			}
			_g_free0 (fname);
		}
		_g_free0 (uri);
	}
	_tmp30_ = chooser;
	g_signal_emit_by_name ((GtkDialog*) _tmp30_, "close");
	_g_object_unref0 (chooser);
}


static void
___lambda27__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda27_ ((MyGrid*) self);
}


static void
__lambda28_ (MyGrid* self)
{
	gboolean _tmp0_ = FALSE;
	gint64 _tmp1_;
	GtkFileChooserDialog* chooser = NULL;
	AppWin* _tmp4_;
	GtkFileChooserDialog* _tmp5_;
	GtkFileChooserDialog* _tmp6_;
	GtkFileFilter* filter = NULL;
	GtkFileFilter* _tmp7_;
	GtkFileChooserDialog* _tmp8_;
	GtkFileFilter* _tmp9_;
	GtkFileFilter* _tmp10_;
	GtkFileChooserDialog* _tmp11_;
	GtkFileChooserDialog* _tmp34_;
	GError * _inner_error_ = NULL;
	_tmp1_ = self->priv->to;
	if (_tmp1_ == ((gint64) 0)) {
		_tmp0_ = TRUE;
	} else {
		gint64 _tmp2_;
		gint64 _tmp3_;
		_tmp2_ = self->priv->to;
		_tmp3_ = self->uid;
		_tmp0_ = _tmp2_ == _tmp3_;
	}
	if (_tmp0_) {
		return;
	}
	_tmp4_ = app;
	_tmp5_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Select your favorite file", (GtkWindow*) _tmp4_, GTK_FILE_CHOOSER_ACTION_OPEN, "_Cancel", GTK_RESPONSE_CANCEL, "_Open", GTK_RESPONSE_ACCEPT, NULL);
	g_object_ref_sink (_tmp5_);
	chooser = _tmp5_;
	_tmp6_ = chooser;
	gtk_file_chooser_set_select_multiple ((GtkFileChooser*) _tmp6_, FALSE);
	_tmp7_ = gtk_file_filter_new ();
	g_object_ref_sink (_tmp7_);
	filter = _tmp7_;
	_tmp8_ = chooser;
	_tmp9_ = filter;
	gtk_file_chooser_set_filter ((GtkFileChooser*) _tmp8_, _tmp9_);
	_tmp10_ = filter;
	gtk_file_filter_add_mime_type (_tmp10_, "image/*");
	_tmp11_ = chooser;
	if (gtk_dialog_run ((GtkDialog*) _tmp11_) == ((gint) GTK_RESPONSE_ACCEPT)) {
		gchar* uri = NULL;
		GtkFileChooserDialog* _tmp12_;
		gchar* _tmp13_;
		const gchar* _tmp14_;
		gchar* _tmp15_;
		gchar* _tmp16_;
		gboolean _tmp17_;
		_tmp12_ = chooser;
		_tmp13_ = gtk_file_chooser_get_uri ((GtkFileChooser*) _tmp12_);
		uri = _tmp13_;
		_tmp14_ = uri;
		_tmp15_ = string_slice (_tmp14_, (glong) 0, (glong) 7);
		_tmp16_ = _tmp15_;
		_tmp17_ = g_strcmp0 (_tmp16_, "file://") == 0;
		_g_free0 (_tmp16_);
		if (_tmp17_) {
			gchar* fname = NULL;
			const gchar* _tmp18_;
			gchar* _tmp19_;
			RpcClient* _tmp20_;
			gint64 _tmp21_;
			const gchar* _tmp22_;
			_tmp18_ = uri;
			_tmp19_ = g_filename_from_uri (_tmp18_, NULL, &_inner_error_);
			fname = _tmp19_;
			if (G_UNLIKELY (_inner_error_ != NULL)) {
				_g_free0 (uri);
				_g_object_unref0 (filter);
				_g_object_unref0 (chooser);
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return;
			}
			_tmp20_ = rpc1;
			_tmp21_ = self->priv->to;
			_tmp22_ = fname;
			if (rpc_client_send_file (_tmp20_, _tmp21_, _tmp22_)) {
				gchar* text1 = NULL;
				const gchar* _tmp23_;
				const gchar* _tmp24_;
				const gchar* _tmp25_;
				gchar* _tmp26_;
				gchar* _tmp27_;
				const gchar* _tmp28_;
				gchar* _tmp29_;
				gchar* _tmp30_;
				const gchar* _tmp31_;
				gint16 _tmp32_;
				const gchar* _tmp33_;
				_tmp23_ = uri;
				_tmp24_ = string_to_string (_tmp23_);
				_tmp25_ = fname;
				_tmp26_ = g_path_get_basename (_tmp25_);
				_tmp27_ = _tmp26_;
				_tmp28_ = string_to_string (_tmp27_);
				_tmp29_ = g_strconcat ("<a href='", _tmp24_, "'>", _tmp28_, "</a>", NULL);
				_tmp30_ = _tmp29_;
				_g_free0 (_tmp27_);
				text1 = _tmp30_;
				_tmp31_ = self->uname;
				_tmp32_ = self->usex;
				my_grid_add_left_name_icon (self, _tmp31_, _tmp32_);
				_tmp33_ = text1;
				my_grid_add_text (self, _tmp33_, TRUE, TRUE);
				_g_free0 (text1);
			} else {
				gtk_main_quit ();
			}
			_g_free0 (fname);
		}
		_g_free0 (uri);
	}
	_tmp34_ = chooser;
	g_signal_emit_by_name ((GtkDialog*) _tmp34_, "close");
	_g_object_unref0 (filter);
	_g_object_unref0 (chooser);
}


static void
___lambda28__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda28_ ((MyGrid*) self);
}


static void
__lambda29_ (MyGrid* self)
{
	SearchDialg* _tmp0_;
	SearchDialg* _tmp1_;
	_tmp0_ = search_dialg_new ();
	_g_object_unref0 (search1);
	search1 = _tmp0_;
	_tmp1_ = search1;
	search_dialg_show (_tmp1_);
	return;
}


static void
___lambda29__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda29_ ((MyGrid*) self);
}


static void
__lambda32_ (Block1Data* _data1_)
{
	MyGrid* self;
	GtkEntry* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	self = _data1_->self;
	_tmp0_ = self->port1;
	g_object_get (_tmp0_, "editable", &_tmp1_, NULL);
	_tmp2_ = _tmp1_;
	if (_tmp2_ == FALSE) {
		GtkEntry* _tmp3_;
		GtkButton* _tmp4_;
		_tmp3_ = self->port1;
		g_object_set (_tmp3_, "editable", TRUE, NULL);
		_tmp4_ = _data1_->b6;
		gtk_button_set_label (_tmp4_, "保存");
	} else {
		GtkEntry* _tmp5_;
		GtkButton* _tmp6_;
		gboolean ret = FALSE;
		RpcClient* _tmp7_;
		GtkEntry* _tmp8_;
		const gchar* _tmp9_;
		const gchar* _tmp10_;
		gint64 _tmp11_;
		gboolean _tmp12_;
		_tmp5_ = self->port1;
		g_object_set (_tmp5_, "editable", FALSE, NULL);
		_tmp6_ = _data1_->b6;
		gtk_button_set_label (_tmp6_, "修改");
		_tmp7_ = rpc1;
		_tmp8_ = self->port1;
		_tmp9_ = gtk_entry_get_text (_tmp8_);
		_tmp10_ = _tmp9_;
		_tmp11_ = g_ascii_strtoll (_tmp10_, NULL, 0);
		ret = rpc_client_set_proxy (_tmp7_, (guint16) _tmp11_);
		_tmp12_ = ret;
		if (_tmp12_ == FALSE) {
			gtk_main_quit ();
		}
	}
}


static void
___lambda32__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda32_ (self);
}


static void
__lambda33_ (MyGrid* self)
{
	StrangersDialg* _tmp0_;
	_tmp0_ = strangers1;
	strangers_dialg_show (_tmp0_);
}


static void
___lambda33__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda33_ ((MyGrid*) self);
}


static void
__lambda34_ (MyGrid* self)
{
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* sex = NULL;
	gchar* _tmp4_;
	gint16 _tmp5_;
	gint64 _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	gint16 _tmp10_;
	gchar* _tmp11_;
	gchar* _tmp12_;
	const gchar* _tmp13_;
	const gchar* _tmp14_;
	const gchar* _tmp15_;
	const gchar* _tmp16_;
	gchar* _tmp17_;
	gchar* _tmp18_;
	_tmp0_ = self->uname;
	_tmp1_ = string_to_string (_tmp0_);
	_tmp2_ = g_strconcat ("登录用户：", _tmp1_, " 的情况", NULL);
	_tmp3_ = _tmp2_;
	my_grid_add_left_name_icon (self, _tmp3_, (gint16) 1);
	_g_free0 (_tmp3_);
	_tmp4_ = g_strdup ("男");
	sex = _tmp4_;
	_tmp5_ = self->usex;
	if (((gint) _tmp5_) == 2) {
		gchar* _tmp6_;
		_tmp6_ = g_strdup ("女");
		_g_free0 (sex);
		sex = _tmp6_;
	}
	_tmp7_ = self->uid;
	_tmp8_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp7_);
	_tmp9_ = _tmp8_;
	_tmp10_ = self->uage;
	_tmp11_ = g_strdup_printf ("%" G_GINT16_FORMAT, _tmp10_);
	_tmp12_ = _tmp11_;
	_tmp13_ = sex;
	_tmp14_ = string_to_string (_tmp13_);
	_tmp15_ = self->udesc;
	_tmp16_ = string_to_string (_tmp15_);
	_tmp17_ = g_strconcat ("ID:", _tmp9_, "\n年龄：", _tmp12_, "\n性别：", _tmp14_, "\n自述：", _tmp16_, NULL);
	_tmp18_ = _tmp17_;
	my_grid_add_text (self, _tmp18_, FALSE, FALSE);
	_g_free0 (_tmp18_);
	_g_free0 (_tmp12_);
	_g_free0 (_tmp9_);
	_g_free0 (sex);
}


static void
___lambda34__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda34_ ((MyGrid*) self);
}


static gboolean
__lambda36_ (MyGrid* self)
{
	gboolean result = FALSE;
	GtkAdjustment* adj1 = NULL;
	GtkListBox* _tmp0_;
	GtkAdjustment* _tmp1_;
	GtkAdjustment* _tmp2_;
	gdouble _tmp3_;
	gdouble _tmp4_;
	_tmp0_ = self->priv->msgs;
	_tmp1_ = gtk_list_box_get_adjustment (_tmp0_);
	_tmp2_ = _g_object_ref0 (_tmp1_);
	adj1 = _tmp2_;
	_tmp3_ = gtk_adjustment_get_upper (adj1);
	_tmp4_ = _tmp3_;
	gtk_adjustment_set_value (adj1, _tmp4_);
	result = FALSE;
	_g_object_unref0 (adj1);
	return result;
}


static gboolean
___lambda36__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda36_ ((MyGrid*) self);
	return result;
}


static void
__lambda35_ (MyGrid* self)
{
	gint64 _tmp0_;
	const gchar* _tmp6_;
	gint16 _tmp7_;
	GtkEntry* _tmp8_;
	const gchar* _tmp9_;
	const gchar* _tmp10_;
	GtkEntry* _tmp11_;
	_tmp0_ = self->priv->to;
	if (_tmp0_ > ((gint64) 0)) {
		RpcClient* _tmp1_;
		gint64 _tmp2_;
		GtkEntry* _tmp3_;
		const gchar* _tmp4_;
		const gchar* _tmp5_;
		_tmp1_ = rpc1;
		_tmp2_ = self->priv->to;
		_tmp3_ = self->priv->entry1;
		_tmp4_ = gtk_entry_get_text (_tmp3_);
		_tmp5_ = _tmp4_;
		if (FALSE == rpc_client_ChatTo (_tmp1_, _tmp2_, _tmp5_)) {
			gtk_main_quit ();
		}
	}
	_tmp6_ = self->uname;
	_tmp7_ = self->usex;
	my_grid_add_left_name_icon (self, _tmp6_, _tmp7_);
	_tmp8_ = self->priv->entry1;
	_tmp9_ = gtk_entry_get_text (_tmp8_);
	_tmp10_ = _tmp9_;
	my_grid_add_text (self, _tmp10_, FALSE, FALSE);
	_tmp11_ = self->priv->entry1;
	gtk_entry_set_text (_tmp11_, "");
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda36__gsource_func, g_object_ref (self), g_object_unref);
}


static void
___lambda35__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda35_ ((MyGrid*) self);
}


static void
__lambda37_ (MyGrid* self,
             GtkListBoxRow* r)
{
	gint64 id = 0LL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gint64 _tmp2_;
	gint64 _tmp3_;
	gint64 _tmp4_;
	UserData* u = NULL;
	GeeHashMap* _tmp5_;
	gint64 _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	gpointer _tmp9_;
	UserData* _tmp10_;
	GtkListBox* _tmp11_;
	GeeHashMap* _tmp14_;
	gint64 _tmp15_;
	gchar* _tmp16_;
	gchar* _tmp17_;
	gpointer _tmp18_;
	GtkScrolledWindow* _tmp19_;
	GtkListBox* _tmp20_;
	GtkGrid* grid = NULL;
	GeeHashMap* _tmp21_;
	gint64 _tmp22_;
	gchar* _tmp23_;
	gchar* _tmp24_;
	gpointer _tmp25_;
	GtkGrid* _tmp26_;
	GtkGrid* _tmp27_;
	GtkStyleContext* sc3 = NULL;
	GtkGrid* _tmp28_;
	GtkStyleContext* _tmp29_;
	GtkStyleContext* _tmp30_;
	GtkStyleContext* _tmp31_;
	GtkCssProvider* _tmp32_;
	GtkStyleContext* _tmp33_;
	GtkScrolledWindow* _tmp34_;
	_tmp0_ = gtk_widget_get_name ((GtkWidget*) r);
	_tmp1_ = _tmp0_;
	_tmp2_ = g_ascii_strtoll (_tmp1_, NULL, 0);
	id = _tmp2_;
	_tmp3_ = id;
	if (_tmp3_ == ((gint64) 0)) {
		return;
	}
	_tmp4_ = id;
	self->priv->to = _tmp4_;
	_tmp5_ = self->priv->frds1;
	_tmp6_ = id;
	_tmp7_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp6_);
	_tmp8_ = _tmp7_;
	_tmp9_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp5_, _tmp8_);
	_tmp10_ = (UserData*) _tmp9_;
	_g_free0 (_tmp8_);
	u = _tmp10_;
	_tmp11_ = self->priv->msgs;
	if (_tmp11_ != NULL) {
		GtkScrolledWindow* _tmp12_;
		GtkListBox* _tmp13_;
		_tmp12_ = self->priv->msg_win;
		_tmp13_ = self->priv->msgs;
		gtk_container_remove ((GtkContainer*) _tmp12_, (GtkWidget*) _tmp13_);
	}
	_tmp14_ = self->priv->boxes;
	_tmp15_ = id;
	_tmp16_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp15_);
	_tmp17_ = _tmp16_;
	_tmp18_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp14_, _tmp17_);
	_g_object_unref0 (self->priv->msgs);
	self->priv->msgs = (GtkListBox*) _tmp18_;
	_g_free0 (_tmp17_);
	_tmp19_ = self->priv->msg_win;
	_tmp20_ = self->priv->msgs;
	gtk_container_add ((GtkContainer*) _tmp19_, (GtkWidget*) _tmp20_);
	_tmp21_ = self->priv->frd_boxes;
	_tmp22_ = id;
	_tmp23_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp22_);
	_tmp24_ = _tmp23_;
	_tmp25_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp21_, _tmp24_);
	_tmp26_ = _g_object_ref0 ((GtkGrid*) _tmp25_);
	_tmp27_ = _tmp26_;
	_g_free0 (_tmp24_);
	grid = _tmp27_;
	_tmp28_ = grid;
	_tmp29_ = gtk_widget_get_style_context ((GtkWidget*) _tmp28_);
	_tmp30_ = _g_object_ref0 (_tmp29_);
	sc3 = _tmp30_;
	_tmp31_ = sc3;
	_tmp32_ = self->mark1;
	gtk_style_context_remove_provider (_tmp31_, (GtkStyleProvider*) _tmp32_);
	_tmp33_ = sc3;
	gtk_style_context_remove_class (_tmp33_, "mark");
	_tmp34_ = self->priv->msg_win;
	gtk_widget_show_all ((GtkWidget*) _tmp34_);
	_g_object_unref0 (sc3);
	_g_object_unref0 (grid);
	_user_data_free0 (u);
}


static void
___lambda37__gtk_list_box_row_selected (GtkListBox* _sender,
                                        GtkListBoxRow* row,
                                        gpointer self)
{
	__lambda37_ ((MyGrid*) self, row);
}


MyGrid*
my_grid_construct (GType object_type)
{
	MyGrid * self = NULL;
	Block1Data* _data1_;
	GeeHashMap* _tmp0_;
	GeeHashMap* _tmp1_;
	GtkGrid* _tmp2_;
	GtkGrid* _tmp3_;
	GtkCssProvider* _tmp4_;
	GtkStyleContext* sc = NULL;
	GtkGrid* _tmp5_;
	GtkStyleContext* _tmp6_;
	GtkStyleContext* _tmp7_;
	GtkStyleContext* _tmp8_;
	GtkCssProvider* _tmp9_;
	GtkCssProvider* _tmp10_;
	GtkCssProvider* _tmp11_;
	GtkCssProvider* _tmp12_;
	GtkCssProvider* _tmp13_;
	GtkCssProvider* _tmp14_;
	GtkCssProvider* _tmp15_;
	GtkCssProvider* _tmp16_;
	GtkCssProvider* _tmp17_;
	GtkCssProvider* _tmp18_;
	GtkScrolledWindow* scrollWin1 = NULL;
	GtkScrolledWindow* _tmp19_;
	GtkScrolledWindow* _tmp20_;
	GtkScrolledWindow* _tmp21_;
	GtkGrid* _tmp22_;
	GtkScrolledWindow* _tmp23_;
	GtkListBox* _tmp24_;
	GtkScrolledWindow* _tmp25_;
	GtkListBox* _tmp26_;
	GtkLabel* t1 = NULL;
	GtkLabel* _tmp27_;
	GtkListBox* _tmp28_;
	GtkLabel* _tmp29_;
	GtkListBoxRow* r0 = NULL;
	GtkLabel* _tmp30_;
	GtkContainer* _tmp31_;
	GtkContainer* _tmp32_;
	GtkListBoxRow* _tmp33_;
	GtkListBoxRow* _tmp34_;
	GtkListBoxRow* _tmp35_;
	GtkListBox* _tmp36_;
	GtkStyleContext* sc1 = NULL;
	GtkListBox* _tmp37_;
	GtkStyleContext* _tmp38_;
	GtkStyleContext* _tmp39_;
	GtkStyleContext* _tmp40_;
	GtkCssProvider* _tmp41_;
	GtkListBox* _tmp42_;
	GtkButton* b1 = NULL;
	GtkButton* _tmp43_;
	GtkGrid* _tmp44_;
	GtkButton* _tmp45_;
	GtkButton* _tmp46_;
	GtkGrid* _tmp47_;
	GtkButton* _tmp48_;
	GtkButton* _tmp49_;
	GtkGrid* _tmp50_;
	GtkButton* _tmp51_;
	GtkButton* _tmp52_;
	GtkImage* sp = NULL;
	GtkImage* _tmp53_;
	GtkImage* _tmp54_;
	GtkGrid* _tmp55_;
	GtkImage* _tmp56_;
	GtkLabel* b4 = NULL;
	GtkLabel* _tmp57_;
	GtkLabel* _tmp58_;
	GtkGrid* _tmp59_;
	GtkLabel* _tmp60_;
	GtkEntry* _tmp61_;
	GtkEntry* _tmp62_;
	guint16 _tmp63_;
	gchar* _tmp64_;
	gchar* _tmp65_;
	GtkEntry* _tmp66_;
	GtkEntry* _tmp67_;
	GtkEntry* _tmp68_;
	GtkGrid* _tmp69_;
	GtkEntry* _tmp70_;
	GtkButton* _tmp71_;
	GtkGrid* _tmp72_;
	GtkButton* _tmp73_;
	GtkScrolledWindow* _tmp74_;
	GtkScrolledWindow* _tmp75_;
	GtkScrolledWindow* _tmp76_;
	GtkGrid* _tmp77_;
	GtkScrolledWindow* _tmp78_;
	GtkGrid* grid1 = NULL;
	GtkGrid* _tmp79_;
	GtkGrid* _tmp80_;
	GtkGrid* _tmp81_;
	GtkButton* bf1 = NULL;
	GtkButton* _tmp82_;
	GtkGrid* _tmp83_;
	GtkButton* _tmp84_;
	GtkButton* bp1 = NULL;
	GtkButton* _tmp85_;
	GtkGrid* _tmp86_;
	GtkButton* _tmp87_;
	GtkEntry* _tmp88_;
	GtkGrid* _tmp89_;
	GtkEntry* _tmp90_;
	GtkEntry* _tmp91_;
	GtkButton* b7 = NULL;
	GtkButton* _tmp92_;
	GtkGrid* _tmp93_;
	GtkButton* _tmp94_;
	GtkGrid* _tmp95_;
	GtkButton* _tmp96_;
	GtkButton* _tmp97_;
	GtkButton* _tmp98_;
	GtkButton* _tmp99_;
	GtkButton* _tmp100_;
	GtkButton* _tmp101_;
	GtkButton* _tmp102_;
	GtkListBox* _tmp103_;
	GError * _inner_error_ = NULL;
	_data1_ = g_slice_new0 (Block1Data);
	_data1_->_ref_count_ = 1;
	self = (MyGrid*) g_object_new (object_type, NULL);
	_data1_->self = g_object_ref (self);
	_tmp0_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, TYPE_USER_DATA, (GBoxedCopyFunc) user_data_dup, (GDestroyNotify) user_data_free, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->frds1);
	self->priv->frds1 = _tmp0_;
	_tmp1_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, gtk_grid_get_type (), NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->frd_boxes);
	self->priv->frd_boxes = _tmp1_;
	_tmp2_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp2_);
	_g_object_unref0 (self->mygrid);
	self->mygrid = _tmp2_;
	_tmp3_ = self->mygrid;
	gtk_grid_set_column_spacing (_tmp3_, (guint) 5);
	_tmp4_ = gtk_css_provider_new ();
	_g_object_unref0 (self->priv->cssp);
	self->priv->cssp = _tmp4_;
	_tmp5_ = self->mygrid;
	_tmp6_ = gtk_widget_get_style_context ((GtkWidget*) _tmp5_);
	_tmp7_ = _g_object_ref0 (_tmp6_);
	sc = _tmp7_;
	_tmp8_ = sc;
	_tmp9_ = self->priv->cssp;
	gtk_style_context_add_provider (_tmp8_, (GtkStyleProvider*) _tmp9_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	_tmp10_ = self->priv->cssp;
	gtk_css_provider_load_from_data (_tmp10_, "grid{\n" \
"\tpadding:5px 5px 5px 5px;\n" \
"\tbackground-color:#BABABA;\n" \
"}\n" \
"list{\n" \
"\tbackground-color:#FFFFFF;\n" \
"\tcolor:#000000;\n" \
"}\n", (gssize) -1, &_inner_error_);
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		_g_object_unref0 (sc);
		block1_data_unref (_data1_);
		_data1_ = NULL;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp11_ = gtk_css_provider_new ();
	_g_object_unref0 (self->provider1);
	self->provider1 = _tmp11_;
	_tmp12_ = self->provider1;
	gtk_css_provider_load_from_data (_tmp12_, "grid{color:#FF0000;}\n", (gssize) -1, &_inner_error_);
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		_g_object_unref0 (sc);
		block1_data_unref (_data1_);
		_data1_ = NULL;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp13_ = gtk_css_provider_new ();
	_g_object_unref0 (self->mark1);
	self->mark1 = _tmp13_;
	_tmp14_ = self->mark1;
	gtk_css_provider_load_from_data (_tmp14_, "grid{color:#0000FF;}\n", (gssize) -1, &_inner_error_);
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		_g_object_unref0 (sc);
		block1_data_unref (_data1_);
		_data1_ = NULL;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp15_ = gtk_css_provider_new ();
	_g_object_unref0 (self->button1);
	self->button1 = _tmp15_;
	_tmp16_ = self->button1;
	gtk_css_provider_load_from_data (_tmp16_, "button{color:#FF0000;}\n", (gssize) -1, &_inner_error_);
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		_g_object_unref0 (sc);
		block1_data_unref (_data1_);
		_data1_ = NULL;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp17_ = gtk_css_provider_new ();
	_g_object_unref0 (self->link_css1);
	self->link_css1 = _tmp17_;
	_tmp18_ = self->link_css1;
	gtk_css_provider_load_from_data (_tmp18_, "label>link{color:#0000FF;}", (gssize) -1, &_inner_error_);
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		_g_object_unref0 (sc);
		block1_data_unref (_data1_);
		_data1_ = NULL;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp19_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_ref_sink (_tmp19_);
	scrollWin1 = _tmp19_;
	_tmp20_ = scrollWin1;
	g_object_set ((GtkWidget*) _tmp20_, "width-request", 160, NULL);
	_tmp21_ = scrollWin1;
	g_object_set ((GtkWidget*) _tmp21_, "expand", TRUE, NULL);
	_tmp22_ = self->mygrid;
	_tmp23_ = scrollWin1;
	gtk_grid_attach (_tmp22_, (GtkWidget*) _tmp23_, 0, 0, 2, 3);
	_tmp24_ = (GtkListBox*) gtk_list_box_new ();
	g_object_ref_sink (_tmp24_);
	_g_object_unref0 (self->priv->friends);
	self->priv->friends = _tmp24_;
	_tmp25_ = scrollWin1;
	_tmp26_ = self->priv->friends;
	gtk_container_add ((GtkContainer*) _tmp25_, (GtkWidget*) _tmp26_);
	_tmp27_ = (GtkLabel*) gtk_label_new ("我的朋友");
	g_object_ref_sink (_tmp27_);
	t1 = _tmp27_;
	_tmp28_ = self->priv->friends;
	_tmp29_ = t1;
	gtk_container_add ((GtkContainer*) _tmp28_, (GtkWidget*) _tmp29_);
	_tmp30_ = t1;
	_tmp31_ = gtk_widget_get_parent ((GtkWidget*) _tmp30_);
	_tmp32_ = _tmp31_;
	_tmp33_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp32_, gtk_list_box_row_get_type ()) ? ((GtkListBoxRow*) _tmp32_) : NULL);
	r0 = _tmp33_;
	_tmp34_ = r0;
	gtk_list_box_row_set_selectable (_tmp34_, FALSE);
	_tmp35_ = r0;
	gtk_widget_set_name ((GtkWidget*) _tmp35_, "0");
	_tmp36_ = self->priv->friends;
	gtk_container_set_border_width ((GtkContainer*) _tmp36_, (guint) 3);
	_tmp37_ = self->priv->friends;
	_tmp38_ = gtk_widget_get_style_context ((GtkWidget*) _tmp37_);
	_tmp39_ = _g_object_ref0 (_tmp38_);
	sc1 = _tmp39_;
	_tmp40_ = sc1;
	_tmp41_ = self->priv->cssp;
	gtk_style_context_add_provider (_tmp40_, (GtkStyleProvider*) _tmp41_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	_tmp42_ = self->priv->friends;
	gtk_list_box_set_sort_func (_tmp42_, ___lambda5__gtk_list_box_sort_func, g_object_ref (self), g_object_unref);
	_tmp43_ = (GtkButton*) gtk_button_new_with_label ("找人");
	g_object_ref_sink (_tmp43_);
	b1 = _tmp43_;
	_tmp44_ = self->mygrid;
	_tmp45_ = b1;
	gtk_grid_attach (_tmp44_, (GtkWidget*) _tmp45_, 0, 3, 1, 1);
	_tmp46_ = (GtkButton*) gtk_button_new_with_label ("陌生人");
	g_object_ref_sink (_tmp46_);
	_g_object_unref0 (self->strangers_btn);
	self->strangers_btn = _tmp46_;
	_tmp47_ = self->mygrid;
	_tmp48_ = self->strangers_btn;
	gtk_grid_attach (_tmp47_, (GtkWidget*) _tmp48_, 1, 3, 1, 1);
	_tmp49_ = (GtkButton*) gtk_button_new_with_label ("登录用户");
	g_object_ref_sink (_tmp49_);
	_g_object_unref0 (self->user_btn);
	self->user_btn = _tmp49_;
	_tmp50_ = self->mygrid;
	_tmp51_ = self->user_btn;
	gtk_grid_attach (_tmp50_, (GtkWidget*) _tmp51_, 2, 0, 1, 1);
	_tmp52_ = self->user_btn;
	gtk_widget_set_hexpand ((GtkWidget*) _tmp52_, TRUE);
	_tmp53_ = (GtkImage*) gtk_image_new ();
	g_object_ref_sink (_tmp53_);
	sp = _tmp53_;
	_tmp54_ = sp;
	gtk_widget_set_hexpand ((GtkWidget*) _tmp54_, TRUE);
	_tmp55_ = self->mygrid;
	_tmp56_ = sp;
	gtk_grid_attach (_tmp55_, (GtkWidget*) _tmp56_, 3, 0, 1, 1);
	_tmp57_ = (GtkLabel*) gtk_label_new ("代理端口");
	g_object_ref_sink (_tmp57_);
	b4 = _tmp57_;
	_tmp58_ = b4;
	gtk_widget_set_hexpand ((GtkWidget*) _tmp58_, TRUE);
	_tmp59_ = self->mygrid;
	_tmp60_ = b4;
	gtk_grid_attach (_tmp59_, (GtkWidget*) _tmp60_, 4, 0, 1, 1);
	_tmp61_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp61_);
	_g_object_unref0 (self->port1);
	self->port1 = _tmp61_;
	_tmp62_ = self->port1;
	_tmp63_ = proxy_port;
	_tmp64_ = g_strdup_printf ("%hu", _tmp63_);
	_tmp65_ = _tmp64_;
	gtk_entry_set_text (_tmp62_, _tmp65_);
	_g_free0 (_tmp65_);
	_tmp66_ = self->port1;
	gtk_entry_set_max_length (_tmp66_, 5);
	_tmp67_ = self->port1;
	g_object_set ((GtkWidget*) _tmp67_, "width-request", 50, NULL);
	_tmp68_ = self->port1;
	g_object_set (_tmp68_, "editable", FALSE, NULL);
	_tmp69_ = self->mygrid;
	_tmp70_ = self->port1;
	gtk_grid_attach (_tmp69_, (GtkWidget*) _tmp70_, 5, 0, 1, 1);
	_tmp71_ = (GtkButton*) gtk_button_new_with_label ("修改");
	g_object_ref_sink (_tmp71_);
	_data1_->b6 = _tmp71_;
	_tmp72_ = self->mygrid;
	_tmp73_ = _data1_->b6;
	gtk_grid_attach (_tmp72_, (GtkWidget*) _tmp73_, 6, 0, 1, 1);
	_tmp74_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_ref_sink (_tmp74_);
	_g_object_unref0 (self->priv->msg_win);
	self->priv->msg_win = _tmp74_;
	_tmp75_ = self->priv->msg_win;
	g_object_set ((GtkWidget*) _tmp75_, "height-request", 450, NULL);
	_tmp76_ = self->priv->msg_win;
	g_object_set ((GtkWidget*) _tmp76_, "expand", TRUE, NULL);
	_tmp77_ = self->mygrid;
	_tmp78_ = self->priv->msg_win;
	gtk_grid_attach (_tmp77_, (GtkWidget*) _tmp78_, 2, 1, 5, 1);
	_tmp79_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp79_);
	grid1 = _tmp79_;
	_tmp80_ = self->mygrid;
	_tmp81_ = grid1;
	gtk_grid_attach (_tmp80_, (GtkWidget*) _tmp81_, 2, 2, 5, 2);
	_tmp82_ = (GtkButton*) gtk_button_new_with_label ("文件");
	g_object_ref_sink (_tmp82_);
	bf1 = _tmp82_;
	_tmp83_ = grid1;
	_tmp84_ = bf1;
	gtk_grid_attach (_tmp83_, (GtkWidget*) _tmp84_, 0, 0, 1, 1);
	_tmp85_ = (GtkButton*) gtk_button_new_with_label ("图片");
	g_object_ref_sink (_tmp85_);
	bp1 = _tmp85_;
	_tmp86_ = grid1;
	_tmp87_ = bp1;
	gtk_grid_attach (_tmp86_, (GtkWidget*) _tmp87_, 1, 0, 1, 1);
	_tmp88_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp88_);
	_g_object_unref0 (self->priv->entry1);
	self->priv->entry1 = _tmp88_;
	_tmp89_ = grid1;
	_tmp90_ = self->priv->entry1;
	gtk_grid_attach (_tmp89_, (GtkWidget*) _tmp90_, 0, 1, 3, 1);
	_tmp91_ = self->priv->entry1;
	gtk_widget_set_hexpand ((GtkWidget*) _tmp91_, TRUE);
	_tmp92_ = (GtkButton*) gtk_button_new_with_label ("发送");
	g_object_ref_sink (_tmp92_);
	b7 = _tmp92_;
	_tmp93_ = grid1;
	_tmp94_ = b7;
	gtk_grid_attach (_tmp93_, (GtkWidget*) _tmp94_, 3, 1, 1, 1);
	_tmp95_ = self->mygrid;
	g_signal_connect_object ((GtkWidget*) _tmp95_, "show", (GCallback) ___lambda6__gtk_widget_show, self, 0);
	_tmp96_ = bf1;
	g_signal_connect_object (_tmp96_, "clicked", (GCallback) ___lambda27__gtk_button_clicked, self, 0);
	_tmp97_ = bp1;
	g_signal_connect_object (_tmp97_, "clicked", (GCallback) ___lambda28__gtk_button_clicked, self, 0);
	_tmp98_ = b1;
	g_signal_connect_object (_tmp98_, "clicked", (GCallback) ___lambda29__gtk_button_clicked, self, 0);
	_tmp99_ = _data1_->b6;
	g_signal_connect_data (_tmp99_, "clicked", (GCallback) ___lambda32__gtk_button_clicked, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
	_tmp100_ = self->strangers_btn;
	g_signal_connect_object (_tmp100_, "clicked", (GCallback) ___lambda33__gtk_button_clicked, self, 0);
	_tmp101_ = self->user_btn;
	g_signal_connect_object (_tmp101_, "clicked", (GCallback) ___lambda34__gtk_button_clicked, self, 0);
	_tmp102_ = b7;
	g_signal_connect_object (_tmp102_, "clicked", (GCallback) ___lambda35__gtk_button_clicked, self, 0);
	_tmp103_ = self->priv->friends;
	g_signal_connect_object (_tmp103_, "row-selected", (GCallback) ___lambda37__gtk_list_box_row_selected, self, 0);
	_g_object_unref0 (b7);
	_g_object_unref0 (bp1);
	_g_object_unref0 (bf1);
	_g_object_unref0 (grid1);
	_g_object_unref0 (b4);
	_g_object_unref0 (sp);
	_g_object_unref0 (b1);
	_g_object_unref0 (sc1);
	_g_object_unref0 (r0);
	_g_object_unref0 (t1);
	_g_object_unref0 (scrollWin1);
	_g_object_unref0 (sc);
	block1_data_unref (_data1_);
	_data1_ = NULL;
	return self;
}


MyGrid*
my_grid_new (void)
{
	return my_grid_construct (TYPE_MY_GRID);
}


void
my_grid_add_listbox_id (MyGrid* self,
                        gint64 uid)
{
	GtkListBox* box = NULL;
	GtkListBox* _tmp0_;
	GeeHashMap* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	GtkListBox* _tmp4_;
	GtkListBox* _tmp5_;
	GtkListBox* _tmp6_;
	GtkListBox* _tmp7_;
	UserData* u1 = NULL;
	GeeHashMap* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	gpointer _tmp11_;
	UserData* _tmp12_;
	GtkLabel* t2 = NULL;
	UserData* _tmp13_;
	const gchar* _tmp14_;
	const gchar* _tmp15_;
	gchar* _tmp16_;
	gchar* _tmp17_;
	GtkLabel* _tmp18_;
	GtkLabel* _tmp19_;
	GtkListBox* _tmp20_;
	GtkLabel* _tmp21_;
	GtkLabel* _tmp22_;
	GtkContainer* _tmp23_;
	GtkContainer* _tmp24_;
	GtkListBox* _tmp25_;
	GtkListBox* _tmp28_;
	GtkListBox* _tmp29_;
	GtkScrolledWindow* _tmp30_;
	GtkListBox* _tmp31_;
	UserData* _tmp32_;
	const gchar* _tmp33_;
	gint _tmp34_;
	gint _tmp35_;
	GtkScrolledWindow* _tmp48_;
	GtkStyleContext* sc2 = NULL;
	GtkListBox* _tmp49_;
	GtkStyleContext* _tmp50_;
	GtkStyleContext* _tmp51_;
	GtkCssProvider* _tmp52_;
	g_return_if_fail (self != NULL);
	_tmp0_ = (GtkListBox*) gtk_list_box_new ();
	g_object_ref_sink (_tmp0_);
	box = _tmp0_;
	_tmp1_ = self->priv->boxes;
	_tmp2_ = g_strdup_printf ("%" G_GINT64_FORMAT, uid);
	_tmp3_ = _tmp2_;
	_tmp4_ = box;
	gee_abstract_map_set ((GeeAbstractMap*) _tmp1_, _tmp3_, _tmp4_);
	_g_free0 (_tmp3_);
	_tmp5_ = box;
	gtk_list_box_set_selection_mode (_tmp5_, GTK_SELECTION_NONE);
	_tmp6_ = box;
	g_object_set ((GtkWidget*) _tmp6_, "expand", TRUE, NULL);
	_tmp7_ = box;
	gtk_container_set_border_width ((GtkContainer*) _tmp7_, (guint) 3);
	_tmp8_ = self->priv->frds1;
	_tmp9_ = g_strdup_printf ("%" G_GINT64_FORMAT, uid);
	_tmp10_ = _tmp9_;
	_tmp11_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp8_, _tmp10_);
	_tmp12_ = (UserData*) _tmp11_;
	_g_free0 (_tmp10_);
	u1 = _tmp12_;
	_tmp13_ = u1;
	_tmp14_ = (*_tmp13_).name;
	_tmp15_ = string_to_string (_tmp14_);
	_tmp16_ = g_strconcat ("和 ", _tmp15_, " 聊天", NULL);
	_tmp17_ = _tmp16_;
	_tmp18_ = (GtkLabel*) gtk_label_new (_tmp17_);
	g_object_ref_sink (_tmp18_);
	_tmp19_ = _tmp18_;
	_g_free0 (_tmp17_);
	t2 = _tmp19_;
	_tmp20_ = box;
	_tmp21_ = t2;
	gtk_container_add ((GtkContainer*) _tmp20_, (GtkWidget*) _tmp21_);
	_tmp22_ = t2;
	_tmp23_ = gtk_widget_get_parent ((GtkWidget*) _tmp22_);
	_tmp24_ = _tmp23_;
	gtk_list_box_row_set_selectable (G_TYPE_CHECK_INSTANCE_TYPE (_tmp24_, gtk_list_box_row_get_type ()) ? ((GtkListBoxRow*) _tmp24_) : NULL, FALSE);
	_tmp25_ = self->priv->msgs;
	if (_tmp25_ != NULL) {
		GtkScrolledWindow* _tmp26_;
		GtkListBox* _tmp27_;
		_tmp26_ = self->priv->msg_win;
		_tmp27_ = self->priv->msgs;
		gtk_container_remove ((GtkContainer*) _tmp26_, (GtkWidget*) _tmp27_);
	}
	_tmp28_ = box;
	_tmp29_ = _g_object_ref0 (_tmp28_);
	_g_object_unref0 (self->priv->msgs);
	self->priv->msgs = _tmp29_;
	_tmp30_ = self->priv->msg_win;
	_tmp31_ = self->priv->msgs;
	gtk_container_add ((GtkContainer*) _tmp30_, (GtkWidget*) _tmp31_);
	self->priv->to = uid;
	_tmp32_ = u1;
	_tmp33_ = (*_tmp32_).timestamp_offline;
	_tmp34_ = strlen (_tmp33_);
	_tmp35_ = _tmp34_;
	if (_tmp35_ > 10) {
		UserData* _tmp36_;
		const gchar* _tmp37_;
		UserData* _tmp38_;
		gint16 _tmp39_;
		UserData* _tmp40_;
		const gchar* _tmp41_;
		const gchar* _tmp42_;
		UserData* _tmp43_;
		const gchar* _tmp44_;
		const gchar* _tmp45_;
		gchar* _tmp46_;
		gchar* _tmp47_;
		_tmp36_ = u1;
		_tmp37_ = (*_tmp36_).name;
		_tmp38_ = u1;
		_tmp39_ = (*_tmp38_).sex;
		my_grid_add_right_name_icon (self, _tmp37_, _tmp39_);
		_tmp40_ = u1;
		_tmp41_ = (*_tmp40_).timestamp_offline;
		_tmp42_ = string_to_string (_tmp41_);
		_tmp43_ = u1;
		_tmp44_ = (*_tmp43_).msg_offline;
		_tmp45_ = string_to_string (_tmp44_);
		_tmp46_ = g_strconcat ("离线信息：[", _tmp42_, "]\n", _tmp45_, NULL);
		_tmp47_ = _tmp46_;
		my_grid_add_text (self, _tmp47_, FALSE, FALSE);
		_g_free0 (_tmp47_);
	}
	_tmp48_ = self->priv->msg_win;
	gtk_widget_show_all ((GtkWidget*) _tmp48_);
	_tmp49_ = box;
	_tmp50_ = gtk_widget_get_style_context ((GtkWidget*) _tmp49_);
	_tmp51_ = _g_object_ref0 (_tmp50_);
	sc2 = _tmp51_;
	_tmp52_ = self->priv->cssp;
	gtk_style_context_add_provider (sc2, (GtkStyleProvider*) _tmp52_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	_g_object_unref0 (sc2);
	_g_object_unref0 (t2);
	_user_data_free0 (u1);
	_g_object_unref0 (box);
}


void
my_grid_release_resource (MyGrid* self)
{
	g_return_if_fail (self != NULL);
	self->priv->running = FALSE;
}


static Block3Data*
block3_data_ref (Block3Data* _data3_)
{
	g_atomic_int_inc (&_data3_->_ref_count_);
	return _data3_;
}


static void
block3_data_unref (void * _userdata_)
{
	Block3Data* _data3_;
	_data3_ = (Block3Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data3_->_ref_count_)) {
		MyGrid* self;
		self = _data3_->self;
		user_data_destroy (&_data3_->user1);
		_g_object_unref0 (self);
		g_slice_free (Block3Data, _data3_);
	}
}


static void
__lambda14_ (Block3Data* _data3_)
{
	MyGrid* self;
	RpcClient* _tmp0_;
	UserData _tmp1_;
	gint64 _tmp2_;
	self = _data3_->self;
	_tmp0_ = rpc1;
	_tmp1_ = _data3_->user1;
	_tmp2_ = _tmp1_.id;
	if (FALSE == rpc_client_set_http_id (_tmp0_, _tmp2_)) {
		gtk_main_quit ();
	}
}


static void
___lambda14__gtk_button_clicked (GtkButton* _sender,
                                 gpointer self)
{
	__lambda14_ (self);
}


static gboolean
__lambda16_ (MyGrid* self,
             GdkEventButton* e)
{
	gboolean result = FALSE;
	guint _tmp0_;
	GtkListBoxRow* r = NULL;
	GtkListBox* _tmp1_;
	gdouble _tmp2_;
	GtkListBoxRow* _tmp3_;
	GtkListBoxRow* _tmp4_;
	GtkListBox* _tmp5_;
	GtkListBoxRow* _tmp6_;
	MyFriendMenu* _tmp7_;
	GtkListBoxRow* _tmp8_;
	const gchar* _tmp9_;
	const gchar* _tmp10_;
	MyFriendMenu* _tmp11_;
	g_return_val_if_fail (e != NULL, FALSE);
	_tmp0_ = e->button;
	if (_tmp0_ != ((guint) 3)) {
		result = FALSE;
		return result;
	}
	_tmp1_ = self->priv->friends;
	_tmp2_ = e->y;
	_tmp3_ = gtk_list_box_get_row_at_y (_tmp1_, (gint) _tmp2_);
	_tmp4_ = _g_object_ref0 (_tmp3_);
	r = _tmp4_;
	_tmp5_ = self->priv->friends;
	_tmp6_ = r;
	gtk_list_box_select_row (_tmp5_, _tmp6_);
	_tmp7_ = popup1;
	_tmp8_ = r;
	_tmp9_ = gtk_widget_get_name ((GtkWidget*) _tmp8_);
	_tmp10_ = _tmp9_;
	my_friend_menu_set_id (_tmp7_, _tmp10_);
	_tmp11_ = popup1;
	gtk_menu_popup_at_pointer ((GtkMenu*) _tmp11_, (GdkEvent*) e);
	result = TRUE;
	_g_object_unref0 (r);
	return result;
}


static gboolean
___lambda16__gtk_widget_button_release_event (GtkWidget* _sender,
                                              GdkEventButton* event,
                                              gpointer self)
{
	gboolean result;
	result = __lambda16_ ((MyGrid*) self, event);
	return result;
}


void
my_grid_add_friend (MyGrid* self,
                    UserData* user1)
{
	Block3Data* _data3_;
	UserData _tmp0_;
	UserData _tmp1_ = {0};
	GeeHashMap* _tmp2_;
	UserData _tmp3_;
	gint64 _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	gboolean _tmp7_;
	RpcClient* _tmp14_;
	UserData _tmp15_;
	gint64 _tmp16_;
	gchar* iconp = NULL;
	UserData _tmp17_;
	gint16 _tmp18_;
	GdkPixbuf* pix1 = NULL;
	const gchar* _tmp23_;
	GdkPixbuf* _tmp24_;
	GtkGrid* grid2 = NULL;
	GtkGrid* _tmp25_;
	GtkImage* img2 = NULL;
	GtkImage* _tmp26_;
	GtkImage* _tmp27_;
	GdkPixbuf* _tmp28_;
	GtkGrid* _tmp29_;
	GtkImage* _tmp30_;
	GtkLabel* l2 = NULL;
	UserData _tmp31_;
	const gchar* _tmp32_;
	GtkLabel* _tmp33_;
	GtkLabel* _tmp34_;
	GtkLabel* _tmp35_;
	GtkGrid* _tmp36_;
	GtkLabel* _tmp37_;
	GtkButton* b2 = NULL;
	GtkButton* _tmp38_;
	GtkGrid* _tmp39_;
	GtkButton* _tmp40_;
	GtkGrid* _tmp41_;
	GeeHashMap* _tmp42_;
	UserData _tmp43_;
	gint64 _tmp44_;
	gchar* _tmp45_;
	gchar* _tmp46_;
	GtkGrid* _tmp47_;
	GtkListBox* _tmp48_;
	GtkGrid* _tmp49_;
	GtkListBoxRow* row2 = NULL;
	GtkGrid* _tmp50_;
	GtkContainer* _tmp51_;
	GtkListBoxRow* _tmp52_;
	GtkListBoxRow* _tmp53_;
	UserData _tmp54_;
	gint64 _tmp55_;
	gchar* _tmp56_;
	gchar* _tmp57_;
	GtkGrid* _tmp58_;
	GtkImage* _tmp59_;
	UserData _tmp60_;
	gint16 _tmp61_;
	gchar* _tmp62_;
	gchar* _tmp63_;
	UserData _tmp64_;
	const gchar* _tmp65_;
	const gchar* _tmp66_;
	gchar* _tmp67_;
	gchar* _tmp68_;
	GtkButton* _tmp69_;
	GtkListBox* _tmp70_;
	UserData _tmp71_;
	gint64 _tmp72_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (user1 != NULL);
	_data3_ = g_slice_new0 (Block3Data);
	_data3_->_ref_count_ = 1;
	_data3_->self = g_object_ref (self);
	_tmp0_ = *user1;
	user_data_copy (&_tmp0_, &_tmp1_);
	user_data_destroy (&_data3_->user1);
	_data3_->user1 = _tmp1_;
	_tmp2_ = self->priv->frds1;
	_tmp3_ = _data3_->user1;
	_tmp4_ = _tmp3_.id;
	_tmp5_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = gee_abstract_map_has_key ((GeeAbstractMap*) _tmp2_, _tmp6_);
	_g_free0 (_tmp6_);
	if (_tmp7_) {
		block3_data_unref (_data3_);
		_data3_ = NULL;
		return;
	} else {
		GeeHashMap* _tmp8_;
		UserData _tmp9_;
		gint64 _tmp10_;
		gchar* _tmp11_;
		gchar* _tmp12_;
		UserData _tmp13_;
		_tmp8_ = self->priv->frds1;
		_tmp9_ = _data3_->user1;
		_tmp10_ = _tmp9_.id;
		_tmp11_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp10_);
		_tmp12_ = _tmp11_;
		_tmp13_ = _data3_->user1;
		gee_abstract_map_set ((GeeAbstractMap*) _tmp8_, _tmp12_, &_tmp13_);
		_g_free0 (_tmp12_);
	}
	_tmp14_ = rpc1;
	_tmp15_ = _data3_->user1;
	_tmp16_ = _tmp15_.id;
	if (FALSE == rpc_client_tell (_tmp14_, _tmp16_)) {
		gtk_main_quit ();
	}
	_tmp17_ = _data3_->user1;
	_tmp18_ = _tmp17_.sex;
	if (((gint) _tmp18_) == 1) {
		const gchar* _tmp19_;
		gchar* _tmp20_;
		_tmp19_ = self->man_icon;
		_tmp20_ = g_strdup (_tmp19_);
		_g_free0 (iconp);
		iconp = _tmp20_;
	} else {
		const gchar* _tmp21_;
		gchar* _tmp22_;
		_tmp21_ = self->woman_icon;
		_tmp22_ = g_strdup (_tmp21_);
		_g_free0 (iconp);
		iconp = _tmp22_;
	}
	_tmp23_ = iconp;
	_tmp24_ = gdk_pixbuf_new_from_file (_tmp23_, &_inner_error_);
	pix1 = _tmp24_;
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		_g_free0 (iconp);
		block3_data_unref (_data3_);
		_data3_ = NULL;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp25_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp25_);
	grid2 = _tmp25_;
	_tmp26_ = (GtkImage*) gtk_image_new ();
	g_object_ref_sink (_tmp26_);
	img2 = _tmp26_;
	_tmp27_ = img2;
	_tmp28_ = pix1;
	gtk_image_set_from_pixbuf (_tmp27_, _tmp28_);
	_tmp29_ = grid2;
	_tmp30_ = img2;
	gtk_grid_attach (_tmp29_, (GtkWidget*) _tmp30_, 0, 0, 1, 1);
	_tmp31_ = _data3_->user1;
	_tmp32_ = _tmp31_.name;
	_tmp33_ = (GtkLabel*) gtk_label_new (_tmp32_);
	g_object_ref_sink (_tmp33_);
	l2 = _tmp33_;
	_tmp34_ = l2;
	gtk_label_set_xalign (_tmp34_, (gfloat) 0);
	_tmp35_ = l2;
	gtk_widget_set_hexpand ((GtkWidget*) _tmp35_, TRUE);
	_tmp36_ = grid2;
	_tmp37_ = l2;
	gtk_grid_attach (_tmp36_, (GtkWidget*) _tmp37_, 1, 0, 1, 1);
	_tmp38_ = (GtkButton*) gtk_button_new_with_label ("WEB");
	g_object_ref_sink (_tmp38_);
	b2 = _tmp38_;
	_tmp39_ = grid2;
	_tmp40_ = b2;
	gtk_grid_attach (_tmp39_, (GtkWidget*) _tmp40_, 2, 0, 1, 1);
	_tmp41_ = grid2;
	gtk_grid_set_column_spacing (_tmp41_, (guint) 5);
	_tmp42_ = self->priv->frd_boxes;
	_tmp43_ = _data3_->user1;
	_tmp44_ = _tmp43_.id;
	_tmp45_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp44_);
	_tmp46_ = _tmp45_;
	_tmp47_ = grid2;
	gee_abstract_map_set ((GeeAbstractMap*) _tmp42_, _tmp46_, _tmp47_);
	_g_free0 (_tmp46_);
	_tmp48_ = self->priv->friends;
	_tmp49_ = grid2;
	gtk_container_add ((GtkContainer*) _tmp48_, (GtkWidget*) _tmp49_);
	_tmp50_ = grid2;
	_tmp51_ = gtk_widget_get_parent ((GtkWidget*) _tmp50_);
	_tmp52_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp51_, gtk_list_box_row_get_type ()) ? ((GtkListBoxRow*) _tmp51_) : NULL);
	row2 = _tmp52_;
	_tmp53_ = row2;
	_tmp54_ = _data3_->user1;
	_tmp55_ = _tmp54_.id;
	_tmp56_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp55_);
	_tmp57_ = _tmp56_;
	gtk_widget_set_name ((GtkWidget*) _tmp53_, _tmp57_);
	_g_free0 (_tmp57_);
	_tmp58_ = grid2;
	gtk_widget_show_all ((GtkWidget*) _tmp58_);
	_tmp59_ = img2;
	_tmp60_ = _data3_->user1;
	_tmp61_ = _tmp60_.age;
	_tmp62_ = g_strdup_printf ("%" G_GINT16_FORMAT, _tmp61_);
	_tmp63_ = _tmp62_;
	_tmp64_ = _data3_->user1;
	_tmp65_ = _tmp64_.desc;
	_tmp66_ = string_to_string (_tmp65_);
	_tmp67_ = g_strconcat (_tmp63_, "岁\n", _tmp66_, NULL);
	_tmp68_ = _tmp67_;
	gtk_widget_set_tooltip_text ((GtkWidget*) _tmp59_, _tmp68_);
	_g_free0 (_tmp68_);
	_g_free0 (_tmp63_);
	_tmp69_ = b2;
	g_signal_connect_data (_tmp69_, "clicked", (GCallback) ___lambda14__gtk_button_clicked, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
	_tmp70_ = self->priv->friends;
	g_signal_connect_object ((GtkWidget*) _tmp70_, "button-release-event", (GCallback) ___lambda16__gtk_widget_button_release_event, self, 0);
	_tmp71_ = _data3_->user1;
	_tmp72_ = _tmp71_.id;
	my_grid_add_listbox_id (self, _tmp72_);
	_g_object_unref0 (row2);
	_g_object_unref0 (b2);
	_g_object_unref0 (l2);
	_g_object_unref0 (img2);
	_g_object_unref0 (grid2);
	_g_object_unref0 (pix1);
	_g_free0 (iconp);
	block3_data_unref (_data3_);
	_data3_ = NULL;
}


void
my_grid_remove_friend (MyGrid* self,
                       const gchar* fid)
{
	GtkGrid* grid = NULL;
	GeeHashMap* _tmp0_;
	gpointer _tmp1_;
	GtkGrid* _tmp2_;
	GeeHashMap* _tmp3_;
	GeeHashMap* _tmp4_;
	RpcClient* _tmp5_;
	gint64 _tmp6_;
	GtkListBoxRow* r = NULL;
	GtkGrid* _tmp7_;
	GtkContainer* _tmp8_;
	GtkListBoxRow* _tmp9_;
	GtkListBox* _tmp10_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (fid != NULL);
	_tmp0_ = self->priv->frd_boxes;
	_tmp1_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp0_, fid);
	_tmp2_ = _g_object_ref0 ((GtkGrid*) _tmp1_);
	grid = _tmp2_;
	_tmp3_ = self->priv->frd_boxes;
	gee_abstract_map_unset ((GeeAbstractMap*) _tmp3_, fid, NULL);
	_tmp4_ = self->priv->frds1;
	gee_abstract_map_unset ((GeeAbstractMap*) _tmp4_, fid, NULL);
	_tmp5_ = rpc1;
	_tmp6_ = g_ascii_strtoll (fid, NULL, 0);
	if (FALSE == rpc_client_remove_friend (_tmp5_, _tmp6_)) {
		gtk_main_quit ();
	}
	_tmp7_ = grid;
	_tmp8_ = gtk_widget_get_parent ((GtkWidget*) _tmp7_);
	_tmp9_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp8_, gtk_list_box_row_get_type ()) ? ((GtkListBoxRow*) _tmp8_) : NULL);
	r = _tmp9_;
	gtk_list_box_row_set_selectable (r, FALSE);
	gtk_widget_set_name ((GtkWidget*) r, "");
	_tmp10_ = self->priv->friends;
	gtk_container_remove ((GtkContainer*) _tmp10_, (GtkWidget*) r);
	_g_object_unref0 (r);
	_g_object_unref0 (grid);
}


void
my_grid_add_right_name_icon (MyGrid* self,
                             const gchar* name,
                             gint16 sex)
{
	gchar* iconp = NULL;
	GdkPixbuf* pix1 = NULL;
	const gchar* _tmp4_;
	GdkPixbuf* _tmp5_;
	GtkGrid* grid2 = NULL;
	GtkGrid* _tmp6_;
	GtkImage* img2 = NULL;
	GtkImage* _tmp7_;
	GtkImage* _tmp8_;
	GtkGrid* _tmp9_;
	GtkImage* _tmp10_;
	GtkGrid* _tmp11_;
	GtkLabel* l2 = NULL;
	GtkLabel* _tmp12_;
	GtkLabel* _tmp13_;
	GtkGrid* _tmp14_;
	GtkLabel* _tmp15_;
	GtkGrid* _tmp16_;
	GtkListBox* _tmp17_;
	GtkGrid* _tmp18_;
	GtkGrid* _tmp19_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (name != NULL);
	if (((gint) sex) == 1) {
		const gchar* _tmp0_;
		gchar* _tmp1_;
		_tmp0_ = self->man_icon;
		_tmp1_ = g_strdup (_tmp0_);
		_g_free0 (iconp);
		iconp = _tmp1_;
	} else {
		const gchar* _tmp2_;
		gchar* _tmp3_;
		_tmp2_ = self->woman_icon;
		_tmp3_ = g_strdup (_tmp2_);
		_g_free0 (iconp);
		iconp = _tmp3_;
	}
	_tmp4_ = iconp;
	_tmp5_ = gdk_pixbuf_new_from_file (_tmp4_, &_inner_error_);
	pix1 = _tmp5_;
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		_g_free0 (iconp);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp6_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp6_);
	grid2 = _tmp6_;
	_tmp7_ = (GtkImage*) gtk_image_new ();
	g_object_ref_sink (_tmp7_);
	img2 = _tmp7_;
	_tmp8_ = img2;
	gtk_image_set_from_pixbuf (_tmp8_, pix1);
	_tmp9_ = grid2;
	_tmp10_ = img2;
	gtk_grid_attach (_tmp9_, (GtkWidget*) _tmp10_, 1, 0, 1, 1);
	_tmp11_ = grid2;
	gtk_widget_set_halign ((GtkWidget*) _tmp11_, GTK_ALIGN_END);
	_tmp12_ = (GtkLabel*) gtk_label_new (name);
	g_object_ref_sink (_tmp12_);
	l2 = _tmp12_;
	_tmp13_ = l2;
	gtk_label_set_xalign (_tmp13_, (gfloat) 1);
	_tmp14_ = grid2;
	_tmp15_ = l2;
	gtk_grid_attach (_tmp14_, (GtkWidget*) _tmp15_, 0, 0, 1, 1);
	_tmp16_ = grid2;
	gtk_grid_set_column_spacing (_tmp16_, (guint) 5);
	_tmp17_ = self->priv->msgs;
	_tmp18_ = grid2;
	gtk_container_add ((GtkContainer*) _tmp17_, (GtkWidget*) _tmp18_);
	_tmp19_ = grid2;
	gtk_widget_show_all ((GtkWidget*) _tmp19_);
	_g_object_unref0 (l2);
	_g_object_unref0 (img2);
	_g_object_unref0 (grid2);
	_g_object_unref0 (pix1);
	_g_free0 (iconp);
}


void
my_grid_add_left_name_icon (MyGrid* self,
                            const gchar* name,
                            gint16 sex)
{
	gchar* iconp = NULL;
	GtkGrid* grid1 = NULL;
	GtkGrid* _tmp4_;
	GdkPixbuf* pix1 = NULL;
	const gchar* _tmp5_;
	GdkPixbuf* _tmp6_;
	GtkImage* img1 = NULL;
	GtkImage* _tmp7_;
	GtkImage* _tmp8_;
	GtkImage* _tmp9_;
	GtkLabel* l1 = NULL;
	GtkLabel* _tmp10_;
	GtkLabel* _tmp11_;
	GtkLabel* _tmp12_;
	GtkListBox* _tmp13_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (name != NULL);
	if (((gint) sex) == 1) {
		const gchar* _tmp0_;
		gchar* _tmp1_;
		_tmp0_ = self->man_icon;
		_tmp1_ = g_strdup (_tmp0_);
		_g_free0 (iconp);
		iconp = _tmp1_;
	} else {
		const gchar* _tmp2_;
		gchar* _tmp3_;
		_tmp2_ = self->woman_icon;
		_tmp3_ = g_strdup (_tmp2_);
		_g_free0 (iconp);
		iconp = _tmp3_;
	}
	_tmp4_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp4_);
	grid1 = _tmp4_;
	_tmp5_ = iconp;
	_tmp6_ = gdk_pixbuf_new_from_file (_tmp5_, &_inner_error_);
	pix1 = _tmp6_;
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		_g_object_unref0 (grid1);
		_g_free0 (iconp);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp7_ = (GtkImage*) gtk_image_new ();
	g_object_ref_sink (_tmp7_);
	img1 = _tmp7_;
	_tmp8_ = img1;
	gtk_image_set_from_pixbuf (_tmp8_, pix1);
	_tmp9_ = img1;
	gtk_grid_attach (grid1, (GtkWidget*) _tmp9_, 0, 0, 1, 1);
	_tmp10_ = (GtkLabel*) gtk_label_new (name);
	g_object_ref_sink (_tmp10_);
	l1 = _tmp10_;
	_tmp11_ = l1;
	gtk_label_set_xalign (_tmp11_, (gfloat) 0);
	_tmp12_ = l1;
	gtk_grid_attach (grid1, (GtkWidget*) _tmp12_, 1, 0, 1, 1);
	gtk_grid_set_column_spacing (grid1, (guint) 5);
	_tmp13_ = self->priv->msgs;
	gtk_container_add ((GtkContainer*) _tmp13_, (GtkWidget*) grid1);
	gtk_widget_show_all ((GtkWidget*) grid1);
	_g_object_unref0 (l1);
	_g_object_unref0 (img1);
	_g_object_unref0 (pix1);
	_g_object_unref0 (grid1);
	_g_free0 (iconp);
}


void
my_grid_add_image (MyGrid* self,
                   const gchar* pathname)
{
	GdkPixbuf* p1 = NULL;
	GdkPixbuf* _tmp0_;
	GtkImage* image = NULL;
	GtkImage* _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	GtkListBox* _tmp18_;
	GtkImage* _tmp19_;
	GtkImage* _tmp20_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (pathname != NULL);
	_tmp0_ = gdk_pixbuf_new_from_file (pathname, &_inner_error_);
	p1 = _tmp0_;
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp1_ = (GtkImage*) gtk_image_new ();
	g_object_ref_sink (_tmp1_);
	image = _tmp1_;
	_tmp2_ = gdk_pixbuf_get_width (p1);
	_tmp3_ = _tmp2_;
	if (_tmp3_ > 300) {
		gdouble xs = 0.0;
		gint _tmp4_;
		gint _tmp5_;
		gint h2 = 0;
		gint _tmp6_;
		gint _tmp7_;
		gdouble _tmp8_;
		GdkPixbuf* p2 = NULL;
		gint _tmp9_;
		GdkPixbuf* _tmp10_;
		GdkPixbuf* _tmp11_;
		gint _tmp12_;
		gdouble _tmp13_;
		gdouble _tmp14_;
		GtkImage* _tmp15_;
		GdkPixbuf* _tmp16_;
		_tmp4_ = gdk_pixbuf_get_width (p1);
		_tmp5_ = _tmp4_;
		xs = ((gdouble) 300) / ((gdouble) _tmp5_);
		_tmp6_ = gdk_pixbuf_get_height (p1);
		_tmp7_ = _tmp6_;
		_tmp8_ = xs;
		h2 = (gint) (_tmp7_ * _tmp8_);
		_tmp9_ = h2;
		_tmp10_ = gdk_pixbuf_new (GDK_COLORSPACE_RGB, TRUE, 8, 300, _tmp9_);
		p2 = _tmp10_;
		_tmp11_ = p2;
		_tmp12_ = h2;
		_tmp13_ = xs;
		_tmp14_ = xs;
		gdk_pixbuf_scale (p1, _tmp11_, 0, 0, 300, _tmp12_, 0.0, 0.0, _tmp13_, _tmp14_, GDK_INTERP_NEAREST);
		_tmp15_ = image;
		_tmp16_ = p2;
		gtk_image_set_from_pixbuf (_tmp15_, _tmp16_);
		_g_object_unref0 (p2);
	} else {
		GtkImage* _tmp17_;
		_tmp17_ = image;
		gtk_image_set_from_pixbuf (_tmp17_, p1);
	}
	_tmp18_ = self->priv->msgs;
	_tmp19_ = image;
	gtk_container_add ((GtkContainer*) _tmp18_, (GtkWidget*) _tmp19_);
	_tmp20_ = image;
	gtk_widget_show ((GtkWidget*) _tmp20_);
	_g_object_unref0 (image);
	_g_object_unref0 (p1);
}


void
my_grid_add_text (MyGrid* self,
                  const gchar* text,
                  gboolean center,
                  gboolean markup)
{
	GtkLabel* lb = NULL;
	GtkLabel* _tmp0_;
	GtkLabel* _tmp8_;
	GtkLabel* _tmp9_;
	GtkLabel* _tmp11_;
	GtkLabel* _tmp12_;
	GtkGrid* grid = NULL;
	GtkGrid* _tmp13_;
	GtkLabel* lb1 = NULL;
	GtkLabel* _tmp14_;
	GtkLabel* _tmp15_;
	GtkLabel* lb2 = NULL;
	GtkLabel* _tmp16_;
	GtkListBox* _tmp17_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (text != NULL);
	_tmp0_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp0_);
	lb = _tmp0_;
	if (markup) {
		GtkLabel* _tmp1_;
		GtkStyleContext* sc1 = NULL;
		GtkLabel* _tmp2_;
		GtkStyleContext* _tmp3_;
		GtkStyleContext* _tmp4_;
		GtkStyleContext* _tmp5_;
		GtkCssProvider* _tmp6_;
		_tmp1_ = lb;
		gtk_label_set_markup (_tmp1_, text);
		_tmp2_ = lb;
		_tmp3_ = gtk_widget_get_style_context ((GtkWidget*) _tmp2_);
		_tmp4_ = _g_object_ref0 (_tmp3_);
		sc1 = _tmp4_;
		_tmp5_ = sc1;
		_tmp6_ = self->link_css1;
		gtk_style_context_add_provider (_tmp5_, (GtkStyleProvider*) _tmp6_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
		_g_object_unref0 (sc1);
	} else {
		GtkLabel* _tmp7_;
		_tmp7_ = lb;
		gtk_label_set_label (_tmp7_, text);
	}
	_tmp8_ = lb;
	g_object_set (_tmp8_, "wrap", TRUE, NULL);
	_tmp9_ = lb;
	g_object_set (_tmp9_, "wrap-mode", PANGO_WRAP_CHAR, NULL);
	if (!center) {
		GtkLabel* _tmp10_;
		_tmp10_ = lb;
		gtk_label_set_xalign (_tmp10_, (gfloat) 0);
	}
	_tmp11_ = lb;
	g_object_set ((GtkWidget*) _tmp11_, "width-request", 300, NULL);
	_tmp12_ = lb;
	gtk_label_set_max_width_chars (_tmp12_, 15);
	_tmp13_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp13_);
	grid = _tmp13_;
	_tmp14_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp14_);
	lb1 = _tmp14_;
	g_object_set ((GtkWidget*) lb1, "width-request", 5, NULL);
	gtk_grid_attach (grid, (GtkWidget*) lb1, 0, 0, 1, 1);
	_tmp15_ = lb;
	gtk_grid_attach (grid, (GtkWidget*) _tmp15_, 1, 0, 1, 1);
	_tmp16_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp16_);
	lb2 = _tmp16_;
	g_object_set ((GtkWidget*) lb2, "width-request", 5, NULL);
	gtk_grid_attach (grid, (GtkWidget*) lb2, 2, 0, 1, 1);
	gtk_widget_set_halign ((GtkWidget*) grid, GTK_ALIGN_CENTER);
	_tmp17_ = self->priv->msgs;
	gtk_container_add ((GtkContainer*) _tmp17_, (GtkWidget*) grid);
	gtk_widget_show_all ((GtkWidget*) grid);
	_g_object_unref0 (lb2);
	_g_object_unref0 (lb1);
	_g_object_unref0 (grid);
	_g_object_unref0 (lb);
}


static gboolean
____lambda38_ (MyGrid* self)
{
	gboolean result = FALSE;
	GtkAdjustment* adj1 = NULL;
	GtkListBox* _tmp0_;
	GtkAdjustment* _tmp1_;
	GtkAdjustment* _tmp2_;
	gdouble _tmp3_;
	gdouble _tmp4_;
	_tmp0_ = self->priv->msgs;
	_tmp1_ = gtk_list_box_get_adjustment (_tmp0_);
	_tmp2_ = _g_object_ref0 (_tmp1_);
	adj1 = _tmp2_;
	_tmp3_ = gtk_adjustment_get_upper (adj1);
	_tmp4_ = _tmp3_;
	gtk_adjustment_set_value (adj1, _tmp4_);
	result = FALSE;
	_g_object_unref0 (adj1);
	return result;
}


static gboolean
_____lambda38__gsource_func (gpointer self)
{
	gboolean result;
	result = ____lambda38_ ((MyGrid*) self);
	return result;
}


static void
____lambda39_ (MyGrid* self,
               UserData* ux)
{
	StrangersDialg* _tmp0_;
	UserData _tmp1_;
	g_return_if_fail (ux != NULL);
	_tmp0_ = strangers1;
	_tmp1_ = *ux;
	strangers_dialg_prepend_row (_tmp0_, &_tmp1_);
}


static void
_____lambda39__rpc_client_query_callback (UserData* u,
                                          gpointer self)
{
	____lambda39_ ((MyGrid*) self, u);
}


static Block4Data*
block4_data_ref (Block4Data* _data4_)
{
	g_atomic_int_inc (&_data4_->_ref_count_);
	return _data4_;
}


static void
block4_data_unref (void * _userdata_)
{
	Block4Data* _data4_;
	_data4_ = (Block4Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data4_->_ref_count_)) {
		MyGrid* self;
		self = _data4_->self;
		_g_free0 (_data4_->name1);
		_g_object_unref0 (self);
		g_slice_free (Block4Data, _data4_);
	}
}


static JsonNode*
_vala_JsonNode_copy (JsonNode* self)
{
	return g_boxed_copy (json_node_get_type (), self);
}


static gpointer
__vala_JsonNode_copy0 (gpointer self)
{
	return self ? _vala_JsonNode_copy (self) : NULL;
}


static void
_vala_JsonNode_free (JsonNode* self)
{
	g_boxed_free (json_node_get_type (), self);
}


static gpointer
_json_object_ref0 (gpointer self)
{
	return self ? json_object_ref (self) : NULL;
}


static void
___lambda40_ (Block4Data* _data4_)
{
	MyGrid* self;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	self = _data4_->self;
	_tmp0_ = _data4_->name1;
	g_remove (_tmp0_);
	_tmp1_ = _data4_->name1;
	_tmp2_ = string_to_string (_tmp1_);
	_tmp3_ = g_strconcat ("remove ", _tmp2_, "\n", NULL);
	_tmp4_ = _tmp3_;
	g_print ("%s", _tmp4_);
	_g_free0 (_tmp4_);
}


static void
____lambda40__gtk_button_clicked (GtkButton* _sender,
                                  gpointer self)
{
	___lambda40_ (self);
}


static gboolean
__lambda41_ (MyGrid* self)
{
	gboolean result = FALSE;
	GtkAdjustment* adj1 = NULL;
	GtkListBox* _tmp0_;
	GtkAdjustment* _tmp1_;
	GtkAdjustment* _tmp2_;
	gdouble _tmp3_;
	gdouble _tmp4_;
	_tmp0_ = self->priv->msgs;
	_tmp1_ = gtk_list_box_get_adjustment (_tmp0_);
	_tmp2_ = _g_object_ref0 (_tmp1_);
	adj1 = _tmp2_;
	_tmp3_ = gtk_adjustment_get_upper (adj1);
	_tmp4_ = _tmp3_;
	gtk_adjustment_set_value (adj1, _tmp4_);
	result = FALSE;
	_g_object_unref0 (adj1);
	return result;
}


static gboolean
___lambda41__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda41_ ((MyGrid*) self);
	return result;
}


void
my_grid_rpc_callback (MyGrid* self,
                      gint8 typ,
                      gint64 from,
                      const gchar* msg)
{
	gchar* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* typ1 = NULL;
	gchar* _tmp32_;
	gchar* msg1 = NULL;
	gint _tmp33_;
	gint _tmp34_;
	gchar* _tmp35_;
	gchar* fname = NULL;
	gchar* _tmp36_;
	gint16 fsex = 0;
	UserData* u = NULL;
	GeeHashMap* _tmp37_;
	gchar* _tmp38_;
	gchar* _tmp39_;
	gpointer _tmp40_;
	UserData* _tmp41_;
	GtkListBox* display = NULL;
	GeeHashMap* _tmp42_;
	gchar* _tmp43_;
	gchar* _tmp44_;
	gpointer _tmp45_;
	GtkListBox* _tmp46_;
	GtkListBox* bak_msgs = NULL;
	GtkListBox* _tmp47_;
	GtkListBox* _tmp48_;
	UserData* _tmp49_;
	const gchar* _tmp70_;
	const gchar* _tmp71_;
	GQuark _tmp73_ = 0U;
	static GQuark _tmp72_label0 = 0;
	static GQuark _tmp72_label1 = 0;
	static GQuark _tmp72_label2 = 0;
	GtkListBox* _tmp147_;
	GtkListBox* _tmp148_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (msg != NULL);
	_tmp0_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
	_tmp1_ = _tmp0_;
	_tmp2_ = string_to_string (msg);
	_tmp3_ = g_strconcat ("ID: ", _tmp1_, " ,Msg: ", _tmp2_, "\n", NULL);
	_tmp4_ = _tmp3_;
	g_print ("%s", _tmp4_);
	_g_free0 (_tmp4_);
	_g_free0 (_tmp1_);
	if (from == ((gint64) 0)) {
		gint _tmp5_;
		gint _tmp6_;
		gchar* _tmp7_;
		gchar* _tmp8_;
		gboolean _tmp9_;
		_tmp5_ = strlen (msg);
		_tmp6_ = _tmp5_;
		if (_tmp6_ <= 8) {
			return;
		}
		_tmp7_ = string_slice (msg, (glong) 0, (glong) 8);
		_tmp8_ = _tmp7_;
		_tmp9_ = g_strcmp0 (_tmp8_, "Offline ") == 0;
		_g_free0 (_tmp8_);
		if (_tmp9_) {
			gchar* off_id = NULL;
			gint _tmp10_;
			gint _tmp11_;
			gchar* _tmp12_;
			GtkGrid* grid = NULL;
			GeeHashMap* _tmp13_;
			const gchar* _tmp14_;
			gpointer _tmp15_;
			GtkGrid* _tmp16_;
			GtkStyleContext* sc = NULL;
			GtkGrid* _tmp17_;
			GtkStyleContext* _tmp18_;
			GtkStyleContext* _tmp19_;
			GtkStyleContext* _tmp20_;
			GtkCssProvider* _tmp21_;
			GtkStyleContext* _tmp22_;
			GtkListBox* _tmp24_;
			GtkListBox* tmp = NULL;
			GtkListBox* _tmp25_;
			GtkListBox* _tmp26_;
			GeeHashMap* _tmp27_;
			const gchar* _tmp28_;
			gpointer _tmp29_;
			GtkListBox* _tmp30_;
			GtkListBox* _tmp31_;
			_tmp10_ = strlen (msg);
			_tmp11_ = _tmp10_;
			_tmp12_ = string_slice (msg, (glong) 8, (glong) _tmp11_);
			off_id = _tmp12_;
			_tmp13_ = self->priv->frd_boxes;
			_tmp14_ = off_id;
			_tmp15_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp13_, _tmp14_);
			_tmp16_ = _g_object_ref0 ((GtkGrid*) _tmp15_);
			grid = _tmp16_;
			_tmp17_ = grid;
			_tmp18_ = gtk_widget_get_style_context ((GtkWidget*) _tmp17_);
			_tmp19_ = _g_object_ref0 (_tmp18_);
			sc = _tmp19_;
			_tmp20_ = sc;
			_tmp21_ = self->provider1;
			gtk_style_context_add_provider (_tmp20_, (GtkStyleProvider*) _tmp21_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
			_tmp22_ = sc;
			if (gtk_style_context_has_class (_tmp22_, "off") == FALSE) {
				GtkStyleContext* _tmp23_;
				_tmp23_ = sc;
				gtk_style_context_add_class (_tmp23_, "off");
			}
			_tmp24_ = self->priv->friends;
			gtk_list_box_invalidate_sort (_tmp24_);
			_tmp25_ = self->priv->msgs;
			_tmp26_ = _g_object_ref0 (_tmp25_);
			tmp = _tmp26_;
			_tmp27_ = self->priv->boxes;
			_tmp28_ = off_id;
			_tmp29_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp27_, _tmp28_);
			_g_object_unref0 (self->priv->msgs);
			self->priv->msgs = (GtkListBox*) _tmp29_;
			my_grid_add_text (self, "[离线状态]", FALSE, FALSE);
			_tmp30_ = tmp;
			_tmp31_ = _g_object_ref0 (_tmp30_);
			_g_object_unref0 (self->priv->msgs);
			self->priv->msgs = _tmp31_;
			g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _____lambda38__gsource_func, g_object_ref (self), g_object_unref);
			_g_object_unref0 (tmp);
			_g_object_unref0 (sc);
			_g_object_unref0 (grid);
			_g_free0 (off_id);
			return;
		}
		g_print ("Cmd:%i From:%" G_GINT64_FORMAT " Msg:%s\n", typ, from, msg);
		return;
	}
	_tmp32_ = string_slice (msg, (glong) 0, (glong) 4);
	typ1 = _tmp32_;
	_tmp33_ = strlen (msg);
	_tmp34_ = _tmp33_;
	_tmp35_ = string_slice (msg, (glong) 4, (glong) _tmp34_);
	msg1 = _tmp35_;
	_tmp36_ = g_strdup ("");
	fname = _tmp36_;
	fsex = (gint16) 2;
	_tmp37_ = self->priv->frds1;
	_tmp38_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
	_tmp39_ = _tmp38_;
	_tmp40_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp37_, _tmp39_);
	_tmp41_ = (UserData*) _tmp40_;
	_g_free0 (_tmp39_);
	u = _tmp41_;
	_tmp42_ = self->priv->boxes;
	_tmp43_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
	_tmp44_ = _tmp43_;
	_tmp45_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp42_, _tmp44_);
	_tmp46_ = (GtkListBox*) _tmp45_;
	_g_free0 (_tmp44_);
	display = _tmp46_;
	_tmp47_ = self->priv->msgs;
	_tmp48_ = _g_object_ref0 (_tmp47_);
	bak_msgs = _tmp48_;
	_tmp49_ = u;
	if (_tmp49_ != NULL) {
		UserData* _tmp50_;
		const gchar* _tmp51_;
		gchar* _tmp52_;
		UserData* _tmp53_;
		gint16 _tmp54_;
		GtkListBox* _tmp55_;
		GtkListBox* _tmp56_;
		_tmp50_ = u;
		_tmp51_ = (*_tmp50_).name;
		_tmp52_ = g_strdup (_tmp51_);
		_g_free0 (fname);
		fname = _tmp52_;
		_tmp53_ = u;
		_tmp54_ = (*_tmp53_).sex;
		fsex = _tmp54_;
		_tmp55_ = display;
		_tmp56_ = _g_object_ref0 (_tmp55_);
		_g_object_unref0 (self->priv->msgs);
		self->priv->msgs = _tmp56_;
	} else {
		const gchar* _tmp57_;
		_tmp57_ = typ1;
		if (g_strcmp0 (_tmp57_, "TEXT") == 0) {
			gchar* _tmp58_;
			gchar* _tmp59_;
			gchar* _tmp60_;
			gboolean ret = FALSE;
			RpcClient* _tmp61_;
			const gchar* _tmp62_;
			gboolean _tmp63_;
			GtkListBox* _tmp64_;
			GtkListBox* _tmp65_;
			_tmp58_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
			_tmp59_ = _tmp58_;
			_tmp60_ = g_strconcat ("ID:", _tmp59_, NULL);
			_g_free0 (fname);
			fname = _tmp60_;
			_g_free0 (_tmp59_);
			_tmp61_ = rpc1;
			_tmp62_ = msg1;
			ret = rpc_client_offline_msg_with_id (_tmp61_, from, _tmp62_, _____lambda39__rpc_client_query_callback, self);
			_tmp63_ = ret;
			if (_tmp63_ == FALSE) {
				gtk_main_quit ();
			}
			_tmp64_ = bak_msgs;
			_tmp65_ = _g_object_ref0 (_tmp64_);
			_g_object_unref0 (self->priv->msgs);
			self->priv->msgs = _tmp65_;
			_g_object_unref0 (bak_msgs);
			_g_object_unref0 (display);
			_user_data_free0 (u);
			_g_free0 (fname);
			_g_free0 (msg1);
			_g_free0 (typ1);
			return;
		} else {
			const gchar* _tmp66_;
			_tmp66_ = typ1;
			if (g_strcmp0 (_tmp66_, "JSON") == 0) {
				gchar* _tmp67_;
				gchar* _tmp68_;
				gchar* _tmp69_;
				_tmp67_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
				_tmp68_ = _tmp67_;
				_tmp69_ = g_strconcat ("ID:", _tmp68_, NULL);
				_g_free0 (fname);
				fname = _tmp69_;
				_g_free0 (_tmp68_);
			}
		}
	}
	_tmp70_ = typ1;
	_tmp71_ = _tmp70_;
	_tmp73_ = (NULL == _tmp71_) ? 0 : g_quark_from_string (_tmp71_);
	if (_tmp73_ == ((0 != _tmp72_label0) ? _tmp72_label0 : (_tmp72_label0 = g_quark_from_static_string ("TEXT")))) {
		switch (0) {
			default:
			{
				const gchar* _tmp74_;
				gint16 _tmp75_;
				const gchar* _tmp76_;
				gchar* _tmp77_;
				gchar* _tmp78_;
				_tmp74_ = fname;
				_tmp75_ = fsex;
				my_grid_add_right_name_icon (self, _tmp74_, _tmp75_);
				_tmp76_ = msg1;
				my_grid_add_text (self, _tmp76_, FALSE, FALSE);
				_tmp77_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
				_tmp78_ = _tmp77_;
				my_grid_msg_mark (self, _tmp78_);
				_g_free0 (_tmp78_);
				break;
			}
		}
	} else if (_tmp73_ == ((0 != _tmp72_label1) ? _tmp72_label1 : (_tmp72_label1 = g_quark_from_static_string ("JSON")))) {
		switch (0) {
			default:
			{
				Block4Data* _data4_;
				JsonParser* p2 = NULL;
				JsonParser* _tmp79_;
				gboolean _tmp80_ = FALSE;
				JsonParser* _tmp81_;
				const gchar* _tmp82_;
				JsonNode* node2 = NULL;
				JsonParser* _tmp83_;
				JsonNode* _tmp84_;
				JsonNode* _tmp85_;
				JsonNode* _tmp86_;
				JsonObject* obj2 = NULL;
				JsonNode* _tmp87_;
				JsonObject* _tmp88_;
				JsonObject* _tmp89_;
				JsonObject* _tmp90_;
				const gchar* _tmp91_;
				gchar* _tmp92_;
				gchar* mime1 = NULL;
				JsonObject* _tmp93_;
				const gchar* _tmp94_;
				gchar* _tmp95_;
				gchar* display_text = NULL;
				const gchar* _tmp96_;
				const gchar* _tmp97_;
				const gchar* _tmp98_;
				gchar* _tmp99_;
				gchar* _tmp100_;
				const gchar* _tmp101_;
				const gchar* _tmp102_;
				gchar* _tmp103_;
				gchar* _tmp104_;
				const gchar* _tmp105_;
				gchar* _tmp106_;
				gchar* _tmp107_;
				const gchar* _tmp108_;
				gchar* _tmp109_;
				gchar* _tmp110_;
				gboolean _tmp111_;
				GtkButton* rm_btn = NULL;
				const gchar* _tmp119_;
				gchar* _tmp120_;
				gchar* _tmp121_;
				const gchar* _tmp122_;
				gchar* _tmp123_;
				gchar* _tmp124_;
				GtkButton* _tmp125_;
				GtkButton* _tmp126_;
				GtkListBox* _tmp127_;
				GtkButton* _tmp128_;
				GtkButton* _tmp129_;
				gchar* _tmp130_;
				gchar* _tmp131_;
				GtkListBox* _tmp132_;
				_data4_ = g_slice_new0 (Block4Data);
				_data4_->_ref_count_ = 1;
				_data4_->self = g_object_ref (self);
				_tmp79_ = json_parser_new ();
				p2 = _tmp79_;
				_tmp81_ = p2;
				_tmp82_ = msg1;
				_tmp80_ = json_parser_load_from_data (_tmp81_, _tmp82_, (gssize) -1, &_inner_error_);
				if (G_UNLIKELY (_inner_error_ != NULL)) {
					_g_object_unref0 (p2);
					block4_data_unref (_data4_);
					_data4_ = NULL;
					_g_object_unref0 (bak_msgs);
					_g_object_unref0 (display);
					_user_data_free0 (u);
					_g_free0 (fname);
					_g_free0 (msg1);
					_g_free0 (typ1);
					g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return;
				}
				if (_tmp80_ == FALSE) {
					_g_object_unref0 (p2);
					block4_data_unref (_data4_);
					_data4_ = NULL;
					break;
				}
				_tmp83_ = p2;
				_tmp84_ = json_parser_get_root (_tmp83_);
				_tmp85_ = __vala_JsonNode_copy0 (_tmp84_);
				node2 = _tmp85_;
				_tmp86_ = node2;
				if (_tmp86_ == NULL) {
					__vala_JsonNode_free0 (node2);
					_g_object_unref0 (p2);
					block4_data_unref (_data4_);
					_data4_ = NULL;
					break;
				}
				_tmp87_ = node2;
				_tmp88_ = json_node_get_object (_tmp87_);
				_tmp89_ = _json_object_ref0 (_tmp88_);
				obj2 = _tmp89_;
				_tmp90_ = obj2;
				_tmp91_ = json_object_get_string_member (_tmp90_, "Name");
				_tmp92_ = g_strdup (_tmp91_);
				_data4_->name1 = _tmp92_;
				_tmp93_ = obj2;
				_tmp94_ = json_object_get_string_member (_tmp93_, "Mime");
				_tmp95_ = g_strdup (_tmp94_);
				mime1 = _tmp95_;
				_tmp96_ = _data4_->name1;
				_tmp97_ = string_to_string (_tmp96_);
				_tmp98_ = _data4_->name1;
				_tmp99_ = g_path_get_basename (_tmp98_);
				_tmp100_ = _tmp99_;
				_tmp101_ = string_to_string (_tmp100_);
				_tmp102_ = _data4_->name1;
				_tmp103_ = g_path_get_dirname (_tmp102_);
				_tmp104_ = _tmp103_;
				_tmp105_ = string_to_string (_tmp104_);
				_tmp106_ = g_strconcat ("点击打开文件：<a href='file://", _tmp97_, "'>", _tmp101_, "</a>  <a href='file://", _tmp105_, "'>打开目录</a>", NULL);
				_tmp107_ = _tmp106_;
				_g_free0 (_tmp104_);
				_g_free0 (_tmp100_);
				display_text = _tmp107_;
				_tmp108_ = mime1;
				_tmp109_ = string_slice (_tmp108_, (glong) 0, (glong) 5);
				_tmp110_ = _tmp109_;
				_tmp111_ = g_strcmp0 (_tmp110_, "image") == 0;
				_g_free0 (_tmp110_);
				if (_tmp111_) {
					const gchar* _tmp112_;
					gint16 _tmp113_;
					const gchar* _tmp114_;
					const gchar* _tmp115_;
					_tmp112_ = fname;
					_tmp113_ = fsex;
					my_grid_add_right_name_icon (self, _tmp112_, _tmp113_);
					_tmp114_ = _data4_->name1;
					my_grid_add_image (self, _tmp114_);
					_tmp115_ = display_text;
					my_grid_add_text (self, _tmp115_, TRUE, TRUE);
				} else {
					const gchar* _tmp116_;
					gint16 _tmp117_;
					const gchar* _tmp118_;
					_tmp116_ = fname;
					_tmp117_ = fsex;
					my_grid_add_right_name_icon (self, _tmp116_, _tmp117_);
					_tmp118_ = display_text;
					my_grid_add_text (self, _tmp118_, TRUE, TRUE);
				}
				_tmp119_ = _data4_->name1;
				_tmp120_ = g_path_get_basename (_tmp119_);
				_tmp121_ = _tmp120_;
				_tmp122_ = string_to_string (_tmp121_);
				_tmp123_ = g_strconcat ("删除可疑文件：", _tmp122_, NULL);
				_tmp124_ = _tmp123_;
				_tmp125_ = (GtkButton*) gtk_button_new_with_label (_tmp124_);
				g_object_ref_sink (_tmp125_);
				_tmp126_ = _tmp125_;
				_g_free0 (_tmp124_);
				_g_free0 (_tmp121_);
				rm_btn = _tmp126_;
				_tmp127_ = self->priv->msgs;
				_tmp128_ = rm_btn;
				gtk_container_add ((GtkContainer*) _tmp127_, (GtkWidget*) _tmp128_);
				_tmp129_ = rm_btn;
				g_signal_connect_data (_tmp129_, "clicked", (GCallback) ____lambda40__gtk_button_clicked, block4_data_ref (_data4_), (GClosureNotify) block4_data_unref, 0);
				_tmp130_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
				_tmp131_ = _tmp130_;
				my_grid_msg_mark (self, _tmp131_);
				_g_free0 (_tmp131_);
				_tmp132_ = self->priv->msgs;
				gtk_widget_show_all ((GtkWidget*) _tmp132_);
				_g_object_unref0 (rm_btn);
				_g_free0 (display_text);
				_g_free0 (mime1);
				_json_object_unref0 (obj2);
				__vala_JsonNode_free0 (node2);
				_g_object_unref0 (p2);
				block4_data_unref (_data4_);
				_data4_ = NULL;
				break;
			}
		}
	} else if (_tmp73_ == ((0 != _tmp72_label2) ? _tmp72_label2 : (_tmp72_label2 = g_quark_from_static_string ("LOGI")))) {
		switch (0) {
			default:
			{
				UserData* _tmp133_;
				GtkGrid* grid = NULL;
				GeeHashMap* _tmp134_;
				gchar* _tmp135_;
				gchar* _tmp136_;
				gpointer _tmp137_;
				GtkGrid* _tmp138_;
				GtkGrid* _tmp139_;
				GtkStyleContext* sc3 = NULL;
				GtkGrid* _tmp140_;
				GtkStyleContext* _tmp141_;
				GtkStyleContext* _tmp142_;
				GtkStyleContext* _tmp143_;
				GtkCssProvider* _tmp144_;
				GtkStyleContext* _tmp145_;
				GtkListBox* _tmp146_;
				_tmp133_ = u;
				if (_tmp133_ == NULL) {
					break;
				}
				_tmp134_ = self->priv->frd_boxes;
				_tmp135_ = g_strdup_printf ("%" G_GINT64_FORMAT, from);
				_tmp136_ = _tmp135_;
				_tmp137_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp134_, _tmp136_);
				_tmp138_ = _g_object_ref0 ((GtkGrid*) _tmp137_);
				_tmp139_ = _tmp138_;
				_g_free0 (_tmp136_);
				grid = _tmp139_;
				_tmp140_ = grid;
				_tmp141_ = gtk_widget_get_style_context ((GtkWidget*) _tmp140_);
				_tmp142_ = _g_object_ref0 (_tmp141_);
				sc3 = _tmp142_;
				_tmp143_ = sc3;
				_tmp144_ = self->provider1;
				gtk_style_context_remove_provider (_tmp143_, (GtkStyleProvider*) _tmp144_);
				_tmp145_ = sc3;
				gtk_style_context_remove_class (_tmp145_, "off");
				_tmp146_ = self->priv->friends;
				gtk_list_box_invalidate_sort (_tmp146_);
				_g_object_unref0 (sc3);
				_g_object_unref0 (grid);
				break;
			}
		}
	}
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda41__gsource_func, g_object_ref (self), g_object_unref);
	_tmp147_ = bak_msgs;
	_tmp148_ = _g_object_ref0 (_tmp147_);
	_g_object_unref0 (self->priv->msgs);
	self->priv->msgs = _tmp148_;
	_g_object_unref0 (bak_msgs);
	_g_object_unref0 (display);
	_user_data_free0 (u);
	_g_free0 (fname);
	_g_free0 (msg1);
	_g_free0 (typ1);
}


void
my_grid_msg_mark (MyGrid* self,
                  const gchar* uid)
{
	GtkListBoxRow* r = NULL;
	GeeHashMap* _tmp0_;
	gpointer _tmp1_;
	GtkContainer* _tmp2_;
	GtkListBoxRow* _tmp3_;
	GtkListBoxRow* _tmp4_;
	GtkGrid* grid = NULL;
	GeeHashMap* _tmp5_;
	gpointer _tmp6_;
	GtkGrid* _tmp7_;
	GtkStyleContext* sc3 = NULL;
	GtkGrid* _tmp8_;
	GtkStyleContext* _tmp9_;
	GtkStyleContext* _tmp10_;
	GtkStyleContext* _tmp11_;
	GtkCssProvider* _tmp12_;
	GtkStyleContext* _tmp13_;
	GtkGrid* _tmp14_;
	const gchar* _tmp15_;
	gchar* _tmp16_;
	gchar* _tmp17_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (uid != NULL);
	_tmp0_ = self->priv->frd_boxes;
	_tmp1_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp0_, uid);
	_tmp2_ = gtk_widget_get_parent ((GtkWidget*) ((GtkGrid*) _tmp1_));
	_tmp3_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp2_, gtk_list_box_row_get_type ()) ? ((GtkListBoxRow*) _tmp2_) : NULL);
	r = _tmp3_;
	_tmp4_ = r;
	if (gtk_list_box_row_is_selected (_tmp4_)) {
		_g_object_unref0 (r);
		return;
	}
	_tmp5_ = self->priv->frd_boxes;
	_tmp6_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp5_, uid);
	_tmp7_ = _g_object_ref0 ((GtkGrid*) _tmp6_);
	grid = _tmp7_;
	_tmp8_ = grid;
	_tmp9_ = gtk_widget_get_style_context ((GtkWidget*) _tmp8_);
	_tmp10_ = _g_object_ref0 (_tmp9_);
	sc3 = _tmp10_;
	_tmp11_ = sc3;
	_tmp12_ = self->mark1;
	gtk_style_context_add_provider (_tmp11_, (GtkStyleProvider*) _tmp12_, (guint) GTK_STYLE_PROVIDER_PRIORITY_USER);
	_tmp13_ = sc3;
	gtk_style_context_add_class (_tmp13_, "mark");
	_tmp14_ = grid;
	gtk_widget_show_all ((GtkWidget*) _tmp14_);
	_tmp15_ = string_to_string (uid);
	_tmp16_ = g_strconcat ("mark: ", _tmp15_, "\n", NULL);
	_tmp17_ = _tmp16_;
	g_print ("%s", _tmp17_);
	_g_free0 (_tmp17_);
	_g_object_unref0 (sc3);
	_g_object_unref0 (grid);
	_g_object_unref0 (r);
}


static void
my_grid_class_init (MyGridClass * klass)
{
	my_grid_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (MyGridPrivate));
	G_OBJECT_CLASS (klass)->finalize = my_grid_finalize;
}


static void
my_grid_instance_init (MyGrid * self)
{
	gchar* _tmp0_;
	gchar* _tmp1_;
	GeeHashMap* _tmp2_;
	gchar* _tmp3_;
	self->priv = MY_GRID_GET_PRIVATE (self);
	self->priv->msgs = NULL;
	self->priv->running = TRUE;
	_tmp0_ = g_strdup ("icons/man.png");
	self->man_icon = _tmp0_;
	_tmp1_ = g_strdup ("icons/woman.png");
	self->woman_icon = _tmp1_;
	_tmp2_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, gtk_list_box_get_type (), (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
	self->priv->boxes = _tmp2_;
	_tmp3_ = g_strdup ("");
	self->priv->pressed = _tmp3_;
}


static void
my_grid_finalize (GObject * obj)
{
	MyGrid * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_MY_GRID, MyGrid);
	_g_object_unref0 (self->priv->friends);
	_g_object_unref0 (self->priv->msgs);
	_g_object_unref0 (self->priv->entry1);
	_g_object_unref0 (self->port1);
	_g_object_unref0 (self->mygrid);
	_g_object_unref0 (self->priv->frds1);
	_g_object_unref0 (self->priv->frd_boxes);
	_g_object_unref0 (self->provider1);
	_g_object_unref0 (self->mark1);
	_g_object_unref0 (self->button1);
	_g_object_unref0 (self->link_css1);
	_g_object_unref0 (self->strangers_btn);
	_g_object_unref0 (self->user_btn);
	_g_free0 (self->man_icon);
	_g_free0 (self->woman_icon);
	_g_free0 (self->uname);
	_g_free0 (self->udesc);
	_g_object_unref0 (self->priv->cssp);
	_g_object_unref0 (self->priv->msg_win);
	_g_object_unref0 (self->priv->boxes);
	_g_free0 (self->priv->pressed);
	G_OBJECT_CLASS (my_grid_parent_class)->finalize (obj);
}


GType
my_grid_get_type (void)
{
	static volatile gsize my_grid_type_id__volatile = 0;
	if (g_once_init_enter (&my_grid_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (MyGridClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) my_grid_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (MyGrid), 0, (GInstanceInitFunc) my_grid_instance_init, NULL };
		GType my_grid_type_id;
		my_grid_type_id = g_type_register_static (G_TYPE_OBJECT, "MyGrid", &g_define_type_info, 0);
		g_once_init_leave (&my_grid_type_id__volatile, my_grid_type_id);
	}
	return my_grid_type_id__volatile;
}


static void
__lambda4_ (AppWin* self)
{
	MyGrid* _tmp0_;
	g_print ("Bye!\n");
	_tmp0_ = grid1;
	my_grid_release_resource (_tmp0_);
	gtk_main_quit ();
}


static void
___lambda4__gtk_widget_destroy (GtkWidget* _sender,
                                gpointer self)
{
	__lambda4_ ((AppWin*) self);
}


AppWin*
app_win_construct (GType object_type)
{
	AppWin * self = NULL;
	GError * _inner_error_ = NULL;
	self = (AppWin*) g_object_new (object_type, NULL);
	gtk_window_set_title ((GtkWindow*) self, "人人公众号");
	g_object_set ((GtkWindow*) self, "window-position", GTK_WIN_POS_CENTER, NULL);
	gtk_window_set_default_size ((GtkWindow*) self, 640, 480);
	gtk_window_set_hide_titlebar_when_maximized ((GtkWindow*) self, TRUE);
	gtk_window_set_resizable ((GtkWindow*) self, FALSE);
	gtk_window_set_icon_from_file ((GtkWindow*) self, "tank.png", &_inner_error_);
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	g_signal_connect_object ((GtkWidget*) self, "destroy", (GCallback) ___lambda4__gtk_widget_destroy, self, 0);
	return self;
}


AppWin*
app_win_new (void)
{
	return app_win_construct (TYPE_APP_WIN);
}


static void
app_win_class_init (AppWinClass * klass)
{
	app_win_parent_class = g_type_class_peek_parent (klass);
}


static void
app_win_instance_init (AppWin * self)
{
}


GType
app_win_get_type (void)
{
	static volatile gsize app_win_type_id__volatile = 0;
	if (g_once_init_enter (&app_win_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (AppWinClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) app_win_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (AppWin), 0, (GInstanceInitFunc) app_win_instance_init, NULL };
		GType app_win_type_id;
		app_win_type_id = g_type_register_static (gtk_window_get_type (), "AppWin", &g_define_type_info, 0);
		g_once_init_leave (&app_win_type_id__volatile, app_win_type_id);
	}
	return app_win_type_id__volatile;
}


static void
__lambda42_ (LoginDialog* self,
             gint rid)
{
	if (rid == 2) {
		UserData u = {0};
		gint64 res = 0LL;
		RpcClient* _tmp0_;
		GtkEntry* _tmp1_;
		const gchar* _tmp2_;
		const gchar* _tmp3_;
		GtkEntry* _tmp4_;
		const gchar* _tmp5_;
		const gchar* _tmp6_;
		UserData _tmp7_ = {0};
		gint64 _tmp8_;
		gint64 _tmp9_;
		RpcClient* _tmp33_;
		AppWin* _tmp34_;
		GtkDialog* _tmp35_;
		_tmp0_ = rpc1;
		_tmp1_ = self->name;
		_tmp2_ = gtk_entry_get_text (_tmp1_);
		_tmp3_ = _tmp2_;
		_tmp4_ = self->passwd;
		_tmp5_ = gtk_entry_get_text (_tmp4_);
		_tmp6_ = _tmp5_;
		_tmp8_ = rpc_client_login (_tmp0_, _tmp3_, _tmp6_, &_tmp7_);
		user_data_destroy (&u);
		u = _tmp7_;
		res = _tmp8_;
		_tmp9_ = res;
		if (_tmp9_ > ((gint64) 0)) {
			FILE* _tmp10_;
			MyGrid* _tmp11_;
			gint64 _tmp12_;
			MyGrid* _tmp13_;
			UserData _tmp14_;
			const gchar* _tmp15_;
			gchar* _tmp16_;
			MyGrid* _tmp17_;
			UserData _tmp18_;
			gint16 _tmp19_;
			MyGrid* _tmp20_;
			UserData _tmp21_;
			gint16 _tmp22_;
			MyGrid* _tmp23_;
			UserData _tmp24_;
			const gchar* _tmp25_;
			gchar* _tmp26_;
			MyGrid* _tmp27_;
			GtkButton* _tmp28_;
			UserData _tmp29_;
			const gchar* _tmp30_;
			_tmp10_ = stdout;
			fprintf (_tmp10_, "login ok\n");
			_tmp11_ = grid1;
			_tmp12_ = res;
			_tmp11_->uid = _tmp12_;
			_tmp13_ = grid1;
			_tmp14_ = u;
			_tmp15_ = _tmp14_.name;
			_tmp16_ = g_strdup (_tmp15_);
			_g_free0 (_tmp13_->uname);
			_tmp13_->uname = _tmp16_;
			_tmp17_ = grid1;
			_tmp18_ = u;
			_tmp19_ = _tmp18_.sex;
			_tmp17_->usex = _tmp19_;
			_tmp20_ = grid1;
			_tmp21_ = u;
			_tmp22_ = _tmp21_.age;
			_tmp20_->uage = _tmp22_;
			_tmp23_ = grid1;
			_tmp24_ = u;
			_tmp25_ = _tmp24_.desc;
			_tmp26_ = g_strdup (_tmp25_);
			_g_free0 (_tmp23_->udesc);
			_tmp23_->udesc = _tmp26_;
			_tmp27_ = grid1;
			_tmp28_ = _tmp27_->user_btn;
			_tmp29_ = u;
			_tmp30_ = _tmp29_.name;
			gtk_button_set_label (_tmp28_, _tmp30_);
		} else {
			GtkDialog* _tmp31_;
			FILE* _tmp32_;
			_tmp31_ = self->dlg1;
			gtk_window_set_title ((GtkWindow*) _tmp31_, "用户／密码错误。");
			_tmp32_ = stdout;
			fprintf (_tmp32_, "login fail\n");
			user_data_destroy (&u);
			return;
		}
		_tmp33_ = rpc1;
		if (rpc_client_get_friends_async (_tmp33_) == FALSE) {
			g_print ("RPC error");
			gtk_main_quit ();
		}
		_tmp34_ = app;
		gtk_widget_show_all ((GtkWidget*) _tmp34_);
		_tmp35_ = self->dlg1;
		gtk_widget_hide ((GtkWidget*) _tmp35_);
		user_data_destroy (&u);
	} else {
		if (rid == 4) {
			GtkDialog* _tmp36_;
			AddUserDialog* _tmp37_;
			AddUserDialog* _tmp38_;
			_tmp36_ = self->dlg1;
			gtk_widget_hide ((GtkWidget*) _tmp36_);
			_tmp37_ = add_user_dialog_new ();
			_g_object_unref0 (adduser1);
			adduser1 = _tmp37_;
			_tmp38_ = adduser1;
			add_user_dialog_show (_tmp38_);
		} else {
			gtk_main_quit ();
		}
	}
}


static void
___lambda42__gtk_dialog_response (GtkDialog* _sender,
                                  gint response_id,
                                  gpointer self)
{
	__lambda42_ ((LoginDialog*) self, response_id);
}


LoginDialog*
login_dialog_construct (GType object_type)
{
	LoginDialog * self = NULL;
	AppWin* _tmp0_;
	GtkDialog* _tmp1_;
	GtkGrid* grid = NULL;
	GtkGrid* _tmp2_;
	GtkLabel* _tmp3_;
	GtkLabel* _tmp4_;
	GtkLabel* _tmp5_;
	GtkLabel* _tmp6_;
	GtkLabel* _tmp7_;
	GtkLabel* _tmp8_;
	GtkEntry* _tmp9_;
	GtkEntry* _tmp10_;
	GtkEntry* _tmp11_;
	GtkEntry* _tmp12_;
	GtkEntry* _tmp13_;
	GtkBox* content = NULL;
	GtkDialog* _tmp14_;
	GtkBox* _tmp15_;
	GtkBox* _tmp16_;
	GtkDialog* _tmp17_;
	GtkDialog* _tmp18_;
	GtkDialog* _tmp19_;
	GtkDialog* _tmp20_;
	self = (LoginDialog*) g_object_new (object_type, NULL);
	_tmp0_ = app;
	_tmp1_ = (GtkDialog*) gtk_dialog_new_with_buttons ("登录", (GtkWindow*) _tmp0_, GTK_DIALOG_MODAL, NULL);
	g_object_ref_sink (_tmp1_);
	_g_object_unref0 (self->dlg1);
	self->dlg1 = _tmp1_;
	_tmp2_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp2_);
	grid = _tmp2_;
	_tmp3_ = (GtkLabel*) gtk_label_new ("输入登录信息");
	g_object_ref_sink (_tmp3_);
	_tmp4_ = _tmp3_;
	gtk_grid_attach (grid, (GtkWidget*) _tmp4_, 0, 0, 2, 1);
	_g_object_unref0 (_tmp4_);
	_tmp5_ = (GtkLabel*) gtk_label_new ("用户：");
	g_object_ref_sink (_tmp5_);
	_tmp6_ = _tmp5_;
	gtk_grid_attach (grid, (GtkWidget*) _tmp6_, 0, 1, 1, 1);
	_g_object_unref0 (_tmp6_);
	_tmp7_ = (GtkLabel*) gtk_label_new ("密码：");
	g_object_ref_sink (_tmp7_);
	_tmp8_ = _tmp7_;
	gtk_grid_attach (grid, (GtkWidget*) _tmp8_, 0, 2, 1, 1);
	_g_object_unref0 (_tmp8_);
	_tmp9_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp9_);
	_g_object_unref0 (self->name);
	self->name = _tmp9_;
	_tmp10_ = self->name;
	gtk_grid_attach (grid, (GtkWidget*) _tmp10_, 1, 1, 1, 1);
	_tmp11_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp11_);
	_g_object_unref0 (self->passwd);
	self->passwd = _tmp11_;
	_tmp12_ = self->passwd;
	gtk_entry_set_visibility (_tmp12_, FALSE);
	_tmp13_ = self->passwd;
	gtk_grid_attach (grid, (GtkWidget*) _tmp13_, 1, 2, 1, 1);
	_tmp14_ = self->dlg1;
	_tmp15_ = gtk_dialog_get_content_area (_tmp14_);
	_tmp16_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp15_, gtk_box_get_type ()) ? ((GtkBox*) _tmp15_) : NULL);
	content = _tmp16_;
	gtk_box_pack_start (content, (GtkWidget*) grid, TRUE, TRUE, (guint) 0);
	gtk_widget_show_all ((GtkWidget*) content);
	_tmp17_ = self->dlg1;
	gtk_dialog_add_button (_tmp17_, "登录", 2);
	_tmp18_ = self->dlg1;
	gtk_dialog_add_button (_tmp18_, "注册", 4);
	_tmp19_ = self->dlg1;
	gtk_dialog_add_button (_tmp19_, "取消", 3);
	_tmp20_ = self->dlg1;
	g_signal_connect_object (_tmp20_, "response", (GCallback) ___lambda42__gtk_dialog_response, self, 0);
	_g_object_unref0 (content);
	_g_object_unref0 (grid);
	return self;
}


LoginDialog*
login_dialog_new (void)
{
	return login_dialog_construct (TYPE_LOGIN_DIALOG);
}


gint
login_dialog_run (LoginDialog* self)
{
	gint result = 0;
	GtkDialog* _tmp0_;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->dlg1;
	result = gtk_dialog_run (_tmp0_);
	return result;
}


void
login_dialog_hide (LoginDialog* self)
{
	GtkDialog* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->dlg1;
	gtk_widget_hide ((GtkWidget*) _tmp0_);
}


static void
login_dialog_class_init (LoginDialogClass * klass)
{
	login_dialog_parent_class = g_type_class_peek_parent (klass);
	G_OBJECT_CLASS (klass)->finalize = login_dialog_finalize;
}


static void
login_dialog_instance_init (LoginDialog * self)
{
}


static void
login_dialog_finalize (GObject * obj)
{
	LoginDialog * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_LOGIN_DIALOG, LoginDialog);
	_g_object_unref0 (self->name);
	_g_object_unref0 (self->passwd);
	_g_object_unref0 (self->dlg1);
	G_OBJECT_CLASS (login_dialog_parent_class)->finalize (obj);
}


GType
login_dialog_get_type (void)
{
	static volatile gsize login_dialog_type_id__volatile = 0;
	if (g_once_init_enter (&login_dialog_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (LoginDialogClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) login_dialog_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (LoginDialog), 0, (GInstanceInitFunc) login_dialog_instance_init, NULL };
		GType login_dialog_type_id;
		login_dialog_type_id = g_type_register_static (G_TYPE_OBJECT, "LoginDialog", &g_define_type_info, 0);
		g_once_init_leave (&login_dialog_type_id__volatile, login_dialog_type_id);
	}
	return login_dialog_type_id__volatile;
}


static void
__lambda46_ (JsonrpcClient* s,
             const gchar* m,
             GVariant* p)
{
	FILE* _tmp0_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (s != NULL);
	g_return_if_fail (m != NULL);
	_tmp0_ = stdout;
	fprintf (_tmp0_, "notify: %s\n", m);
	if (g_strcmp0 (m, "msg") != 0) {
		return;
	}
	{
		gint8 typ = 0;
		GVariant* _tmp1_;
		GVariant* _tmp2_;
		gint8 _tmp3_;
		gint64 from = 0LL;
		GVariant* _tmp4_;
		GVariant* _tmp5_;
		gint64 _tmp6_;
		gchar* msg = NULL;
		GVariant* _tmp7_;
		GVariant* _tmp8_;
		const gchar* _tmp9_;
		gchar* _tmp10_;
		gchar* _tmp11_;
		MyGrid* _tmp12_;
		gint8 _tmp13_;
		gint64 _tmp14_;
		const gchar* _tmp15_;
		_tmp1_ = g_variant_lookup_value (p, "T", NULL);
		_tmp2_ = _tmp1_;
		_tmp3_ = (gint8) g_variant_get_int64 (_tmp2_);
		_g_variant_unref0 (_tmp2_);
		typ = _tmp3_;
		_tmp4_ = g_variant_lookup_value (p, "From", NULL);
		_tmp5_ = _tmp4_;
		_tmp6_ = g_variant_get_int64 (_tmp5_);
		_g_variant_unref0 (_tmp5_);
		from = _tmp6_;
		_tmp7_ = g_variant_lookup_value (p, "Msg", NULL);
		_tmp8_ = _tmp7_;
		_tmp9_ = g_variant_get_string (_tmp8_, NULL);
		_tmp10_ = g_strdup (_tmp9_);
		_tmp11_ = _tmp10_;
		_g_variant_unref0 (_tmp8_);
		msg = _tmp11_;
		_tmp12_ = grid1;
		_tmp13_ = typ;
		_tmp14_ = from;
		_tmp15_ = msg;
		my_grid_rpc_callback (_tmp12_, _tmp13_, _tmp14_, _tmp15_);
		_g_free0 (msg);
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		FILE* _tmp16_;
		GError* _tmp17_;
		const gchar* _tmp18_;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp16_ = stdout;
		_tmp17_ = e;
		_tmp18_ = _tmp17_->message;
		fprintf (_tmp16_, "Error: %s\n", _tmp18_);
		_g_error_free0 (e);
	}
	__finally0:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


static void
___lambda46__jsonrpc_client_notification (JsonrpcClient* _sender,
                                          const gchar* method_name,
                                          GVariant* params,
                                          gpointer self)
{
	__lambda46_ (_sender, method_name, params);
}


gint
_vala_main (gchar** args,
            int args_length1)
{
	gint result = 0;
	RpcClient* _tmp3_;
	RpcClient* _tmp4_;
	guint16 _tmp5_;
	RpcClient* _tmp6_;
	JsonrpcClient* _tmp7_;
	AppWin* _tmp8_;
	MyGrid* _tmp9_;
	AppWin* _tmp10_;
	MyGrid* _tmp11_;
	GtkGrid* _tmp12_;
	LoginDialog* _tmp13_;
	LoginDialog* _tmp14_;
	GtkDialog* _tmp15_;
	MyFriendMenu* _tmp16_;
	RpcClient* _tmp17_;
	RpcClient* _tmp18_;
	JsonrpcClient* _tmp19_;
	GError * _inner_error_ = NULL;
	if (!g_thread_supported ()) {
		FILE* _tmp0_;
		_tmp0_ = stderr;
		fprintf (_tmp0_, "Cannot run without threads.\n");
		result = 1;
		return result;
	}
	if (args_length1 == 2) {
		const gchar* _tmp1_;
		gint64 _tmp2_;
		_tmp1_ = args[1];
		_tmp2_ = g_ascii_strtoll (_tmp1_, NULL, 0);
		server_port = (guint16) _tmp2_;
	}
	_tmp3_ = rpc_client_new ();
	_g_object_unref0 (rpc1);
	rpc1 = _tmp3_;
	_tmp4_ = rpc1;
	_tmp5_ = server_port;
	if (rpc_client_connect (_tmp4_, "localhost", _tmp5_) == FALSE) {
		result = -1;
		return result;
	}
	_tmp6_ = rpc1;
	_tmp7_ = _tmp6_->c;
	g_signal_connect (_tmp7_, "notification", (GCallback) ___lambda46__jsonrpc_client_notification, NULL);
	gtk_init (&args_length1, &args);
	_tmp8_ = app_win_new ();
	g_object_ref_sink (_tmp8_);
	_g_object_unref0 (app);
	app = _tmp8_;
	_tmp9_ = my_grid_new ();
	_g_object_unref0 (grid1);
	grid1 = _tmp9_;
	_tmp10_ = app;
	_tmp11_ = grid1;
	_tmp12_ = _tmp11_->mygrid;
	gtk_container_add ((GtkContainer*) _tmp10_, (GtkWidget*) _tmp12_);
	_tmp13_ = login_dialog_new ();
	_g_object_unref0 (login1);
	login1 = _tmp13_;
	_tmp14_ = login1;
	_tmp15_ = _tmp14_->dlg1;
	gtk_widget_show_all ((GtkWidget*) _tmp15_);
	_tmp16_ = my_friend_menu_new ();
	g_object_ref_sink (_tmp16_);
	_g_object_unref0 (popup1);
	popup1 = _tmp16_;
	gtk_main ();
	_tmp17_ = rpc1;
	rpc_client_quit (_tmp17_);
	_tmp18_ = rpc1;
	_tmp19_ = _tmp18_->c;
	jsonrpc_client_close (_tmp19_, NULL, &_inner_error_);
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		gint _tmp20_ = -1;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return _tmp20_;
	}
	result = 0;
	return result;
}


int
main (int argc,
      char ** argv)
{
	return _vala_main (argv, argc);
}



